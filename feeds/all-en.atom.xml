<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Datapile</title><link href="https://datapile.coffeecrew.org/" rel="alternate"></link><link href="https://datapile.coffeecrew.org/feeds/all-en.atom.xml" rel="self"></link><id>https://datapile.coffeecrew.org/</id><updated>2021-04-16T18:19:00+01:00</updated><subtitle>Against Digital Amnesia</subtitle><entry><title>How to wipe my hard drive</title><link href="https://datapile.coffeecrew.org/how-to-wipe-my-hard-drive" rel="alternate"></link><published>2021-04-16T13:03:43+01:00</published><updated>2021-04-16T13:03:43+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2021-04-16:/how-to-wipe-my-hard-drive</id><summary type="html">&lt;p class="first last"&gt;How to wipe all data from my hard&amp;nbsp;drive.&lt;/p&gt;
</summary><content type="html">&lt;div class="admonition warning"&gt;
&lt;p class="first admonition-title"&gt;Warning&lt;/p&gt;
&lt;p class="last"&gt;If you are using these commands your files will be irrevocably deleted! So make sure you understand what you are&amp;nbsp;doing!&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;To securely delete all your data from your hard drive, you can boot your computer with a Linux distribution either from a &lt;span class="caps"&gt;CD&lt;/span&gt; or &lt;span class="caps"&gt;DVD&lt;/span&gt; drive or a simple &lt;span class="caps"&gt;USB&lt;/span&gt; stick. You can find a how to on creating such a &lt;span class="caps"&gt;USB&lt;/span&gt; stick &lt;a class="reference external" href="https://datapile.coffeecrew.org/boot-linux-from-usb-stick"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Once you&amp;#8217;ve booted up your computer with the thumb drive, you need to open a terminal and enter the following&amp;nbsp;command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#&amp;gt; shred -v /dev/sdX&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Where &lt;code&gt;X&lt;/code&gt; is the drive identifier. Your first hard drive is likely to be &lt;code&gt;/dev/sda&lt;/code&gt;, but your mileage may vary. If you are unsure that this is the correct drive, you can&amp;nbsp;execute&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#&amp;gt; cfdisk /dev/sda&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;and see from the size of the drive and partitions if this is the expected&amp;nbsp;drive.&lt;/p&gt;
</content><category term="Fundamentals"></category><category term="Linux"></category><category term="Windows"></category></entry><entry><title>Boot Linux from USB Stick</title><link href="https://datapile.coffeecrew.org/boot-linux-from-usb-stick" rel="alternate"></link><published>2021-04-15T13:03:43+01:00</published><updated>2021-04-15T13:03:43+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2021-04-15:/boot-linux-from-usb-stick</id><summary type="html">&lt;p class="first last"&gt;How to create a &lt;span class="caps"&gt;USB&lt;/span&gt; stick with&amp;nbsp;Linux.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Sometimes you quickly need to boot up a &lt;span class="caps"&gt;PC&lt;/span&gt; with Linux. &lt;span class="caps"&gt;DVD&lt;/span&gt; drives may still be available in some PCs, but there is computer hardware without a &lt;span class="caps"&gt;CD&lt;/span&gt;/&lt;span class="caps"&gt;DVD&lt;/span&gt; drive out&amp;nbsp;there.&lt;/p&gt;
&lt;p&gt;For this example we&amp;#8217;re using the &lt;span class="caps"&gt;KNOPPIX&lt;/span&gt; live Linux that you can download from one of the many &lt;a class="reference external" href="http://knopper.net/knoppix-mirrors/"&gt;mirrors&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Once you&amp;#8217;ve downloaded the &lt;span class="caps"&gt;ISO&lt;/span&gt; image you need to have a program available that allows you to flash the &lt;span class="caps"&gt;ISO&lt;/span&gt; to the &lt;span class="caps"&gt;USB&lt;/span&gt; stick. I recommend &lt;a class="reference external" href="https://www.balena.io/etcher/"&gt;balenaEtcher&lt;/a&gt; as it is easy to use and available for all the major&amp;nbsp;platforms.&lt;/p&gt;
&lt;img alt="" src="img/2020-04-16/balena.png" /&gt;
&lt;p&gt;The only thing left to do after loading the &lt;span class="caps"&gt;ISO&lt;/span&gt; image and selecting your &lt;span class="caps"&gt;USB&lt;/span&gt; stick as a target is to hit the &amp;#8220;Flash!&amp;#8221; button and use your new Linux &lt;span class="caps"&gt;USB&lt;/span&gt;&amp;nbsp;stick.&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="Linux"></category><category term="Fundamentals"></category></entry><entry><title>Get Windows Wi-Fi Password</title><link href="https://datapile.coffeecrew.org/get-windows-wi-fi-password" rel="alternate"></link><published>2021-04-13T13:03:43+01:00</published><updated>2021-04-16T18:19:00+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2021-04-13:/get-windows-wi-fi-password</id><summary type="html">&lt;p class="first last"&gt;How to show your Windows Wi-Fi&amp;nbsp;password.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;If you forgot your Wi-Fi password, but Windows still connects to your Wi-Fi, you can execute the following command in a command prompt to retrieve it in plain&amp;nbsp;text:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#&amp;gt; netsh wlan show profile name=profilename key=clear&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;To see which &lt;span class="caps"&gt;WLAN&lt;/span&gt; profiles (SSIDs/network names) exist, simply&amp;nbsp;execute:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#&amp;gt; netsh wlan show profiles&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Windows"></category><category term="Security"></category></entry><entry><title>No Fuzz LaTeX Document Compilation</title><link href="https://datapile.coffeecrew.org/no-fuzz-latex-document-compilation" rel="alternate"></link><published>2021-04-11T13:03:43+01:00</published><updated>2021-04-11T13:03:43+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2021-04-11:/no-fuzz-latex-document-compilation</id><summary type="html">&lt;p class="first last"&gt;How to easily compile a LaTeX document with&amp;nbsp;docker&lt;/p&gt;
</summary><content type="html">&lt;p&gt;You downloaded a &lt;code&gt;.tex&lt;/code&gt; document from somewhere, made a few modifications and want to compile it into a &lt;span class="caps"&gt;PDF&lt;/span&gt; file now. Of course you don&amp;#8217;t want to permanently install a plethora of software for that on your device too, as you just need to compile that single&amp;nbsp;document.&lt;/p&gt;
&lt;p&gt;If you have &lt;a class="reference external" href="https://www.docker.com/products/docker-desktop"&gt;Docker&lt;/a&gt; installed, I&amp;#8217;ve got you&amp;nbsp;covered.&lt;/p&gt;
&lt;p&gt;We use the following &lt;code&gt;article.tex&lt;/code&gt; file to check if compilation into a &lt;span class="caps"&gt;PDF&lt;/span&gt; file&amp;nbsp;works:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;\documentclass&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;article&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;\begin&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;document&lt;span class="nb"&gt;}&lt;/span&gt;
Hello World!
&lt;span class="k"&gt;\end&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;document&lt;span class="nb"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Simply navigate to the folder where you&amp;#8217;ve put your &lt;code&gt;article.tex&lt;/code&gt; file and execute the following command in your&amp;nbsp;terminal:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#&amp;gt; docker run --rm -v $(pwd):/docs authsec/sphinx pdflatex article.tex&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;If you&amp;#8217;re running Windows the command is basically the same, but you need to replace &lt;code&gt;$(pwd)&lt;/code&gt; with &lt;code&gt;${PWD}&lt;/code&gt; for the above command to&amp;nbsp;work.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;This command generates an &lt;code&gt;article.pdf&lt;/code&gt; file with the content &amp;#8220;Hello&amp;nbsp;World!&amp;#8221;&lt;/p&gt;
&lt;p&gt;For advanced use cases you can of course add additional &lt;code&gt;pdflatex&lt;/code&gt; command line flags like &lt;code&gt;-interaction=batchmode&lt;/code&gt;. Just append after the &lt;code&gt;pdflatex&lt;/code&gt; command as if you&amp;#8217;d use the regular&amp;nbsp;command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#&amp;gt; docker run --rm -v $(pwd):/docs authsec/sphinx pdflatex -interaction=batchmode article.tex&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="cleaning-up"&gt;
&lt;h2&gt;Cleaning&amp;nbsp;Up&lt;/h2&gt;
&lt;p&gt;In order to remove the downloaded container from your system you can&amp;nbsp;run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#&amp;gt; docker image rm authsec/sphinx&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you want to clean up everything docker, simply&amp;nbsp;run:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#&amp;gt; docker system prune&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The docker image used to compile the LaTeX document, can also be used to compile sphinx projects or a pelican blog. You can find further information in my &lt;a class="reference external" href="https://github.com/authsec/sphinx"&gt;Github Repository&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Docker"></category><category term="LaTeX"></category></entry><entry><title>Windows 10 Pro activation error 0x8004FE33</title><link href="https://datapile.coffeecrew.org/windows-10-pro-activation-error-0x8004fe33" rel="alternate"></link><published>2020-12-19T21:22:23+01:00</published><updated>2020-12-19T21:22:23+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2020-12-19:/windows-10-pro-activation-error-0x8004fe33</id><summary type="html">&lt;p class="first last"&gt;How to solve Windows 10 activation error&amp;nbsp;0x8004FE33&lt;/p&gt;
</summary><content type="html">&lt;p&gt;If you recently installed a proxy server yourself (like e.g. &lt;a class="reference external" href="https://github.com/authsec/squid"&gt;my squid proxy server&lt;/a&gt;) or your organization set up a (new) proxy server for you, you might run into issues when trying to activate&amp;nbsp;Windows.&lt;/p&gt;
&lt;p&gt;The error I ran into was &lt;cite&gt;Error code: 0x8004FE33 Description: Acquisition of Secure Processor Certificate failed.&lt;/cite&gt;, which can easily be resolved by stopping to intercept (ssl_bump) traffic to certain Microsoft domains. If you are using my proxy solution, you can create a new acl for Microsofts&amp;#8217; activation servers and exclude them from being bumped like&amp;nbsp;so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c"&gt;# Microsoft activation services (partially needed for license activation)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.go.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.login.live.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.activation.sls.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.validation.sls.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.activation-v2.sls.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.validation-v2.sls.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.displaycatalog.mp.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.licensing.mp.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.purchase.mp.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.displaycatalog.md.mp.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.licensing.md.mp.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;serverIsMicrosoftActivation&lt;span class="w"&gt; &lt;/span&gt;ssl::server_name&lt;span class="w"&gt; &lt;/span&gt;.purchase.md.mp.microsoft.com&lt;span class="w"&gt;&lt;/span&gt;

&lt;span class="c"&gt;# Listen on 4128 for SSL bumping&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;http_port&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;4128&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;ssl-bump&lt;span class="w"&gt; &lt;/span&gt;generate-host-certificates=on&lt;span class="w"&gt; &lt;/span&gt;dynamic_cert_mem_cache_size=4MB&lt;span class="w"&gt; &lt;/span&gt;cert=/etc/ssl/proxy/certs/proxy-ca.crt&lt;span class="w"&gt; &lt;/span&gt;key=/etc/ssl/proxy/private/proxy-ca.key&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="k"&gt;acl&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;step2&lt;span class="w"&gt; &lt;/span&gt;at_step&lt;span class="w"&gt; &lt;/span&gt;SslBump2&lt;span class="w"&gt;&lt;/span&gt;
ssl_bump&lt;span class="w"&gt; &lt;/span&gt;peek&lt;span class="w"&gt; &lt;/span&gt;step2&lt;span class="w"&gt;&lt;/span&gt;
ssl_bump&lt;span class="w"&gt; &lt;/span&gt;bump&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;all&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;!serverIsBank&lt;span class="w"&gt; &lt;/span&gt;!serverIsMicrosoftActivation&lt;span class="w"&gt;&lt;/span&gt;
ssl_bump&lt;span class="w"&gt; &lt;/span&gt;splice&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="no"&gt;all&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;For more information see the &lt;a class="reference external" href="https://support.microsoft.com/en-us/help/921471/windows-activation-or-validation-fails-with-error-code-0x8004fe33"&gt;Microsoft Support Site&lt;/a&gt;.&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="Windows 10"></category><category term="Proxy"></category></entry><entry><title>Run command as different user on Windows</title><link href="https://datapile.coffeecrew.org/run-command-as-different-user-on-windows" rel="alternate"></link><published>2020-12-13T22:33:44+01:00</published><updated>2020-12-13T22:33:44+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2020-12-13:/run-command-as-different-user-on-windows</id><summary type="html">&lt;p class="first last"&gt;How to get the &lt;span class="caps"&gt;IP&lt;/span&gt; address from host&amp;nbsp;group.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;There are times when you do want to run a command on Windows, such as for example a powershell window with elevated privileges. There may also be a reason that you want to run the command as an administrative user that is not named&amp;nbsp;&amp;#8216;Administrator&amp;#8217;.&lt;/p&gt;
&lt;p&gt;You can do this by spawning a non-privileged powershell window first. From there enter the command below, and, after entering your password, you should have an administrative&amp;nbsp;terminal.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;PS C:\Users\you&amp;gt; runas /user:theAdminUsername powershell
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This way you can spawn a &amp;#8220;root&amp;#8221; Terminal in Windows as you would do with e.g. &lt;code&gt;sudo su -&lt;/code&gt; on a Linux&amp;nbsp;machine.&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="Windows 10"></category><category term="Powershell"></category></entry><entry><title>Get ansible_host from host group</title><link href="https://datapile.coffeecrew.org/get-ansible_host-from-host-group" rel="alternate"></link><published>2020-10-24T18:56:00+01:00</published><updated>2020-10-24T18:56:00+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2020-10-24:/get-ansible_host-from-host-group</id><summary type="html">&lt;p class="first last"&gt;How to get the &lt;span class="caps"&gt;IP&lt;/span&gt; address from host&amp;nbsp;group.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Assume you are working with this inventory (&lt;code&gt;hosts&lt;/code&gt;)&amp;nbsp;file:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;bootstrap&lt;span class="o"&gt;]&lt;/span&gt;
opihi.example.com &lt;span class="nv"&gt;ansible_host&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;192&lt;/span&gt;.168.30.254 &lt;span class="nv"&gt;ansible_user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;you &lt;span class="nv"&gt;ansible_password&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;{{ vault_opihi_you_user_password }}&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;ansible_python_interpreter&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/bin/python3
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;then you can get the &lt;span class="caps"&gt;IP&lt;/span&gt; address with the expression &lt;code&gt;{{ hostvars[groups['bootstrap'][0]].ansible_host }}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Here is an example&amp;nbsp;playbook:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;---
- hosts: localhost

  tasks:
      - debug: &lt;span class="nv"&gt;msg&lt;/span&gt;&lt;span class="o"&gt;={{&lt;/span&gt; hostvars&lt;span class="o"&gt;[&lt;/span&gt;groups&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;bootstrap&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;][&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="o"&gt;]]&lt;/span&gt;.ansible_host &lt;span class="o"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Which will&amp;nbsp;output:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$#&lt;/span&gt;&amp;gt; ansible-playbook -i inventories/prod/ debug.yml

    PLAY &lt;span class="o"&gt;[&lt;/span&gt;localhost&lt;span class="o"&gt;]&lt;/span&gt; ********************************************************************************************************************************

    TASK &lt;span class="o"&gt;[&lt;/span&gt;Gathering Facts&lt;span class="o"&gt;]&lt;/span&gt; **************************************************************************************************************************
    ok: &lt;span class="o"&gt;[&lt;/span&gt;localhost&lt;span class="o"&gt;]&lt;/span&gt;

    TASK &lt;span class="o"&gt;[&lt;/span&gt;debug&lt;span class="o"&gt;]&lt;/span&gt; ************************************************************************************************************************************
    ok: &lt;span class="o"&gt;[&lt;/span&gt;localhost&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; &lt;span class="o"&gt;{}&lt;/span&gt;

    MSG:

    &lt;span class="m"&gt;192&lt;/span&gt;.168.30.254

    PLAY RECAP **************************************************************************************************************************************
    localhost                  : &lt;span class="nv"&gt;ok&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;    &lt;span class="nv"&gt;changed&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;    &lt;span class="nv"&gt;unreachable&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;    &lt;span class="nv"&gt;failed&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;    &lt;span class="nv"&gt;skipped&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;    &lt;span class="nv"&gt;rescued&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;    &lt;span class="nv"&gt;ignored&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Enjoy.&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="Ansible"></category></entry><entry><title>Fixing Vagrant and VMware Fusion</title><link href="https://datapile.coffeecrew.org/fixing-vagrant-and-vmware-fusion" rel="alternate"></link><published>2020-10-21T21:56:00+01:00</published><updated>2020-10-21T21:56:00+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2020-10-21:/fixing-vagrant-and-vmware-fusion</id><summary type="html">&lt;p class="first last"&gt;This post shows you how you can fix the port forward conflict on host port&amp;nbsp;2222.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;For some reason &lt;a class="reference external" href="https://www.vagrantup.com/"&gt;Vagrant&lt;/a&gt; is sometimes unable to start the virtual machine and aborts with an error message&amp;nbsp;like:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Some of the defined forwarded ports would collide with existing
forwarded ports on VMware network devices. This can be due to
existing Vagrant-managed VMware machines, or due to manually
configured port forwarding with VMware. Please fix the following
port collisions and try again:

&lt;span class="m"&gt;2222&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you run into that problem there are a few things that might help you fix them. You can for example shut down your &lt;code&gt;vagrant&lt;/code&gt; machine and remove it from the virtual machine &amp;#8220;Virtual Machines&amp;#8221; sidebar in the Fusion &lt;span class="caps"&gt;UI&lt;/span&gt;. If you&amp;#8217;re lucky that will already solve your&amp;nbsp;problem.&lt;/p&gt;
&lt;p&gt;Some other time the following series of commands seems to help solve the issue at&amp;nbsp;hand:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$#&lt;/span&gt;&amp;gt; vagrant halt &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
sudo rm -f /opt/vagrant-vmware-desktop/settings/nat.json &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
sudo killall vagrant-vmware-utility &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
vagrant up
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If that doesn&amp;#8217;t solve you&amp;#8217;re problem, you can try a combination of both approaches. If this doesn&amp;#8217;t work you have to continue googling&amp;nbsp;;)&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="Vagrant"></category><category term="VMware Fusion"></category></entry><entry><title>How To Remove PDF Write Protection</title><link href="https://datapile.coffeecrew.org/how-to-remove-pdf-write-protection" rel="alternate"></link><published>2020-10-11T14:23:00+01:00</published><updated>2021-04-05T16:35:00+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2020-10-11:/how-to-remove-pdf-write-protection</id><summary type="html">&lt;p class="first last"&gt;This post shows you how you can remove write protection from a locked &lt;span class="caps"&gt;PDF&lt;/span&gt;.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Some PDFs you download are write protected. This is especially annoying if you do like to mark up the &lt;span class="caps"&gt;PDF&lt;/span&gt; in a utility like e.g. &lt;a class="reference external" href="https://devontechnologies.com/apps/devonthink"&gt;DEVONthink&lt;/a&gt;. It is not even possible to simply highlight something as long as the &lt;span class="caps"&gt;PDF&lt;/span&gt; is write&amp;nbsp;protected.&lt;/p&gt;
&lt;p&gt;Luckily the problem can be solved with a little command line application called &lt;code&gt;qpdf&lt;/code&gt;.&lt;/p&gt;
&lt;div class="section" id="installation"&gt;
&lt;h2&gt;Installation&lt;/h2&gt;
&lt;p&gt;There are multiple ways to install the software. You can either use the package manager of your operating system or you can use &lt;a class="reference external" href="https://www.docker.com/"&gt;Docker&lt;/a&gt;. This will allow you to quickly use the command and discard the whole execution environment if you no longer need&amp;nbsp;it.&lt;/p&gt;
&lt;div class="section" id="homebrew"&gt;
&lt;h3&gt;Homebrew&lt;/h3&gt;
&lt;p&gt;I&amp;#8217;m on a Mac and if you have &lt;a class="reference external" href="https://brew.sh/"&gt;Homebrew&lt;/a&gt; installed, you can execute &lt;code&gt;brew install qpdf&lt;/code&gt; in your terminal application. This will download and install the &lt;code&gt;qpdf&lt;/code&gt; command line tool that you can use to remove the &lt;span class="caps"&gt;PDF&lt;/span&gt; write&amp;nbsp;protection.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p&gt;I&amp;#8217;m running the following&amp;nbsp;version:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
#$&amp;gt; qpdf --version
qpdf version 10.0.1
Run qpdf --copyright to see copyright and license information.
&lt;/pre&gt;
&lt;p class="last"&gt;Keep this in mind if a feature is not available or does not&amp;nbsp;work.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;If you&amp;#8217;re not on a Mac you need to use the package manager of your operating system to install the&amp;nbsp;application.&lt;/p&gt;
&lt;p&gt;You can use the utility like&amp;nbsp;so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#$&amp;gt; cd folder-with-pdf&lt;/span&gt;
&lt;span class="c1"&gt;#$&amp;gt; qpdf --decrypt --replace-input my.pdf&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="docker"&gt;
&lt;h3&gt;Docker&lt;/h3&gt;
&lt;p&gt;If you are already using &lt;a class="reference external" href="https://www.docker.com/"&gt;Docker&lt;/a&gt; then why not employ a container to get the job done. The container I am using is pretty heavyweight if you just need to use the little &lt;code&gt;qpdf&lt;/code&gt; utility and you may want to use a smaller container. However, if you&amp;#8217;re additionally documenting stuff with  &lt;a class="reference external" href="https://www.sphinx-doc.org/en/master/"&gt;Sphinx&lt;/a&gt; or use &lt;a class="reference external" href="https://blog.getpelican.com/"&gt;Pelican&lt;/a&gt; to write your blog, the heavyweight container might be a good choice for you&amp;nbsp;anyway.&lt;/p&gt;
&lt;p&gt;You can use the &lt;a class="reference external" href="https://github.com/authsec/sphinx"&gt;custom Sphinx&lt;/a&gt; container as&amp;nbsp;follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#$&amp;gt; cd folder-with-pdf&lt;/span&gt;
&lt;span class="c1"&gt;#$&amp;gt; docker run --rm -it -v $(pwd):/docs authsec/sphinx qpdf --decrypt --replace-input my.pdf&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;If you&amp;#8217;re on Windows, the current working directory needs to be specified with &lt;code&gt;${PWD}&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="bulk-update"&gt;
&lt;h3&gt;Bulk&amp;nbsp;Update&lt;/h3&gt;
&lt;p&gt;If you do have a folder full of PDFs you want to convert, open up a terminal and navigate to the folder that contains the PDFs. Next execute the following command to bulk remove the &lt;span class="caps"&gt;PDF&lt;/span&gt; write&amp;nbsp;protection:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#$&amp;gt; cd folder-with-pdf&lt;/span&gt;
&lt;span class="c1"&gt;#$&amp;gt; find . -name \*.pdf -exec sh -c &amp;#39;qpdf --decrypt --replace-input &amp;quot;{}&amp;quot;&amp;#39; \;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You can also add another command that moves the converted file into another folder like so (note that doing it as shown below will flatten your directory&amp;nbsp;structure):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#$&amp;gt; cd folder-with-pdf&lt;/span&gt;
&lt;span class="c1"&gt;#$&amp;gt; find . -name \*.pdf -exec sh -c &amp;#39;qpdf --decrypt --replace-input &amp;quot;{}&amp;quot;; mv &amp;quot;{}&amp;quot; ../writeProtectionRemoved&amp;#39; \;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="PDF"></category></entry><entry><title>How To Start A Consul Docker Image</title><link href="https://datapile.coffeecrew.org/how-to-start-a-consul-docker-image" rel="alternate"></link><published>2016-09-20T21:48:12+01:00</published><updated>2016-09-20T21:48:12+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2016-09-20:/how-to-start-a-consul-docker-image</id><summary type="html">&lt;p class="first last"&gt;How to start a local consul&amp;nbsp;server.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;If you quickly have to start a &lt;a class="reference external" href="https://www.consul.io/"&gt;Consul&lt;/a&gt;  docker image you can use the following&amp;nbsp;command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;docker run -p &lt;span class="m"&gt;8400&lt;/span&gt;:8400 -p &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1:8500:8500 -p &lt;span class="m"&gt;8600&lt;/span&gt;:8600/udp -h node1 consul agent -dev -client &lt;span class="m"&gt;0&lt;/span&gt;.0.0.0
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;This is especially useful for development purposes and quick tests and should not be used in a productive&amp;nbsp;environment.&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="Consul"></category><category term="Database"></category></entry><entry><title>Upload Maven Artifacts Into Nexus 3</title><link href="https://datapile.coffeecrew.org/upload-maven-artifacts-into-nexus-3" rel="alternate"></link><published>2016-08-02T21:23:31+01:00</published><updated>2016-08-02T21:23:31+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2016-08-02:/upload-maven-artifacts-into-nexus-3</id><summary type="html">&lt;p class="first last"&gt;How to upload artifacts into Nexus 3 from the command&amp;nbsp;line.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Sometimes you need to upload an artifact into Nexus. With Nexus 2 this was very easy if you had filesystem access or access to the Web &lt;span class="caps"&gt;UI&lt;/span&gt;. In Nexus 3 you are no longer able to access the filesystem and do not have a &lt;span class="caps"&gt;UI&lt;/span&gt; to upload your artifacts. This is why you have to do it using the &lt;code&gt;mvn&lt;/code&gt; &lt;span class="caps"&gt;CLI&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;If you have some strangely proxied system where you have &lt;code&gt;ssh&lt;/code&gt; access to the machine running Nexus you can also use &lt;span class="caps"&gt;SSH&lt;/span&gt; port forwarding if you are unable to reach the machine directly&amp;nbsp;otherwise.&lt;/p&gt;
&lt;p&gt;You need a configuration like this where the user has permission to deploy into your&amp;nbsp;repository.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;settings&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/SETTINGS/1.0.0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
        &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/SETTINGS/1.0.0 http://maven.apache.org/xsd/settings-1.0.0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;

    &lt;span class="nt"&gt;&amp;lt;servers&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;server&amp;gt;&lt;/span&gt;
            &lt;span class="c"&gt;&amp;lt;!-- Link this id here to the repo ID in the mirror section --&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;id&amp;gt;&lt;/span&gt;repo&lt;span class="nt"&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;username&amp;gt;&lt;/span&gt;deployment&lt;span class="nt"&gt;&amp;lt;/username&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;password&amp;gt;&lt;/span&gt;password&lt;span class="nt"&gt;&amp;lt;/password&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/server&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/servers&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/settings&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Get the &lt;a class="reference external" href="https://gist.github.com/authsec/b603d2eaf4afc02ca4802a450838e7a1"&gt;Gist here&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;If that is out of the way you can use the &lt;span class="caps"&gt;CLI&lt;/span&gt; to upload the artifact like&amp;nbsp;so:&lt;/p&gt;
&lt;p&gt;Please note that in this case also a different configuration file is used to
upload the artifact, to avoid working with the deployment user for normal builds
where you want the user only to have read&amp;nbsp;permission.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;mvn -s ~/.m2/settings.xml.upload deploy:deploy-file &lt;span class="se"&gt;\&lt;/span&gt;
    -DgroupId&lt;span class="o"&gt;=&lt;/span&gt;org.wildfly &lt;span class="se"&gt;\&lt;/span&gt;
    -DartifactId&lt;span class="o"&gt;=&lt;/span&gt;wildfly-dist &lt;span class="se"&gt;\&lt;/span&gt;
    -Dversion&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt;.0.0.Final &lt;span class="se"&gt;\&lt;/span&gt;
    -DgeneratePom&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -Dpackaging&lt;span class="o"&gt;=&lt;/span&gt;tar.gz &lt;span class="se"&gt;\&lt;/span&gt;
    -DrepositoryId&lt;span class="o"&gt;=&lt;/span&gt;repo &lt;span class="se"&gt;\&lt;/span&gt;
    -Durl&lt;span class="o"&gt;=&lt;/span&gt;http://repo.example.com/repository/thirdparty &lt;span class="se"&gt;\&lt;/span&gt;
    -Dfile&lt;span class="o"&gt;=&lt;/span&gt;wildfly-10.0.0.Final.tar.gz
&lt;/pre&gt;&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Maven"></category><category term="Nexus"></category></entry><entry><title>Programmatically Start A JSF Flow</title><link href="https://datapile.coffeecrew.org/programmatically-start-a-jsf-flow" rel="alternate"></link><published>2016-07-08T21:44:25+01:00</published><updated>2016-07-08T21:44:25+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2016-07-08:/programmatically-start-a-jsf-flow</id><summary type="html">&lt;p class="first last"&gt;How to programmatically start a faces&amp;nbsp;flow.&lt;/p&gt;
</summary><content type="html">&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;This was tested with Wildfly 10.0.0.Final, Mojarra 2.2.12 and Java &lt;span class="caps"&gt;JDK&lt;/span&gt;&amp;nbsp;1.8.0_51&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;There are situations where you can not start a &lt;span class="caps"&gt;JSF&lt;/span&gt; (2.2) flow in the usual way by simply redirecting to the flow&amp;#8217;s start page from your button&amp;nbsp;action.&lt;/p&gt;
&lt;p&gt;This is for example the case when you want to start a &lt;span class="caps"&gt;JSF&lt;/span&gt; flow from e.g. a view action method. In this case it is not sufficient to simple return the view name of the flow as this will not just start&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;To properly start the flow you need to first tell the flow handler that you are now transitioning into a flow. You can do this with the following&amp;nbsp;code:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;FacesContext&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FacesContext&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCurrentInstance&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;FlowHandler&lt;/span&gt; &lt;span class="n"&gt;handler&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getApplication&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getFlowHandler&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;transition&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;handler&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getFlow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;context&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;FLOW_NAME&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;FLOW_NAME&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If done like this, that flow should start as expected. However, if you don&amp;#8217;t set up the &lt;code&gt;FlowHandler.transition&lt;/code&gt; properly you will end up with the following&amp;nbsp;error:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;WELD-001303: No active contexts for scope type javax.faces.flow.FlowScoped
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;You need to reach the page running the view action through a &lt;code&gt;GET&lt;/code&gt; request. So using the normal &lt;code&gt;h:commandButton&lt;/code&gt; will not work in this case as this issues a &lt;code&gt;POST&lt;/code&gt; request (except you add &lt;code&gt;?faces-redirect=true&lt;/code&gt; to your action parameter of&amp;nbsp;course).&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;The full source for this example can be found &lt;a class="reference external" href="https://github.com/authsec/examples/tree/master/java/programmatically-start-faces-flow"&gt;here&lt;/a&gt;.&lt;/p&gt;
</content><category term="Programming"></category><category term="Java"></category><category term="JSF"></category></entry><entry><title>Back To QNAP</title><link href="https://datapile.coffeecrew.org/back-to-qnap" rel="alternate"></link><published>2016-06-15T22:36:12+01:00</published><updated>2016-06-15T22:36:12+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2016-06-15:/back-to-qnap</id><summary type="html">&lt;p class="first last"&gt;How to backup a remote folder to your &lt;span class="caps"&gt;QNAP&lt;/span&gt;&amp;nbsp;storage.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Sometimes you may want to backup/synchronize data from a remote server to your local &lt;span class="caps"&gt;QNAP&lt;/span&gt; server. This can be done fairly easily and efficiently using the already installed &lt;code&gt;rsync&lt;/code&gt; command.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;You need to have set up a passwordless &lt;span class="caps"&gt;SSH&lt;/span&gt; login from your &lt;span class="caps"&gt;QNAP&lt;/span&gt; to your remote host for the below script to&amp;nbsp;work.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;In addition the script below will send an eMail once it finishes it&amp;#8217;s run. To get the script going on your machine, simply adapt the variables to point to your local directories and supply a valid eMail address (can be the same for &lt;span class="caps"&gt;FROM&lt;/span&gt; and &lt;span class="caps"&gt;TO&lt;/span&gt;).&lt;/p&gt;
&lt;p&gt;As any operating system upgrade will otherwise delete your backup script you need to place it onto the share disk itself, as this will prevent the script of being deleted during an upgrade operation (I suggest stuffing it into a Gist on Github as well&amp;nbsp;;)).&lt;/p&gt;
&lt;p&gt;I suggest putting the script in the following location if you have set up a &lt;span class="caps"&gt;RAID&lt;/span&gt; 5 array (the location may be slightly different for you setup) &lt;code&gt;/share/MD0_DATA&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/sh&lt;/span&gt;

&lt;span class="c1"&gt;# Script to periodically synchronize a remote directory with your&lt;/span&gt;
&lt;span class="c1"&gt;# local QNAP storage.&lt;/span&gt;

&lt;span class="c1"&gt;# Source folders/user on remote machine&lt;/span&gt;
&lt;span class="nv"&gt;BACKUP_SOURCE_USER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;backup-user&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;BACKUP_SOURCE_HOST&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;backuphost.example.com&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;BACKUP_SOURCE_FOLDER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/backup/subdir&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# Directory to save the remote backup locally&lt;/span&gt;
&lt;span class="nv"&gt;BACKUP_SINK_FOLDER&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/share/MD0_DATA/Qmultimedia/backup-dir&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# For grepping the available space&lt;/span&gt;
&lt;span class="nv"&gt;BACKUP_SHARE_MOUNT_POINT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/share/MD0_DATA&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;SUBJ_PREFIX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;[RSYNC BACKUP]&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SUBJECT_FAIL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SUBJ_PREFIX&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; Synchronization unsuccessful!&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;SUBJECT_SUCCESS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SUBJ_PREFIX&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; Synchronization successful!&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;MAIL_TO&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hansi@example.com&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;MAIL_FROM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;hansi-machine@example.com&amp;quot;&lt;/span&gt;

&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/tmp/email_body.txt&amp;quot;&lt;/span&gt;
&lt;span class="nv"&gt;RSYNC_CONTENT_FILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/tmp/rsyncContent.txt&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# Sends a mail message&lt;/span&gt;
&lt;span class="c1"&gt;# $1 = subject&lt;/span&gt;
&lt;span class="c1"&gt;# $2 = to&lt;/span&gt;
&lt;span class="c1"&gt;# $3 = from&lt;/span&gt;
&lt;span class="c1"&gt;# $4 = msg&lt;/span&gt;
send_mail&lt;span class="o"&gt;()&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
&lt;span class="nb"&gt;local&lt;/span&gt; &lt;span class="nv"&gt;tmpfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/tmp/sendmail.tmp&amp;quot;&lt;/span&gt;
/bin/echo -e &lt;span class="s2"&gt;&amp;quot;Subject: &lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;\r&amp;quot;&lt;/span&gt; &amp;gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$tmpfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
/bin/echo -e &lt;span class="s2"&gt;&amp;quot;To: &lt;/span&gt;&lt;span class="nv"&gt;$2&lt;/span&gt;&lt;span class="s2"&gt;\r&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$tmpfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
/bin/echo -e &lt;span class="s2"&gt;&amp;quot;From: &lt;/span&gt;&lt;span class="nv"&gt;$3&lt;/span&gt;&lt;span class="s2"&gt;\r&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$tmpfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
/bin/echo -e &lt;span class="s2"&gt;&amp;quot;\r&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$tmpfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; -f &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$4&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
   cat &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$4&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$tmpfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
   /bin/echo -e &lt;span class="s2"&gt;&amp;quot;\r\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$tmpfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt;
   /bin/echo -e &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$4&lt;/span&gt;&lt;span class="s2"&gt;\r\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$tmpfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
/usr/sbin/sendmail -t &amp;lt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$tmpfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
rm &lt;span class="nv"&gt;$tmpfile&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

/bin/echo -e &lt;span class="s2"&gt;&amp;quot;Backup started at: &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;\n&amp;quot;&lt;/span&gt; &amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/bin/echo &lt;span class="s2"&gt;&amp;quot;Space available on backup disk (before backup)&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/bin/echo &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;df -h &lt;span class="p"&gt;|&lt;/span&gt; head -n1&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/bin/echo &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;df -h &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BACKUP_SHARE_MOUNT_POINT&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/bin/echo -e &lt;span class="s2"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;

/bin/echo -e &lt;span class="s2"&gt;&amp;quot;The following output was produced by the rsync command:\n&amp;quot;&lt;/span&gt; &amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RSYNC_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/usr/bin/rsync -azhv &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BACKUP_SOURCE_USER&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;@&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BACKUP_SOURCE_HOST&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;:&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BACKUP_SOURCE_FOLDER&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BACKUP_SINK_FOLDER&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RSYNC_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$?&lt;/span&gt; -eq &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="k"&gt;then&lt;/span&gt;
&lt;span class="nv"&gt;SUBJECT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SUBJECT_SUCCESS&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt;
&lt;span class="nv"&gt;SUBJECT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SUBJECT_FAIL&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;

/bin/echo -e &lt;span class="s2"&gt;&amp;quot;Backup ended at: &lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;date&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/bin/echo &lt;span class="s2"&gt;&amp;quot;Space available on backup disk (after backup)&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/bin/echo &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;df -h &lt;span class="p"&gt;|&lt;/span&gt; head -n1&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/bin/echo &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;df -h &lt;span class="p"&gt;|&lt;/span&gt; grep &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;BACKUP_SHARE_MOUNT_POINT&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
/bin/echo -e &lt;span class="s2"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;

/bin/cat &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;RSYNC_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;

send_mail &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;SUBJECT&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MAIL_TO&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MAIL_FROM&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;MSG_CONTENT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Get the &lt;a class="reference external" href="https://gist.github.com/authsec/42b3c5099e1cc45bc761c8bb6366ede8"&gt;Gist here&lt;/a&gt;!&lt;/p&gt;
&lt;div class="section" id="executing-a-daily-backup"&gt;
&lt;h2&gt;Executing a Daily&amp;nbsp;Backup&lt;/h2&gt;
&lt;p&gt;Once the script is in it&amp;#8217;s place you need to configure a cron job so it will be executed let&amp;#8217;s say once a day at 5 &lt;span class="caps"&gt;AM&lt;/span&gt;. To do so simply type &lt;code&gt;crontab -e&lt;/code&gt; into your terminal as admin user and add a line like this at the end of the&amp;nbsp;file.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 5 * * * /share/MD0_DATA/backupRemoteDirToQnap.sh
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;There you have it, nice and shiny&amp;nbsp;backup.&lt;/p&gt;
&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Shell"></category><category term="Bash"></category><category term="Backup"></category><category term="QNAP"></category></entry><entry><title>How To Setup Hovercraft On Mac OS</title><link href="https://datapile.coffeecrew.org/how-to-setup-hovercraft-on-mac-os" rel="alternate"></link><published>2016-05-27T20:02:00+01:00</published><updated>2016-05-27T20:02:00+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2016-05-27:/how-to-setup-hovercraft-on-mac-os</id><summary type="html">&lt;p class="first last"&gt;How to set up Hovercraft on Mac &lt;span class="caps"&gt;OS&lt;/span&gt;&amp;nbsp;X.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;If you want to setup hovercraft for creating presentations on your Mac, the following steps may help if you already have &lt;a class="reference external" href="https://www.macports.org/"&gt;MacPorts&lt;/a&gt;&amp;nbsp;installed.&lt;/p&gt;
&lt;p&gt;At first install python if you haven&amp;#8217;t&amp;nbsp;already:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$#&lt;/span&gt;&amp;gt; sudo port install python33 py33-pip
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As you&amp;#8217;ll run into problems, you have to export the language for the next command to run successfully. So add these two lines to your &lt;code&gt;~/.bash_profile&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LC_ALL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;LANG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;And while we&amp;#8217;re at it, add the following path to your &lt;code&gt;PATH&lt;/code&gt; variable as well, so you can later access the &lt;code&gt;hovercraft&lt;/code&gt; command&amp;nbsp;directly.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$#&lt;/span&gt;&amp;gt; /opt/local/Library/Frameworks/Python.framework/Versions/3.3/bin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Your path then looks something like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$#&lt;/span&gt;&amp;gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;PATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/opt/local/bin:/opt/local/sbin:/opt/local/Library/Frameworks/Python.framework/Versions/3.3/bin:&lt;/span&gt;&lt;span class="nv"&gt;$PATH&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now you can finally install hovercraft like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;$#&lt;/span&gt;&amp;gt; sudo -H pip install hovercraft
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Happy&amp;nbsp;hovercrafting!&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="Presentation"></category><category term="Hovercraft"></category></entry><entry><title>Quickly Rename a Bunch Of Files With Bash</title><link href="https://datapile.coffeecrew.org/quickly-rename-a-bunch-of-files-with-bash" rel="alternate"></link><published>2015-11-22T18:36:12+01:00</published><updated>2015-11-22T18:36:12+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2015-11-22:/quickly-rename-a-bunch-of-files-with-bash</id><summary type="html">&lt;p class="first last"&gt;How to bulk rename files with&amp;nbsp;bash.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Sometimes you might feel the need to rename a bunch of files from one file extension to&amp;nbsp;another.&lt;/p&gt;
&lt;p&gt;This can easily be done with built in shell functions. To quickly rename a bunch of file endings from say for example &lt;code&gt;*.markdown&lt;/code&gt; to &lt;code&gt;*.md&lt;/code&gt; you simply can execute the following (&lt;code&gt;bash&lt;/code&gt;)&amp;nbsp;command.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; i in *.markdown&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt; mv &lt;span class="nv"&gt;$i&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;i&lt;/span&gt;&lt;span class="p"&gt;%.markdown&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;.md&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Shell"></category><category term="Bash"></category></entry><entry><title>Setup A Local DNS Server For Development</title><link href="https://datapile.coffeecrew.org/setup-a-local-dns-server-for-development" rel="alternate"></link><published>2015-11-22T18:02:00+01:00</published><updated>2015-11-22T18:02:00+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2015-11-22:/setup-a-local-dns-server-for-development</id><summary type="html">&lt;p class="first last"&gt;How to set up a local &lt;span class="caps"&gt;DNS&lt;/span&gt; server for&amp;nbsp;Development.&lt;/p&gt;
</summary><content type="html">&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;This was implemented and tested with Mac &lt;span class="caps"&gt;OS&lt;/span&gt; 10.10.4 and Dnsmasq&amp;nbsp;2.75&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;When you develop a web site or when you want to address multiple virtual machines by name on your local machine, you need to find a solution to implement&amp;nbsp;this.&lt;/p&gt;
&lt;p&gt;You can either input all your host names into your local &lt;code&gt;/etc/resolv.conf&lt;/code&gt; which may not result in a managable scenario after some time, or you can just install &lt;code&gt;Dnsmasq&lt;/code&gt; which is a local &lt;span class="caps"&gt;DNS&lt;/span&gt; responder that allows you to manage your own custom domain or extend the dns domain name space of another&amp;nbsp;service.&lt;/p&gt;
&lt;p&gt;You can install &lt;code&gt;Dnsmasq&lt;/code&gt; from &lt;code&gt;ports&lt;/code&gt; or probably &lt;code&gt;homebrew&lt;/code&gt; if you&amp;#8217;re on a Mac or get it from your local packet manager on your favourite Linux&amp;nbsp;distribution.&lt;/p&gt;
&lt;p&gt;After the installation just make sure that you are pointing you operating systems &lt;span class="caps"&gt;DNS&lt;/span&gt; resolution to your local host&amp;nbsp;instance.&lt;/p&gt;
&lt;p&gt;To resolve the usual internet domains via dnsmasq as well be sure to include your official &lt;span class="caps"&gt;DNS&lt;/span&gt; server in the&amp;nbsp;configration.&lt;/p&gt;
&lt;p&gt;The Dnsmasq configuration file can be found at &lt;code&gt;/opt/local/etc/dnsmasq.conf&lt;/code&gt; if you installed from ports. My configuration file is somewhat along these&amp;nbsp;lines.&lt;/p&gt;
&lt;p&gt;You probably want to use sudo to change this file for editing like for example so &lt;code&gt;sudo vim /opt/local/etc/dnsmasq.conf&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;resolv-file=/etc/resolv.conf
# My local IP address
server=192.168.221.1
# Both are googles DNS servers
server=8.8.8.8
server=8.8.4.4

# here go the IP addresses you want to remap or setup as new
address=/alpha1.cluster.local.domain/172.16.232.135
address=/red.alpha1.cluster.local.domain/172.16.232.141
address=/black.alpha1.cluster.local.domain/172.16.232.141
address=/green.alpha2.cluster.local.domain/172.16.232.132
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After you have changed the configuration you probably want to flush the &lt;span class="caps"&gt;DNS&lt;/span&gt; cache and reload the service by issuing the following&amp;nbsp;commands:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;sudo port unload dnsmasq &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
sudo killall -HUP mDNSResponder &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
sudo port load dnsmasq
&lt;/pre&gt;&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="DNS"></category></entry><entry><title>Have a ReST Endpoint Catch All</title><link href="https://datapile.coffeecrew.org/have-a-rest-endpoint-catch-all" rel="alternate"></link><published>2015-11-22T17:44:25+01:00</published><updated>2015-11-22T17:44:25+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2015-11-22:/have-a-rest-endpoint-catch-all</id><summary type="html">&lt;p class="first last"&gt;How to handle unspecific calls to a ReST&amp;nbsp;endpoint.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;If you need a ReST endpoint which returns kind of a default page when
a client accesses a unmapped path, you need an implementation like the
one shown&amp;nbsp;below.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Index.java&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@ApplicationScoped&lt;/span&gt; &lt;span class="nd"&gt;@Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="nd"&gt;@Produces&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MediaType&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TEXT_HTML&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Index&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

 &lt;span class="nd"&gt;@GET&lt;/span&gt; &lt;span class="nd"&gt;@Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/{any : .*}&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
 &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Response&lt;/span&gt; &lt;span class="nf"&gt;root&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Response&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ok&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;entity&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;!DOCTYPE html&amp;gt;\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;&amp;lt;html&amp;gt;\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;    &amp;lt;head&amp;gt;\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;        &amp;lt;title&amp;gt;Response&amp;lt;/title&amp;gt;\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
     &lt;span class="s"&gt;&amp;quot;    &amp;lt;/head&amp;gt;\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;    &amp;lt;body&amp;gt;\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
     &lt;span class="s"&gt;&amp;quot;        &amp;lt;h1&amp;gt;Catch All Response&amp;lt;/h1&amp;gt;\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;    &amp;lt;/body&amp;gt;\n&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;
     &lt;span class="s"&gt;&amp;quot;&amp;lt;/html&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;

 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
</content><category term="Programming"></category><category term="Java"></category><category term="ReST"></category></entry><entry><title>Accessing Basic Auth Protected Maven Repositories</title><link href="https://datapile.coffeecrew.org/accessing-basic-auth-protected-maven-repositories" rel="alternate"></link><published>2015-11-22T17:23:31+01:00</published><updated>2015-11-22T17:23:31+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2015-11-22:/accessing-basic-auth-protected-maven-repositories</id><summary type="html">&lt;p class="first last"&gt;How to access a basic auth protected maven&amp;nbsp;repository.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;When you try to access a basic auth protected maven repository you might actually already run into all sorts of weird errors, but now trying a basic auth protected maven repository during a Arquillian build when it is creating the&amp;nbsp;deployment.&lt;/p&gt;
&lt;p&gt;You migh have figured out the first part of accessing the maven repositoryis setting a &lt;code&gt;Authorization&lt;/code&gt; header and your configuration looks something like this (the encoded username is &lt;code&gt;test&lt;/code&gt; and the password is &lt;code&gt;s3cur3&lt;/code&gt;)&amp;nbsp;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;servers&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;server&amp;gt;&lt;/span&gt;
&lt;span class="c"&gt;&amp;lt;!-- Link this id here to the repo ID in the mirror section --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;id&amp;gt;&lt;/span&gt;repo&lt;span class="nt"&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;httpHeaders&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Authorization&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;value&amp;gt;&lt;/span&gt;Basic dGVzdDpzM2N1cjM=&lt;span class="nt"&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;/httpHeaders&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/server&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/servers&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;What you now just need to do on top of that is add the &lt;code&gt;username&lt;/code&gt; and &lt;code&gt;password&lt;/code&gt; to your &lt;code&gt;settings.xml&lt;/code&gt; configuration file like&amp;nbsp;so.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;servers&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;server&amp;gt;&lt;/span&gt;
&lt;span class="c"&gt;&amp;lt;!-- Link this id here to the repo ID in the mirror section --&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;id&amp;gt;&lt;/span&gt;repo&lt;span class="nt"&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;username&amp;gt;&lt;/span&gt;test&lt;span class="nt"&gt;&amp;lt;/username&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;password&amp;gt;&lt;/span&gt;s3cur3&lt;span class="nt"&gt;&amp;lt;/password&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;httpHeaders&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;property&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Authorization&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;value&amp;gt;&lt;/span&gt;Basic dGVzdDpzM2N1cjM=&lt;span class="nt"&gt;&amp;lt;/value&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/property&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;/httpHeaders&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/server&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/servers&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Get the &lt;a class="reference external" href="https://gist.github.com/anonymous/bc3a2bc73d66ecb2a9f163a99618cdcd"&gt;Gist here&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;You especially need add values for these two if you run into the following&amp;nbsp;exception.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RuntimeException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Could&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;invoke&lt;/span&gt; &lt;span class="n"&gt;deployment&lt;/span&gt; &lt;span class="n"&gt;method&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;jboss&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;shrinkwrap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;api&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Archive&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;coffeecrew&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Test&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;createDeployment&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultArtifactResolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolve&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultArtifactResolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;459&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultArtifactResolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolveArtifacts&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultArtifactResolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;262&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultArtifactResolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolveArtifact&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultArtifactResolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;239&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;repository&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultArtifactDescriptorReader&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;loadPom&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultArtifactDescriptorReader&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;320&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;repository&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultArtifactDescriptorReader&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;readArtifactDescriptor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultArtifactDescriptorReader&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;217&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultDependencyCollector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultDependencyCollector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;461&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultDependencyCollector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultDependencyCollector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;573&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultDependencyCollector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;collectDependencies&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultDependencyCollector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;261&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;internal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DefaultRepositorySystem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolveDependencies&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultRepositorySystem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;342&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;jboss&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;shrinkwrap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bootstrap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MavenRepositorySystem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolveDependencies&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MavenRepositorySystem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;120&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;jboss&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;shrinkwrap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MavenWorkingSessionImpl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolveDependencies&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MavenWorkingSessionImpl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;266&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;jboss&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;shrinkwrap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MavenStrategyStageBaseImpl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;using&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MavenStrategyStageBaseImpl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;71&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;jboss&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;shrinkwrap&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolver&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MavenStrategyStageBaseImpl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;using&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MavenStrategyStageBaseImpl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Caused&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;transfer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ArtifactTransferException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Could&lt;/span&gt; &lt;span class="n"&gt;not&lt;/span&gt; &lt;span class="n"&gt;transfer&lt;/span&gt; &lt;span class="n"&gt;artifact&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;slf4j&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;slf4j&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;log4j12&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;pom&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mf"&gt;1.4.3&lt;/span&gt; &lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="nf"&gt;repo&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//repo.protected.example.com/content/groups/internal/): Access denied to: https://repo.protected.example.com/content/groups/internal/org/slf4j/slf4j-log4j12/1.4.3/slf4j-log4j12-1.4.3.pom&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;connector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;WagonRepositoryConnector$6&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wrap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WagonRepositoryConnector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1016&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;connector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;WagonRepositoryConnector$6&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wrap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WagonRepositoryConnector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1004&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;connector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;WagonRepositoryConnector$GetTask&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WagonRepositoryConnector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;725&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;concurrency&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RunnableErrorForwarder$1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RunnableErrorForwarder&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;67&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;concurrent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;runWorker&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1142&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;concurrent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ThreadPoolExecutor$Worker&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;617&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;745&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;Caused&lt;/span&gt; &lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;authorization&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;AuthorizationException&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Access&lt;/span&gt; &lt;span class="n"&gt;denied&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;https&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="c1"&gt;//repo.protected.example.com/content/groups/internal/org/slf4j/slf4j-log4j12/1.4.3/slf4j-log4j12-1.4.3.pom&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;providers&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;http&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LightweightHttpWagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fillInputData&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LightweightHttpWagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;144&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;StreamWagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getInputStream&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;StreamWagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;116&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;StreamWagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getIfNewer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;StreamWagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;88&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;apache&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;maven&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;StreamWagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;StreamWagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;61&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;connector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;wagon&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;WagonRepositoryConnector$GetTask&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;WagonRepositoryConnector&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;660&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;org&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;eclipse&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aether&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;concurrency&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RunnableErrorForwarder$1&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RunnableErrorForwarder&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;67&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;concurrent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;runWorker&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1142&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;util&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;concurrent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ThreadPoolExecutor$Worker&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ThreadPoolExecutor&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;617&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;at&lt;/span&gt; &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;java&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;745&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Arquillian"></category><category term="Testing"></category></entry><entry><title>Checklists in LaTeX</title><link href="https://datapile.coffeecrew.org/checklists-in-latex" rel="alternate"></link><published>2015-09-24T23:40:27+02:00</published><updated>2015-09-24T23:40:27+02:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2015-09-24:/checklists-in-latex</id><summary type="html">&lt;p class="first last"&gt;How to create a checkbox in&amp;nbsp;LaTeX?&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Did you ever feel the need for a simple checkbox in a letter? So did I. After searching for a while I did not really come up with a simple copy and pasteable solution to this problem. Most solutions seem to prefer the &lt;code&gt;hyperref&lt;/code&gt; package which enables you to put interactive, clickable checkboxes inside your &lt;span class="caps"&gt;PDF&lt;/span&gt; document, but what if you actually need to physically send the&amp;nbsp;document?&lt;/p&gt;
&lt;p&gt;As it turns out the solution is actually not that hard, a few &lt;code&gt;mbox&lt;/code&gt;es and &lt;code&gt;adjustbox&lt;/code&gt;es later I had a solution that did the trick for&amp;nbsp;me.&lt;/p&gt;
&lt;p&gt;At the very basic of the box is this block which actually creates the box &lt;em&gt;and&lt;/em&gt; centers the text behind it in the middle of the&amp;nbsp;box.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;\mbox&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;&lt;span class="k"&gt;\adjustbox&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;stack=cc,fbox&lt;span class="nb"&gt;}{&lt;/span&gt;&lt;span class="k"&gt;\makebox&lt;/span&gt;(6,6)&lt;span class="nb"&gt;{}}&lt;/span&gt; Yes I will.&lt;span class="nb"&gt;}&lt;/span&gt;&lt;span class="k"&gt;\\&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The parameters of the &lt;code&gt;makebox&lt;/code&gt; command define how big the box to check will actually&amp;nbsp;be.&lt;/p&gt;
&lt;p&gt;If you want to add a place where the future checkbox checker can put his signature to sign that he checked one of the checkboxes, you can additionally put something like this into your page, which will render the supplied text and a slightly subscript&amp;nbsp;line.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;\mbox&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;&lt;span class="k"&gt;\begin&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;minipage&lt;span class="nb"&gt;}&lt;/span&gt;[t]&lt;span class="nb"&gt;{&lt;/span&gt;18ex&lt;span class="nb"&gt;}&lt;/span&gt;
     Date and signature
   &lt;span class="k"&gt;\end&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;minipage&lt;span class="nb"&gt;}&lt;/span&gt;
   &lt;span class="k"&gt;\hspace&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;1ex&lt;span class="nb"&gt;}&lt;/span&gt;&lt;span class="k"&gt;\rule&lt;/span&gt;&lt;span class="na"&gt;[-3ex]&lt;/span&gt;&lt;span class="nb"&gt;{&lt;/span&gt;12cm&lt;span class="nb"&gt;}{&lt;/span&gt;.5pt&lt;span class="nb"&gt;}}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Where the value &lt;code&gt;18ex&lt;/code&gt; of the &lt;code&gt;minipage&lt;/code&gt; environment controls the width of the box before the line. The parameters of the &lt;code&gt;rule&lt;/code&gt; command are the position of the line (&lt;code&gt;-3ex&lt;/code&gt;) (which makes it subscript, if you want that superscript make this value positive), the length of the rule (&lt;code&gt;12cm&lt;/code&gt;) and the thickness of it (&lt;code&gt;.5pt&lt;/code&gt;)&lt;/p&gt;
&lt;p&gt;So if you pimp this a little bit the code for a full letter with checkboxes looks like &lt;a class="reference external" href="https://datapile.coffeecrew.org/downloads/checkbox-letter.tex"&gt;this&lt;/a&gt;.&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="LaTeX"></category></entry><entry><title>Reading the Conversation ID From Another Parameter</title><link href="https://datapile.coffeecrew.org/reading-the-conversation-id-from-another-parameter" rel="alternate"></link><published>2015-09-16T11:21:00+02:00</published><updated>2015-09-16T11:21:00+02:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2015-09-16:/reading-the-conversation-id-from-another-parameter</id><summary type="html">&lt;p class="first last"&gt;How to read the &lt;span class="caps"&gt;JSF&lt;/span&gt; conversation &lt;span class="caps"&gt;ID&lt;/span&gt; from another parameter than&amp;nbsp;cid.&lt;/p&gt;
</summary><content type="html">&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;This was tested with Wildfly 10.0.0.Final, Mojarra 2.2.12 and Java &lt;span class="caps"&gt;JDK&lt;/span&gt;&amp;nbsp;1.8.0_51&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;When you are working with a &lt;code&gt;&amp;#64;ConversationScoped&lt;/code&gt; bean you may want to read &lt;span class="caps"&gt;JSF&lt;/span&gt;&amp;#8217;s conversation &lt;span class="caps"&gt;ID&lt;/span&gt; (&lt;code&gt;cid&lt;/code&gt;) from another request parameter such as for example a parameter named &lt;code&gt;state&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;At first I tried to find a configuration option to change this behaviour, but failed to find one. In the end the problem can be solved using the &lt;code&gt;org.jboss.weld.context.http.HttpConversationContext&lt;/code&gt; class from the Weld &lt;span class="caps"&gt;CDI&lt;/span&gt; implementation if you don&amp;#8217;t mind being a little implementation&amp;nbsp;dependent.&lt;/p&gt;
&lt;p&gt;This class allows you to activate a specific context &lt;span class="caps"&gt;ID&lt;/span&gt; or &lt;code&gt;cid&lt;/code&gt; so you have access to your &lt;em&gt;normal&lt;/em&gt; &lt;code&gt;&amp;#64;ConversationScoped&lt;/code&gt; beans. The only pitfall here to remember is that you have to call &lt;code&gt;deactivate()&lt;/code&gt; first or you may end up with some kind of a &lt;em&gt;Context is already active&lt;/em&gt;&amp;nbsp;Exception.&lt;/p&gt;
&lt;p&gt;Well you basically do this in your &lt;code&gt;&amp;#64;PostConstruct&lt;/code&gt; method.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;RemapCID.java&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@PostConstruct&lt;/span&gt;
 &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;init&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletRequest&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HttpServletRequest&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;FacesContext&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getCurrentInstance&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getExternalContext&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getRequest&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

     &lt;span class="c1"&gt;// This basically makes the state parameter the conversation id&lt;/span&gt;
     &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;state&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;httpConversationContext&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;deactivate&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
     &lt;span class="n"&gt;httpConversationContext&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;activate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
 &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;I admit this is a pretty pragmatic solution, but it seems to work. Maybe the &lt;code&gt;&amp;#64;ConversationScoped&lt;/code&gt; needs to let you specify the parameters to read it&amp;#8217;s &lt;span class="caps"&gt;ID&lt;/span&gt;&amp;nbsp;from.&lt;/p&gt;
&lt;p&gt;Hope this helps, until next&amp;nbsp;time.&lt;/p&gt;
</content><category term="Programming"></category><category term="Java"></category><category term="JSF"></category><category term="CDI"></category></entry><entry><title>Pro Tools - Playlists</title><link href="https://datapile.coffeecrew.org/pro-tools-playlists" rel="alternate"></link><published>2015-09-03T19:36:55+02:00</published><updated>2015-09-03T19:36:55+02:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2015-09-03:/pro-tools-playlists</id><summary type="html">&lt;p class="first last"&gt;How to start a local consul&amp;nbsp;server.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;When working with Pro Tools you may find yourself in a position where you need to create a few takes of for example a chorus. Instead of creating a completely new track for every take you do, you can simply create what is called a playlist in Pro&amp;nbsp;Tools.&lt;/p&gt;
&lt;div class="section" id="shortcut"&gt;
&lt;h2&gt;Shortcut&lt;/h2&gt;
&lt;p&gt;You can create a playlist using the right control key and the backslash symbol like &lt;code&gt;RCTRL - \ &lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There is also another shortcut assigned if you may not have remapped it in &lt;span class="caps"&gt;OS&lt;/span&gt; X or it may be mapped to something else by default. That shortcut would be &lt;code&gt;LCMD - LALT - LSHIFT - \ &lt;/code&gt; where the letter &lt;code&gt;L&lt;/code&gt; denotes the keys on the left side of the keyboard are&amp;nbsp;pressed.&lt;/p&gt;
&lt;/div&gt;
</content><category term="Music"></category><category term="Pro Tools"></category><category term="Cheat Sheet"></category><category term="Shortcuts"></category></entry><entry><title>Creating A Simple Plugin Mechanism In Java</title><link href="https://datapile.coffeecrew.org/creating-a-simple-plugin-mechanism-in-java" rel="alternate"></link><published>2013-06-02T16:36:18+01:00</published><updated>2013-06-02T16:36:18+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2013-06-02:/creating-a-simple-plugin-mechanism-in-java</id><summary type="html">&lt;p class="first last"&gt;This article shows how to create a simple plugin mechanism in&amp;nbsp;Java.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Our goal is to create a simple plugin mechanism in Java. On top of that we want our execution environment to be divided into three
distinct phases. These phases are&amp;nbsp;named:&lt;/p&gt;
&lt;ol class="arabic simple"&gt;
&lt;li&gt;PRE_PROCESS&lt;/li&gt;
&lt;li&gt;&lt;span class="caps"&gt;PROCESS&lt;/span&gt;&lt;/li&gt;
&lt;li&gt;POST_PROCESS&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;This will allow us to run certain plugins at specific phases during program execution. So if a plugin is for example registered on the &lt;code&gt;PRE_PROCESS&lt;/code&gt; hook, we can - and must - guarantee that this plugin will be executed before the &lt;code&gt;PROCESS&lt;/code&gt; phase.&lt;/p&gt;
&lt;p&gt;After we’ve laid out the basic requirements now, the question is: “How do we implement&amp;nbsp;that?”.&lt;/p&gt;
&lt;p&gt;The first thing that probably comes to mind when talking about a plugin mechanism is the standard &lt;a class="reference external" href="http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html"&gt;Java ServiceLoader&lt;/a&gt; that was officially opened with the &lt;span class="caps"&gt;JDK6&lt;/span&gt; and has been in there since the &lt;span class="caps"&gt;JDK&lt;/span&gt; 1.3 days. Another mechanism that can be used to implement a system like this is the Netbeans Lookup &lt;span class="caps"&gt;API&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;After defining a basic interface for the plugins we want to create, we’ll have a look at both mechanisms to see how they&amp;nbsp;compare.&lt;/p&gt;
&lt;div class="section" id="create-domain-objects"&gt;
&lt;h2&gt;Create Domain&amp;nbsp;Objects&lt;/h2&gt;
&lt;p id="id1"&gt;Ok, so let’s start defining the actual &lt;code&gt;Plugin&lt;/code&gt; interface so we have a common hook to execute our plugins&amp;nbsp;on.&lt;/p&gt;
&lt;p&gt;We make the interface itself very easy and just define a process method in which we’ll later have implementations append the actual phase and class name to the &lt;code&gt;String&lt;/code&gt; instance that was passed as a parameter. We’ll return that &lt;code&gt;String&lt;/code&gt; to the caller, so we can subsequently use it and demonstrate very easily when and where the plugin was&amp;nbsp;executed.&lt;/p&gt;
&lt;p&gt;The interface we want to implement looks like&amp;nbsp;this:&lt;/p&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**
 Simple plugin interface.
 &amp;lt;p/&amp;gt;
 &amp;#64;author Jens Frey
 */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Plugin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="cm"&gt;/**
     Simple worker method that will append data on the processingToken.
     &amp;lt;p/&amp;gt;
     And another.
     &amp;lt;p/&amp;gt;
     &amp;#64;param processingToken Token where data should be appended during
                            processing.
     &amp;lt;p/&amp;gt;
     &amp;#64;return processingToken that has been worked on.
     */&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;As a next step we define three interfaces that act as marker interfaces so we can differentiate the lifecycle phase the plugin should be run in by the name of the implemented interface. These interfaces are defined as shown&amp;nbsp;below.&lt;/p&gt;
&lt;p&gt;For the &lt;code&gt;PRE_PROCESS&lt;/code&gt; phase:&lt;/p&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**
 Marker Interface to tell this is a plugin running in the PRE_PROCESS phase.
 */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;PreProcessable&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Plugin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;For the &lt;code&gt;PROCESS&lt;/code&gt; phase:&lt;/p&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**
 Marker Interface to tell this is a plugin running in the PROCESS phase.
 */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;Processable&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Plugin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;For the &lt;code&gt;POST_PROCESS&lt;/code&gt; phase:&lt;/p&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/**
 Marker Interface to tell this is a plugin running in the POST_PROCESS phase.
 */&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;PostProcessable&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Plugin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Now that we’ve defined the interfaces we need some implementations that actually do something. At first we implement a plugin that should be run in the &lt;code&gt;PRE_PROCESS&lt;/code&gt; phase. It looks&amp;nbsp;like:&lt;/p&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PreProcessPlugin&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;PreProcessable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[PRE_PROCESS] &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;The following implementations are running on the main processing hook &lt;code&gt;PROCESS&lt;/code&gt; and look as&amp;nbsp;follows:&lt;/p&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ProcessPlugin&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[PROCESS] &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MoreProcessPlugin&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[PROCESS] &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;And finally some implementation for the &lt;code&gt;POST_PROCESS&lt;/code&gt; hook:&lt;/p&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PostProcessPlugin&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;PostProcessable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[POST_PROCESS] &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Now that was quite a bit of work, wasn’t it? But you’ll be shortly rewarded with a nice and pluggable system. Now all we need to be happy is a piece of code that actually runs all of these plugins. Since this code looks slightly different whether we use Java’s ServiceLoader mechanism directly or the Netbeans &lt;code&gt;Lookup&lt;/code&gt; all the bits ’n pieces required to make this work are outlined in separate sections shown&amp;nbsp;below.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="service-loader"&gt;
&lt;h2&gt;Service&amp;nbsp;Loader&lt;/h2&gt;
&lt;p&gt;So let’s first have a look at the ServiceLoader mechanism. To prepare implementations of a specific interface for automatic lookup by the ServiceLoader you need to create files in the &lt;code&gt;META-INF/services&lt;/code&gt; of your resulting &lt;span class="caps"&gt;JAR&lt;/span&gt; file. I will describe inclusion of that folder on a Maven based&amp;nbsp;project.&lt;/p&gt;
&lt;p&gt;In order to get the &lt;code&gt;META-INF/services&lt;/code&gt; folder into your maven output structure you have to create a folder named &lt;code&gt;resources&lt;/code&gt; under &lt;code&gt;src/main&lt;/code&gt;. Inside the created &lt;code&gt;resources&lt;/code&gt; folder you must place the folder &lt;code&gt;META-INF&lt;/code&gt; and underneath that the folder &lt;code&gt;services&lt;/code&gt; which Maven will copy when you launch the&amp;nbsp;build.&lt;/p&gt;
&lt;p&gt;As initially mentioned you need to put files inside the &lt;code&gt;services&lt;/code&gt; folder. These files must be named after the interface you want the automatic lookup mechanism to find implementations&amp;nbsp;for.&lt;/p&gt;
&lt;p&gt;The content of these files is the actual class name of every implementation you want the ServiceLoader to find. If you have multiple implementations of a interface you need to include every implementation class name inside that file delimited by a new&amp;nbsp;line.&lt;/p&gt;
&lt;p&gt;In our case these three files we need to create must be named (please ensure you choose the correct package name that prepends the interface&amp;nbsp;name):&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;code&gt;org.coffeecrew.tutorials.simplepluginmechanism.PreProcessable&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;org.coffeecrew.tutorials.simplepluginmechanism.Processable&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;org.coffeecrew.tutorials.simplepluginmechanism.PostProcessable&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These files must be filled with the following content (please ensure you choose the correct package name that prepends the implementation class&amp;nbsp;name).&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;org.coffeecrew.tutorials.simplepluginmechanism.PreProcessable&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code text first last literal-block"&gt;
org.coffeecrew.tutorials.simplepluginmechanism.PreProcessPlugin
&lt;/pre&gt;
&lt;/dd&gt;
&lt;dt&gt;org.coffeecrew.tutorials.simplepluginmechanism.Processable&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code text first last literal-block"&gt;
org.coffeecrew.tutorials.simplepluginmechanism.ProcessPlugin
org.coffeecrew.tutorials.simplepluginmechanism.MoreProcessPlugin
&lt;/pre&gt;
&lt;/dd&gt;
&lt;dt&gt;org.coffeecrew.tutorials.simplepluginmechanism.PostProcessable&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code text first last literal-block"&gt;
org.coffeecrew.tutorials.simplepluginmechanism.PostProcessPlugin
&lt;/pre&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Now we’ve hopefully prepared everything the ServiceLoader needs to do it’s job. All that’s missing now is a simple program that executes our plugin&amp;nbsp;mechanism.&lt;/p&gt;
&lt;div class="section" id="plugin-executor"&gt;
&lt;h3&gt;Plugin&amp;nbsp;Executor&lt;/h3&gt;
&lt;p&gt;A very simple implementation that will execute all plugins we have written with the ServiceLoader mechanism is quickly written. To guarantee the execution order of the plugins as we initially defined we must implement the code as shown&amp;nbsp;below.&lt;/p&gt;
&lt;pre class="code Java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.ServiceLoader&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SimplePluginExecutorServiceLoader&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ServiceLoader&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PreProcessable&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;preProcessables&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ServiceLoader&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PreProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;PreProcessable&lt;/span&gt; &lt;span class="n"&gt;preProcessable&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;preProcessables&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;preProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ServiceLoader&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Processable&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;processables&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ServiceLoader&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Processable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt; &lt;span class="n"&gt;processable&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;processables&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;processable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ServiceLoader&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;PostProcessable&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;postProcessables&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ServiceLoader&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PostProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;PostProcessable&lt;/span&gt; &lt;span class="n"&gt;postProcessable&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;postProcessables&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;postProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;As you can see the code is a pretty straight forward implementation. It runs through every implementation that is available for a given interface type and runs the &lt;code&gt;process()&lt;/code&gt; method on&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;If you did everything right you should now see some output similar&amp;nbsp;to:&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Sample&amp;nbsp;Output&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[PRE_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PreProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.ProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.MoreProcessPlugin
[POST_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PostProcessPlugin
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;As we can see from the output every phase was executed. Where we had two plugins available, both were run as well. This fulfills our basic&amp;nbsp;requirements.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="netbeans-lookup"&gt;
&lt;h2&gt;Netbeans&amp;nbsp;Lookup&lt;/h2&gt;
&lt;p&gt;By utilizing the Lookup library you can very easily achieve loose coupling, as you can with the ServiceLoader described above. On top of that you get some nice annotations and the ability to give your service implementation a certain priority when it should be&amp;nbsp;run.&lt;/p&gt;
&lt;p&gt;Now let’s have a look at the &lt;a class="reference external" href="http://bits.netbeans.org/dev/javadoc/org-openide-util-lookup/org/openide/util/lookup/doc-files/lookup-api.html"&gt;Netbeans Lookup &lt;span class="caps"&gt;API&lt;/span&gt;&lt;/a&gt; and see what’s the difference to the&amp;nbsp;ServiceLoader.&lt;/p&gt;
&lt;p&gt;Well, the obvious first difference is that you need to include a additional library in your project. That library, which was initially strongly coupled to the Netbeans platform itself, was over time separated from the platform so it can be used in applications that are not based on the Netbeans platform and is available as a separate Maven dependency these&amp;nbsp;days.&lt;/p&gt;
&lt;p&gt;For the dependency resolution to work you need to include the Netbeans repository in your &lt;code&gt;pom.xml&lt;/code&gt; so you’re able to get a hold of the library as this library is not available in one of the well know central repositories as for example &lt;a class="reference external" href="http://repo.maven.apache.org"&gt;The Central Repository&lt;/a&gt;. There is a &lt;a class="reference external" href="https://netbeans.org/bugzilla/show_bug.cgi?id=202041"&gt;discussion&lt;/a&gt; going on about this which may or may not lead to a centrally available dependency in the&amp;nbsp;future.&lt;/p&gt;
&lt;p&gt;You can however reference the library by appending the following information into your projects &lt;code&gt;pom.xml&lt;/code&gt; file.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Netbeans Lookup Maven&amp;nbsp;Dependencies&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;repositories&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;repository&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;id&amp;gt;&lt;/span&gt;Netbeans Repository&lt;span class="nt"&gt;&amp;lt;/id&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;url&amp;gt;&lt;/span&gt;http://bits.netbeans.org/maven2/&lt;span class="nt"&gt;&amp;lt;/url&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;/repository&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/repositories&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.netbeans.api&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;org-openide-util-lookup&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;RELEASE73&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
   &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Don’t forget to execute a build of your project, so maven can download the newly added dependency for&amp;nbsp;you.&lt;/p&gt;
&lt;p&gt;If you’re still working on the initial project where we’ve used the ServiceLoader mechanism please make sure you delete the &lt;code&gt;resources&lt;/code&gt; folder now, you don’t need it in conjunction with the Lookup &lt;span class="caps"&gt;API&lt;/span&gt;.&lt;/p&gt;
&lt;p&gt;For the Lookup &lt;span class="caps"&gt;API&lt;/span&gt; to work you need to add annotations to your domain objects. These annotations will create the files with the interface name and fill their content with the class names that provide an implementation for that&amp;nbsp;interface.&lt;/p&gt;
&lt;p&gt;This probably sounds more difficult than it actually is now, but it’s actually a trivial thing to do. You simply need to add a little &lt;code&gt;&amp;#64;ServiceProvider&lt;/code&gt; annotation in front of your class&amp;nbsp;name.&lt;/p&gt;
&lt;p&gt;To make this as simple as possible I print the four classes again, their content is the same as outlined in the &lt;a class="reference external" href="https://datapile.coffeecrew.org/creating-a-simple-plugin-mechanism-in-java#create-domain-objects"&gt;Create Domain Objects&lt;/a&gt; section, just with the added&amp;nbsp;annotation.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;PreProcessPlugin.java&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code Java first last literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.openide.util.lookup.ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nd"&gt;&amp;#64;ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;PreProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PreProcessPlugin&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;PreProcessable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[PRE_PROCESS] &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/dd&gt;
&lt;dt&gt;ProcessPlugin.java&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code Java first last literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.openide.util.lookup.ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nd"&gt;&amp;#64;ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;position&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ProcessPlugin&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[PROCESS] &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/dd&gt;
&lt;dt&gt;MoreProcessPlugin.java&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code Java first last literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.openide.util.lookup.ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nd"&gt;&amp;#64;ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;MoreProcessPlugin&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[PROCESS] &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/dd&gt;
&lt;dt&gt;PostProcessPlugin.java&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code Java first last literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.openide.util.lookup.ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="nd"&gt;&amp;#64;ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;PostProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PostProcessPlugin&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;PostProcessable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[POST_PROCESS] &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getClass&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Now that we’ve changed our domain object to utilize the annotations provided by the Lookup &lt;span class="caps"&gt;API&lt;/span&gt; we need an executor method to run our plugins in. All that changes compared to the ServiceLoader approach is the way you look up the implementations. It’s just a different &lt;span class="caps"&gt;API&lt;/span&gt;&amp;nbsp;call.&lt;/p&gt;
&lt;div class="section" id="id3"&gt;
&lt;h3&gt;Plugin&amp;nbsp;Executor&lt;/h3&gt;
&lt;p&gt;Again we’ll show a very simple implementation that will execute all plugins we have&amp;nbsp;written.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;SimplePluginExecutorLookupAPI.java&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code Java first last literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collection&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.openide.util.Lookup&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SimplePluginExecutorLookupAPI&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;PreProcessable&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;preProcessables&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Lookup&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDefault&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;lookupAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PreProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;PreProcessable&lt;/span&gt; &lt;span class="n"&gt;preProcessable&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;preProcessables&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;preProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;processables&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Lookup&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDefault&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;lookupAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Processable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt; &lt;span class="n"&gt;processable&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;processables&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;processable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;PostProcessable&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;postProcessables&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Lookup&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDefault&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;lookupAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PostProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;PostProcessable&lt;/span&gt; &lt;span class="n"&gt;postProcessable&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;postProcessables&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;postProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;As you can see this code is basically the same as with the ServiceLoader approach. It runs through every implementation that is available for a given interface type and runs the &lt;code&gt;process()&lt;/code&gt; method on&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;However, you might notice that the output slightly changed. With the Lookup &lt;span class="caps"&gt;API&lt;/span&gt; the &lt;code&gt;MoreProcessPlugin&lt;/code&gt; is executed before the &lt;code&gt;ProcessPlugin&lt;/code&gt;. This is something we may not want in case we care about the order in which these plugins need to run when they are executed within the same&amp;nbsp;phase.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Service Loader&amp;nbsp;Output&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[PRE_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PreProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.ProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.MoreProcessPlugin
[POST_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PostProcessPlugin
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;dt&gt;Lookup &lt;span class="caps"&gt;API&lt;/span&gt;&amp;nbsp;Output&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[PRE_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PreProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.MoreProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.ProcessPlugin
[POST_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PostProcessPlugin
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Luckily there s a mechanism which allows you to control exactly that behavior. And it’s built in right into the Lookup &lt;span class="caps"&gt;API&lt;/span&gt;. The &lt;code&gt;&amp;#64;ServiceProvider&lt;/code&gt; annotation let’s you set a position attribute. This position attribute defines when this implementation should be run, if another implementation is also available. The higher the position number is, the earlier the implementation is&amp;nbsp;run.&lt;/p&gt;
&lt;p&gt;Since the default position value is 0 it is sufficient to assign a value only to the &lt;code&gt;ProcessPlugin&lt;/code&gt; implementation. Changing the &lt;code&gt;&amp;#64;ServiceProvider&lt;/code&gt; line in the &lt;code&gt;ProcessPlugin&lt;/code&gt; to&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nd"&gt;@ServiceProvider&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;service&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Processable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;position&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Will result in the following output which reflects the actual processing order of the ServiceLoader&amp;nbsp;example.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="comparison"&gt;
&lt;h2&gt;Comparison&lt;/h2&gt;
&lt;p&gt;As you could see the Lookup &lt;span class="caps"&gt;API&lt;/span&gt; simplifies work by generating the files you’d normally have to create in &lt;code&gt;META-INF/services&lt;/code&gt; manually. By the generative approach and the position attribute you can also guarantee a specific execution order without the hassle to manually reorder the content of the files in &lt;code&gt;META-INF/services&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The Lookup &lt;span class="caps"&gt;API&lt;/span&gt; offers much more advanced features aside from the ones that were mentioned here, like for example Lookup templates that allow you to query information on an object without instantiating it or listening to changes in a Lookup. You could also lookup different implementations for a service based on it’s &lt;span class="caps"&gt;MIME&lt;/span&gt;&amp;nbsp;type.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="one-more-thing"&gt;
&lt;h2&gt;One More&amp;nbsp;Thing&lt;/h2&gt;
&lt;p&gt;Now I have actually one more thing I want to share with you. This approach works for both previously introduced plugin mechanisms, but will be included in the Lookup &lt;span class="caps"&gt;API&lt;/span&gt; example&amp;nbsp;only.&lt;/p&gt;
&lt;p&gt;It allows you to add or remove processing phases without having to rewrite all your processing code. This can simply be achieved by assigning the interface classes to an enumeration type. So let’s first implement the enumeration type that ties together the processing phase and the interface assigned to&amp;nbsp;it.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Phase.java&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code Java first last literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Phase&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

&lt;span class="c1"&gt;//    PRE_PROCESS(PreProcessable.class),
&lt;/span&gt;    &lt;span class="n"&gt;PROCESS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Processable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;POST_PROCESS&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PostProcessable&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Plugin&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="nf"&gt;Phase&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Plugin&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;plugin&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Plugin&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;getPhaseInterface&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;As you can see the implementation is fairly trivial, yet effective. Now all we need is an adapted executor for this to work. An implementation that utilizes the new idea looks as&amp;nbsp;follows:&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;SimplePhaseExecutor.java&lt;/dt&gt;
&lt;dd&gt;&lt;pre class="code Java first last literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.tutorials.simplepluginmechanism&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collection&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.openide.util.Lookup&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SimplePhaseExecutor&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Phase&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Phase&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Plugin&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;processables&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Lookup&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDefault&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="na"&gt;lookupAll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getPhaseInterface&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Plugin&lt;/span&gt; &lt;span class="n"&gt;plugin&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;processables&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;processingToken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;plugin&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;process&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processingToken&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Execution of the above code will result in the following&amp;nbsp;output:&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Lookup &lt;span class="caps"&gt;API&lt;/span&gt;&amp;nbsp;Output&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[PRE_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PreProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.ProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.MoreProcessPlugin
[POST_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PostProcessPlugin
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;Which is what we have expected it to do. The cool part however is - if you need to change the execution order of the phases, add a new phase, or delete a phase - you do not need to change the executor code but only the order or number of elements in the &lt;code&gt;Phase&lt;/code&gt; enumeration.&lt;/p&gt;
&lt;p&gt;So should you decide to no longer include the &lt;code&gt;PRE_PROCESS&lt;/code&gt; phase anymore you just need to remove the phase from the enumeration type, re-run the example&amp;nbsp;aaaand:&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Output - PRE_PROCESS Phase&amp;nbsp;Removed&lt;/dt&gt;
&lt;dd&gt;&lt;div class="first last"&gt;&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.ProcessPlugin
[PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.MoreProcessPlugin
[POST_PROCESS] org.coffeecrew.tutorials.simplepluginmechanism.PostProcessPlugin
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;&lt;/dd&gt;
&lt;/dl&gt;
&lt;p&gt;There you go, no more annoying &lt;code&gt;PRE_PROCESSING&lt;/code&gt;, just as expected&amp;nbsp;:)&lt;/p&gt;
&lt;p&gt;If you like you can clone the two projects from&amp;nbsp;Github:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/authsec/examples/tree/master/java/SimplePluginMechanismServiceLoader"&gt;ServiceLoader&amp;nbsp;Version&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://github.com/authsec/examples/tree/master/java/SimplePluginMechanismLookupAPI"&gt;LookupAPI&amp;nbsp;Version&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Hope you enjoyed the post! Leave comments, like ’n&amp;nbsp;share!&lt;/p&gt;
&lt;/div&gt;
</content><category term="Programming"></category><category term="Java"></category><category term="Lookup API"></category><category term="Service Loader"></category></entry><entry><title>Grenade - Cover Version</title><link href="https://datapile.coffeecrew.org/grenade-cover-version" rel="alternate"></link><published>2011-12-31T12:34:56+01:00</published><updated>2011-12-31T12:34:56+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2011-12-31:/grenade-cover-version</id><summary type="html">&lt;p class="first last"&gt;Just listen&amp;nbsp;&amp;#8230;&lt;/p&gt;
</summary><content type="html">&lt;p&gt;For the first time ever I am on YouTube! So feel free to check out the cover version of Bruno Mars&amp;#8217; song&amp;nbsp;&amp;#8220;Grenade&amp;#8221;.&lt;/p&gt;
&lt;iframe width="560" height="315" src="https://www.youtube.com/embed/RXEA6_zJXLk" frameborder="0" allowfullscreen&gt;&lt;/iframe&gt;&lt;p&gt;Hope you enjoy&amp;nbsp;it!&lt;/p&gt;
</content><category term="Music"></category><category term="Song"></category><category term="Cover Version"></category></entry><entry><title>Unser Lied</title><link href="https://datapile.coffeecrew.org/unser-lied" rel="alternate"></link><published>2011-09-25T14:00:34+01:00</published><updated>2011-09-25T14:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2011-09-25:/unser-lied</id><summary type="html">&lt;p class="first last"&gt;Just Listen&amp;nbsp;&amp;#8230;&lt;/p&gt;
</summary><content type="html">&lt;p&gt;&lt;strong&gt;Deutsch&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Dieses Lied hab ich für die Hochzeit zwischen Ilka und Alexander geschrieben. Ich hoffe beide werden eine lange Zeit Freude an diesem Lied&amp;nbsp;haben.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;English&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I wrote this song for the wedding between Ilka and Alexander. I very much hope they both enjoy the title for a long&amp;nbsp;time.&lt;/p&gt;
&lt;div class="section" id="the-song"&gt;
&lt;h2&gt;The&amp;nbsp;Song&lt;/h2&gt;
&lt;iframe width="100%" height="300" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/24129103&amp;color=%23ff5500&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;show_teaser=true&amp;visual=true"&gt;&lt;/iframe&gt;&lt;div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"&gt;&lt;a href="https://soundcloud.com/john-c-flow" title="John C. Flow" target="_blank" style="color: #cccccc; text-decoration: none;"&gt;John C. Flow&lt;/a&gt; · &lt;a href="https://soundcloud.com/john-c-flow/unser-lied" title="Unser Lied" target="_blank" style="color: #cccccc; text-decoration: none;"&gt;Unser Lied&lt;/a&gt;&lt;/div&gt;&lt;p&gt;Can be found at: &lt;a class="reference external" href="https://soundcloud.com/john-c-flow/unser-lied"&gt;https://soundcloud.com/john-c-flow/unser-lied&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-lyrics"&gt;
&lt;h2&gt;The&amp;nbsp;Lyrics&lt;/h2&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Words &lt;span class="amp"&gt;&amp;amp;&lt;/span&gt; Music: Jens Frey&lt;/div&gt;
&lt;div class="line"&gt;Tempo: 83 &lt;span class="caps"&gt;BPM&lt;/span&gt;&lt;/div&gt;
&lt;div class="line"&gt;Key: D&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="verse"&gt;
&lt;h3&gt;Verse&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[D]Komm her,&lt;/div&gt;
&lt;div class="line"&gt;Halt mich [A]fest,&lt;/div&gt;
&lt;div class="line"&gt;Nimm [Hm]mich in Deine Arme,&lt;/div&gt;
&lt;div class="line"&gt;[G]Hier und [Gm]jetzt.&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Ich [A]will Dich [D]fühln,&lt;/div&gt;
&lt;div class="line"&gt;ganz nah bei [A]mir,&lt;/div&gt;
&lt;div class="line"&gt;Will [Hm]deinen Atem spürn,&lt;/div&gt;
&lt;div class="line"&gt;Der mich [G]wärmt,&lt;/div&gt;
&lt;div class="line"&gt;so dass ich nicht [Gm]frier.&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Ich will Dich [D]halten,&lt;/div&gt;
&lt;div class="line"&gt;für [A]immer in meinem Arm,&lt;/div&gt;
&lt;div class="line"&gt;könnt auf [Hm]ewig mit Dir tanzen,&lt;/div&gt;
&lt;div class="line"&gt;doch die Mu[G]sik ist nicht mehr [Gm]an.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="bridge"&gt;
&lt;h3&gt;Bridge&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[Em]Ich schalt das [D]Radio ein,&lt;/div&gt;
&lt;div class="line"&gt;Ich [Em]dreh voll [D]auf,&lt;/div&gt;
&lt;div class="line"&gt;[Em]Spürst du den [D]Beat?&lt;/div&gt;
&lt;div class="line"&gt;Komm [A]Tanz mit mir,&lt;/div&gt;
&lt;div class="line"&gt;denn&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="chorus"&gt;
&lt;h3&gt;Chorus&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Das unser [D]Lied,&lt;/div&gt;
&lt;div class="line"&gt;in dem die [A]Zeit nie entflieht,&lt;/div&gt;
&lt;div class="line"&gt;Hier ist [F#m]der Moment gefangen,&lt;/div&gt;
&lt;div class="line"&gt;In [G]dem wir uns ver-[Gm]liebt,&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Das ist unser [D]Lied,&lt;/div&gt;
&lt;div class="line"&gt;In dem uns [A]nichts passieren kann,&lt;/div&gt;
&lt;div class="line"&gt;Hier sind wir [Hm]beide unverwundbar,&lt;/div&gt;
&lt;div class="line"&gt;Hier ist [G]sichrer Hafen,&lt;/div&gt;
&lt;div class="line"&gt;[A]Sichres Ge[D]biet.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h3&gt;Verse&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[D]Ich will immerzu,&lt;/div&gt;
&lt;div class="line"&gt;in [A]Deiner Nähe sein,&lt;/div&gt;
&lt;div class="line"&gt;bin immer [Hm]mit Dir in Gedanken,&lt;/div&gt;
&lt;div class="line"&gt;e[G]gal wo ich [Gm]bin,&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Kann [A]einfach [D]nicht,&lt;/div&gt;
&lt;div class="line"&gt;ohne Deine [A]Liebe sein,&lt;/div&gt;
&lt;div class="line"&gt;Brauch sie [Hm]wie die Luft zum atmen,&lt;/div&gt;
&lt;div class="line"&gt;[G]lass mich nie al-[Gm]lein.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id2"&gt;
&lt;h3&gt;Bridge&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[Em]Ich schalt das [D]Radio ein,&lt;/div&gt;
&lt;div class="line"&gt;Ich [Em]dreh voll [D]auf,&lt;/div&gt;
&lt;div class="line"&gt;[Em]Spürst du den [D]Beat?&lt;/div&gt;
&lt;div class="line"&gt;Komm [A]Tanz mit mir,&lt;/div&gt;
&lt;div class="line"&gt;denn&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h3&gt;Chorus&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Das ist unser [D]Lied,&lt;/div&gt;
&lt;div class="line"&gt;in dem die [A]Zeit nie entflieht,&lt;/div&gt;
&lt;div class="line"&gt;Hier ist [F#m]der Moment gefangen,&lt;/div&gt;
&lt;div class="line"&gt;In [G]dem wir uns ver-[Gm]liebt,&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Das ist unser [D]Lied,&lt;/div&gt;
&lt;div class="line"&gt;In dem uns [A]nichts passieren kann,&lt;/div&gt;
&lt;div class="line"&gt;Hier sind wir [Hm]beide unverwundbar,&lt;/div&gt;
&lt;div class="line"&gt;Hier ist [A]sichrer Hafen,&lt;/div&gt;
&lt;div class="line"&gt;[A]Sichres Ge[D]biet.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="solo"&gt;
&lt;h3&gt;Solo&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[D/A/Hm/G/A D/A/Hm/A/A/D ]&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id4"&gt;
&lt;h3&gt;Chorus&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;Das ist unser [D]Lied,&lt;/div&gt;
&lt;div class="line"&gt;in dem die [A]Zeit nie entflieht,&lt;/div&gt;
&lt;div class="line"&gt;Hier ist [F#m]der Moment gefangen,&lt;/div&gt;
&lt;div class="line"&gt;In [G]dem wir uns ver-[Gm]liebt,&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;Das ist unser [D]Lied,&lt;/div&gt;
&lt;div class="line"&gt;In dem uns [A]nichts passieren kann,&lt;/div&gt;
&lt;div class="line"&gt;Hier sind wir [Hm]beide unverwundbar,&lt;/div&gt;
&lt;div class="line"&gt;Hier ist [G]sichrer Hafen,&lt;/div&gt;
&lt;div class="line"&gt;[A]Sichres Ge[D]biet.&lt;/div&gt;
&lt;div class="line"&gt;[G]Lass es uns nie ver-[A]gessen, unser [D]Lied&lt;/div&gt;
&lt;div class="line"&gt;[G]Lass es uns nie ver-[A]gessen, unser [D]Lied&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="Music"></category><category term="Original"></category><category term="Song"></category><category term="Lyrics"></category></entry><entry><title>Goondown</title><link href="https://datapile.coffeecrew.org/goondown" rel="alternate"></link><published>2011-02-17T14:00:34+01:00</published><updated>2011-02-17T14:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2011-02-17:/goondown</id><summary type="html">&lt;p class="first last"&gt;Just listen&amp;nbsp;&amp;#8230;&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Just playing around with the software, seems to be a mix between Trance and Easy Listening&amp;nbsp;&amp;#8230;&lt;/p&gt;
&lt;iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/10714605&amp;color=%23ff5500&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;show_teaser=true"&gt;&lt;/iframe&gt;&lt;div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"&gt;&lt;a href="https://soundcloud.com/john-c-flow" title="John C. Flow" target="_blank" style="color: #cccccc; text-decoration: none;"&gt;John C. Flow&lt;/a&gt; · &lt;a href="https://soundcloud.com/john-c-flow/goondown" title="Goondown" target="_blank" style="color: #cccccc; text-decoration: none;"&gt;Goondown&lt;/a&gt;&lt;/div&gt;&lt;p&gt;Can be found at: &lt;a class="reference external" href="https://soundcloud.com/john-c-flow/goondown"&gt;https://soundcloud.com/john-c-flow/goondown&lt;/a&gt;&lt;/p&gt;
</content><category term="Music"></category><category term="Original"></category><category term="Song"></category></entry><entry><title>Goodbye</title><link href="https://datapile.coffeecrew.org/goodbye" rel="alternate"></link><published>2011-01-30T14:00:34+01:00</published><updated>2011-01-30T14:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2011-01-30:/goodbye</id><summary type="html">&lt;p class="first last"&gt;Just listen&amp;nbsp;&amp;#8230;&lt;/p&gt;
</summary><content type="html">&lt;div class="section" id="the-song"&gt;
&lt;h2&gt;The&amp;nbsp;song&lt;/h2&gt;
&lt;iframe width="100%" height="166" scrolling="no" frameborder="no" allow="autoplay" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/tracks/9807219&amp;color=%23ff5500&amp;auto_play=false&amp;hide_related=false&amp;show_comments=true&amp;show_user=true&amp;show_reposts=false&amp;show_teaser=true"&gt;&lt;/iframe&gt;&lt;div style="font-size: 10px; color: #cccccc;line-break: anywhere;word-break: normal;overflow: hidden;white-space: nowrap;text-overflow: ellipsis; font-family: Interstate,Lucida Grande,Lucida Sans Unicode,Lucida Sans,Garuda,Verdana,Tahoma,sans-serif;font-weight: 100;"&gt;&lt;a href="https://soundcloud.com/john-c-flow" title="John C. Flow" target="_blank" style="color: #cccccc; text-decoration: none;"&gt;John C. Flow&lt;/a&gt; · &lt;a href="https://soundcloud.com/john-c-flow/goodbye" title="Goodbye" target="_blank" style="color: #cccccc; text-decoration: none;"&gt;Goodbye&lt;/a&gt;&lt;/div&gt;&lt;p&gt;Can be found at: &lt;a class="reference external" href="https://soundcloud.com/john-c-flow/goodbye"&gt;https://soundcloud.com/john-c-flow/goodbye&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-lyrics"&gt;
&lt;h2&gt;The&amp;nbsp;lyrics&lt;/h2&gt;
&lt;div class="section" id="verse"&gt;
&lt;h3&gt;Verse&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[F#m]Like a lonesome voice, [A]in the crowd,&lt;/div&gt;
&lt;div class="line"&gt;[F#m]like a broken toy, [A]left on the ground,&lt;/div&gt;
&lt;div class="line"&gt;[Bm]I feel like I&amp;#8217;ve been left behind, [D]been canceled out,&lt;/div&gt;
&lt;div class="line"&gt;[Bm]no one&amp;#8217;s right here by my side,&lt;/div&gt;
&lt;div class="line"&gt;[Esus4]no one is a[E]round.&lt;/div&gt;
&lt;div class="line"&gt;&lt;br /&gt;&lt;/div&gt;
&lt;div class="line"&gt;[F#m]I&amp;#8217;ve been on this empty road, [A]for quite some time,&lt;/div&gt;
&lt;div class="line"&gt;[F#m]I&amp;#8217;ve been searching out for love, [A]but never could find mine.&lt;/div&gt;
&lt;div class="line"&gt;[Bm]It always ran away from me, [D]I never was that fast,&lt;/div&gt;
&lt;div class="line"&gt;[Bm]I had just a simple dream, [D]but it couldn&amp;#8217;t l[Esus4]a&amp;#8212;-a[E]st &amp;#8230;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="chorus"&gt;
&lt;h3&gt;Chorus&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[A]Good-[C#m7]bye, [D]my [E]everlasting dre[A]am,&lt;/div&gt;
&lt;div class="line"&gt;[A] [C#m7] [D] [E] [A]&lt;/div&gt;
&lt;div class="line"&gt;[A]Good-[C#m7]bye, [D]love is [E]never like it s[A]eems&lt;/div&gt;
&lt;div class="line"&gt;[A] [C#m7] [D] [E]&lt;/div&gt;
&lt;div class="line"&gt;Cause when there&amp;#8217;s [Dmaj7]love there&amp;#8217;s misery,&lt;/div&gt;
&lt;div class="line"&gt;which is a[Asus2/C#]lways finding me,&lt;/div&gt;
&lt;div class="line"&gt;love has a b[Bm]etter place to [Esus4]be,&lt;/div&gt;
&lt;div class="line"&gt;like [F#5]me.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id1"&gt;
&lt;h3&gt;Verse&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[F#m]If only I could understand, [A]why it is me,&lt;/div&gt;
&lt;div class="line"&gt;[F#m]is it just my bad luck or my [A]destiny?&lt;/div&gt;
&lt;div class="line"&gt;[Bm]what is it what the others do? what [D]is it? Please tell me.&lt;/div&gt;
&lt;div class="line"&gt;[Bm]I guess I will never know, so I say [D]goodbye to my [Esus4]drea&amp;#8212;[E]m.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id2"&gt;
&lt;h3&gt;Chorus&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[A]Good-[C#m7]bye, [D]my [E]everlasting dre[A]am,&lt;/div&gt;
&lt;div class="line"&gt;[A] [C#m7] [D] [E] [A]&lt;/div&gt;
&lt;div class="line"&gt;[A]Good-[C#m7]bye, [D]love is [E]never like it s[A]eems&lt;/div&gt;
&lt;div class="line"&gt;[A] [C#m7] [D] [E]&lt;/div&gt;
&lt;div class="line"&gt;The only [D]thing I [E]now do [F#m]fear,&lt;/div&gt;
&lt;div class="line"&gt;is [D]someone [E]getting [F#m]near,&lt;/div&gt;
&lt;div class="line"&gt;Who will [D]brake my [E]heart and [F#m]then,&lt;/div&gt;
&lt;div class="line"&gt;I have to [Esus4]say goodbye ag[E]ain.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="solo-over"&gt;
&lt;h3&gt;Solo&amp;nbsp;over&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[A][C#m7][D][E]&lt;/div&gt;
&lt;div class="line"&gt;[A][C#m7][D][E]&lt;/div&gt;
&lt;div class="line"&gt;[A][C#m7][D][E]&lt;/div&gt;
&lt;div class="line"&gt;[Dmaj7][C#m7][Esus4][E]&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="id3"&gt;
&lt;h3&gt;Chorus&lt;/h3&gt;
&lt;div class="line-block"&gt;
&lt;div class="line"&gt;[A]Good-[C#m7]bye, [D]my [E]everlasting dre[A]am,&lt;/div&gt;
&lt;div class="line"&gt;[A] [C#m7] [D] [E] [A]&lt;/div&gt;
&lt;div class="line"&gt;[A]Good-[C#m7]bye, [D]love is [E]never like it s[A]eems&lt;/div&gt;
&lt;div class="line"&gt;[A] [C#m7] [D] [E]&lt;/div&gt;
&lt;div class="line"&gt;Cause when there&amp;#8217;s [Dmaj7]love there&amp;#8217;s misery,&lt;/div&gt;
&lt;div class="line"&gt;which is a[Asus2/C#]lways finding me,&lt;/div&gt;
&lt;div class="line"&gt;love has a b[Bm]etter place to [Esus4]be,&lt;/div&gt;
&lt;div class="line"&gt;like [F#5]me.&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="Music"></category><category term="Original"></category><category term="Song"></category></entry><entry><title>Use your own website as OpenID login</title><link href="https://datapile.coffeecrew.org/use-your-own-website-as-openid-login" rel="alternate"></link><published>2010-11-12T14:00:34+01:00</published><updated>2010-12-04T18:40:00+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-12:/use-your-own-website-as-openid-login</id><summary type="html">&lt;p class="first last"&gt;This article will show you how to use the OpenID delegation feature which allows you to use your own domain as an identifier for&amp;nbsp;OpenID.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;If you want to use OpenID as an authentication mechanism, but are
afraid of the fact that your OpenID provider may die in the future, or
you simply might want to use another provider in the future, you can
use a delegation model with&amp;nbsp;OpenID.&lt;/p&gt;
&lt;p&gt;A reason to change the OpenID provider might be, that your current
OpenID provider does not support an authentication mechanism you like
to, as for example the YubiKey or something like&amp;nbsp;that.&lt;/p&gt;
&lt;p&gt;Let&amp;#8217;s say you want to use &lt;a class="reference external" href="http://xyz.example.com"&gt;http://xyz.example.com&lt;/a&gt; as your OpenID and
you want to use &lt;a class="reference external" href="http://clavid.com"&gt;http://clavid.com&lt;/a&gt; as your Identity Provider, you have to
execute the following&amp;nbsp;steps.&lt;/p&gt;
&lt;div class="section" id="create-a-sub-domain-for-example-com-called-xyz"&gt;
&lt;h2&gt;Create a (sub-)domain for example.com called&amp;nbsp;xyz.&lt;/h2&gt;
&lt;p&gt;This can for example be done by adding another virtual host to your
apache configuration. The configuration might look like the following&amp;nbsp;one:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;VirtualHost&lt;/span&gt; &lt;span class="s"&gt;xx.xx.xx.xx:80&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="nb"&gt;ServerAdmin&lt;/span&gt; webmaster@example.com
        &lt;span class="nb"&gt;ServerName&lt;/span&gt; xyz.example.com

        &lt;span class="nb"&gt;DocumentRoot&lt;/span&gt; &lt;span class="sx"&gt;/var/www/xyz/&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;Directory&lt;/span&gt; &lt;span class="s"&gt;/var/www/xyz/&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="c"&gt;# Options Indexes MultiViews&lt;/span&gt;
                &lt;span class="nb"&gt;AllowOverride&lt;/span&gt; &lt;span class="k"&gt;None&lt;/span&gt;
                &lt;span class="nb"&gt;Order&lt;/span&gt; allow,deny
                &lt;span class="nb"&gt;allow&lt;/span&gt; from &lt;span class="k"&gt;all&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/Directory&amp;gt;&lt;/span&gt;

        &lt;span class="nb"&gt;ErrorLog&lt;/span&gt; &lt;span class="sx"&gt;/var/log/apache2/error_xyz.log&lt;/span&gt;

        &lt;span class="c"&gt;# Possible values include: debug, info, notice, warn, error, crit,&lt;/span&gt;
        &lt;span class="c"&gt;# alert, emerg.&lt;/span&gt;

        &lt;span class="nb"&gt;LogLevel&lt;/span&gt; &lt;span class="k"&gt;warn&lt;/span&gt;
        &lt;span class="nb"&gt;CustomLog&lt;/span&gt; &lt;span class="sx"&gt;/var/log/apache2/access_xyz.log&lt;/span&gt; combined
&lt;span class="nt"&gt;&amp;lt;/VirtualHost&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="create-a-index-html-file-inside-your-document-root"&gt;
&lt;h2&gt;Create a index.html file inside your document&amp;nbsp;root&lt;/h2&gt;
&lt;p&gt;As a next step you have to create a index.html file in your document
root (in this case &lt;span class="file"&gt;/var/www/xyz&lt;/span&gt;) with the following content in order
for OpenID services being able to find your current identity&amp;nbsp;provider:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;Jens&amp;#39; OpenID delegation page&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;title&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;link&lt;/span&gt; &lt;span class="na"&gt;rel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;openid.server&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.clavid.com/provider/openid&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;link&lt;/span&gt; &lt;span class="na"&gt;rel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;openid2.provider&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.clavid.com/provider/openid&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;link&lt;/span&gt; &lt;span class="na"&gt;rel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;openid.delegate&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://jens.clavid.com&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;link&lt;/span&gt; &lt;span class="na"&gt;rel&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;openid2.local_id&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://jens.clavid.com&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;head&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;This page is used for OpenID delegation.&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
        For more information on OpenID either visit
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://openid.net&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;http://openid.net&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt; or
        &lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt; &lt;span class="na"&gt;href&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://clavid.com&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;http://clavid.com&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;a&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;body&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;span class="p"&gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;html&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="ready"&gt;
&lt;h2&gt;Ready&lt;/h2&gt;
&lt;p&gt;From now on you can use &lt;a class="reference external" href="http://xyz.example.com"&gt;http://xyz.example.com&lt;/a&gt; as your OpenID, which will, as currently configured, be redirecting to &lt;a class="reference external" href="http://clavid.com"&gt;http://clavid.com&lt;/a&gt; where authentication will take&amp;nbsp;place.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="references"&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;You can read all about OpenID in the specification, but the part used for this example is available&amp;nbsp;at:&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://openid.net/specs/openid-authentication-1_1.html#delegating_authentication"&gt;http://openid.net/specs/openid-authentication-1_1.html#delegating_authentication&lt;/a&gt;&lt;/p&gt;
&lt;/div&gt;
</content><category term="Security"></category><category term="OpenID"></category><category term="Security"></category></entry><entry><title>Customizing Emacs</title><link href="https://datapile.coffeecrew.org/customizing-emacs" rel="alternate"></link><published>2010-11-04T14:00:34+01:00</published><updated>2010-11-04T14:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-04:/customizing-emacs</id><summary type="html">&lt;p class="first last"&gt;This article will how to customize the emacs&amp;nbsp;editor.&lt;/p&gt;
</summary><content type="html">&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;This tutorial was tested with &lt;span class="caps"&gt;GNU&lt;/span&gt; Emacs&amp;nbsp;23.0.91.1&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;Some of you might be forced to spent nearly the whole day in a text editor like e.g. emacs to do their work. This usually is especially true for developers, that have to write code the whole day and therefore are forced to look into their editor the whole day. So why not customize it a little, so work might be more pleasant in the&amp;nbsp;end?&lt;/p&gt;
&lt;p&gt;This article will show you how you can customize emacs to hopefully suit your needs. Since I am using Ubuntu, which is a Debian based distribution, the installation of packages might vary for your&amp;nbsp;distribution.&lt;/p&gt;
&lt;div class="section" id="prerequisites"&gt;
&lt;h2&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;In order for this customization to work, you need to get some things first. This includes the development version of emacs, which in my distribution is marked as emacs-snapshot, and the Terminus font, which is according to many users &lt;em&gt;the&lt;/em&gt; font if you have to work long on your computer. That&amp;#8217;s what I can say too, the font is very pleasant on the&amp;nbsp;eyes.&lt;/p&gt;
&lt;p&gt;So, be sure to have the following stuff&amp;nbsp;available:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.is-vn.bg/hamster/"&gt;The Terminus&amp;nbsp;font&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.gnu.org/software/emacs/emacs-faq.html#Installing-Emacs"&gt;Emacs&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;For the development (snapshot) version of emacs you&amp;#8217;d probably have to check out the &lt;span class="caps"&gt;CVS&lt;/span&gt; repository, if you&amp;#8217;re lucky, version 23 is released when you read this&amp;nbsp;;).&lt;/p&gt;
&lt;p&gt;On an Ubuntu based installation, these packages are quite easy to get, simply enter the following commands in your&amp;nbsp;terminal.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;j@sigusr1:$ sudo aptitude install &lt;span class="se"&gt;\&lt;/span&gt;
   console-terminus xfonts-terminus &lt;span class="se"&gt;\&lt;/span&gt;
   xfonts-terminus-dos xfonts-terminus-oblique &lt;span class="se"&gt;\&lt;/span&gt;
   emacs-snapshot emacs-snapshot-gtk
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;If you do have the non-snapshot edition of emacs already installed on
your system, you might want to update your default, be executing the
following commands and select the snapshot as the default being
started when you type &lt;cite&gt;emacs&lt;/cite&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo update-alternatives --config emacs
$ sudo update-alternatives --config emacsclient
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You should now be able to type &lt;code&gt;emacs&lt;/code&gt; into your terminal and the emacs-snapshot will be&amp;nbsp;started.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="color-themes"&gt;
&lt;h2&gt;Color&amp;nbsp;Themes&lt;/h2&gt;
&lt;p&gt;I like colors, and I think the basic color theme that comes with emacs is not very nice. So I decided to install some color themes. Luckily these color themes can be easily installed on Ubuntu. If you are using another distribution which might not have support for that, you might want to try &lt;a class="reference external" href="http://www.nongnu.org/color-theme/"&gt;downloading and installing it manually&lt;/a&gt;. For the automatic version, simply&amp;nbsp;do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install emacs-goodies-el
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After the installation completes, you should be able to start emacs and select a color theme like &amp;#8220;Subtle Hacker&amp;#8221; or &amp;#8220;Gnome 2&amp;#8221; with &lt;code&gt;M-x color-theme-select&lt;/code&gt;. The &amp;#8220;Save customization&amp;#8221; feature in the snapshot I am using (&lt;span class="caps"&gt;GNU&lt;/span&gt; Emacs 23.0.91.1) does not seem to work unfortunately. There is one &amp;#8220;trick&amp;#8221; though that might work; if the customization file does not yet exist, saving seems to&amp;nbsp;work.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="customization-files"&gt;
&lt;h2&gt;Customization&amp;nbsp;Files&lt;/h2&gt;
&lt;p&gt;If you externalize your configuration into a -custom.el file, you end up with two files, the .emacs and the .emacs-custom.el file (or whatever you name it). My files look as&amp;nbsp;follows.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="references"&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.gnu.org/software/emacs/emacs-faq.html#Installing-Emacs"&gt;http://www.gnu.org/software/emacs/emacs-faq.html#Installing-Emacs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.is-vn.bg/hamster"&gt;http://www.is-vn.bg/hamster&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.nongnu.org/color-theme"&gt;http://www.nongnu.org/color-theme&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://homepages.inf.ed.ac.uk/s0243221/emacs"&gt;http://homepages.inf.ed.ac.uk/s0243221/emacs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://amrmostafa.org/bearable-emacs-recipe"&gt;http://amrmostafa.org/bearable-emacs-recipe&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://peadrop.com/blog/2007/01/06/pretty-emacs"&gt;http://peadrop.com/blog/2007/01/06/pretty-emacs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://fractal.csie.org/~eric/wiki/Terminus_font"&gt;http://fractal.csie.org/~eric/wiki/Terminus_font&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://copyleft.free.fr/wordpress/index.php/2009/04/24/nice-fonts-with-emacs-23-snapshot"&gt;http://copyleft.free.fr/wordpress/index.php/2009/04/24/nice-fonts-with-emacs-23-snapshot&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Editor"></category><category term="Emacs"></category></entry><entry><title>Roller template</title><link href="https://datapile.coffeecrew.org/roller-template" rel="alternate"></link><published>2010-11-04T11:11:11+01:00</published><updated>2010-11-04T11:11:11+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-04:/roller-template</id><summary type="html">&lt;p class="first last"&gt;Theme/Template for Apache&amp;nbsp;Roller.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Since there has been some interest in the roller template that I have designed, I decided to upload it here, so you can freely use it. You probably want to exchange the pictures and if you do have to modify any of them template files, I suggest taking a deeper look into the &lt;a class="reference external" href="http://opensource.become.com/apache/roller/roller-4/v4.0.1/docs/roller-template-guide.pdf"&gt;template guide&lt;/a&gt;.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://datapile.coffeecrew.org/downloads/coffeecrew-roller-template.tar.gz"&gt;Download&amp;nbsp;template&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</content><category term="Infrastructure"></category><category term="Roller"></category><category term="Theme"></category></entry><entry><title>XviD, AVI, FLV, MKV support for FrontRow on Mac OS X</title><link href="https://datapile.coffeecrew.org/xvid-avi-flv-mkv-support-for-frontrow-on-mac-os-x" rel="alternate"></link><published>2010-11-04T09:31:11+01:00</published><updated>2010-11-04T09:31:11+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-04:/xvid-avi-flv-mkv-support-for-frontrow-on-mac-os-x</id><summary type="html">&lt;p class="first last"&gt;Support different media formats in FrontRwo on Mac &lt;span class="caps"&gt;OS&lt;/span&gt;&amp;nbsp;X.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Have you ever wondered why FrontRow does not play your precious &lt;span class="caps"&gt;AVI&lt;/span&gt;/XviD/&lt;span class="caps"&gt;MKV&lt;/span&gt; and the like files? The Answer is the codecs are missing. The missing codecs need to be installed as extensions to Quicktime since FrontRow uses Quicktime to play it&amp;#8217;s content listed in the&amp;nbsp;library.&lt;/p&gt;
&lt;p&gt;The logical next step is to download the missing libraries and install them one by &amp;#8230; really? Actually - no. Luckily there are a few guys that have built a simple solution to install these missing codecs on your&amp;nbsp;mac.&lt;/p&gt;
&lt;p&gt;&lt;a class="reference external" href="http://perian.org/"&gt;Download the codec pack from perian.org&lt;/a&gt; and have fun watching your &lt;span class="caps"&gt;AVI&lt;/span&gt;/XviD/&lt;span class="caps"&gt;MKV&lt;/span&gt; encoded&amp;nbsp;videos.&lt;/p&gt;
</content><category term="Infrastructure"></category><category term="OS X"></category></entry><entry><title>Using Java Enumerations</title><link href="https://datapile.coffeecrew.org/using-java-enumerations" rel="alternate"></link><published>2010-11-04T08:12:11+01:00</published><updated>2010-11-04T08:12:11+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-04:/using-java-enumerations</id><summary type="html">&lt;p class="first last"&gt;This article shows a basic implementation of a Java enumeration type that you can use to do a switch on Strings for&amp;nbsp;example.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;This article shows a basic implementation of a Java enumeration type that you can use to do a switch on Strings for&amp;nbsp;example.&lt;/p&gt;
&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Now for the moment let&amp;#8217;s assume that we want to write a program that is able tell us if a programming language is more hardware adjacent than another. Since we already know the adjacency of the programming language, we can group that into the&amp;nbsp;enumeration.&lt;/p&gt;
&lt;p&gt;So, we&amp;#8217;re basically enriching the Enumeration constant with some additional information that we later can easily gather from the object. To distinguish the various adjacency levels we are needed to supply some additional information to the enum so we can later ask it if a programming language is more hardware adjacent than another. In addition to that, we want to refer to the programming language with it&amp;#8217;s long, real name. So instead of just having print &lt;span class="caps"&gt;ASM&lt;/span&gt; we want to be able to extract that information as Assembler from the enum&amp;nbsp;type.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-c0de"&gt;
&lt;h2&gt;The&amp;nbsp;c0de&lt;/h2&gt;
&lt;p&gt;We&amp;#8217;ll now have a look at the code and how it&amp;#8217;s actually implemented. As you can see, you cannot rely on the default implementation of the &lt;code&gt;toString()&lt;/code&gt; method when you do want to print the enums name. Exactly for this the &lt;code&gt;name()&lt;/code&gt; method was introduced. For internal handling of the data structure Java holds an ordinal value too, so the enums can be located&amp;nbsp;correctly.&lt;/p&gt;
&lt;pre class="code java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.examples.enumeration&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="cm"&gt;/* ASM is hardware ;) */&lt;/span&gt;
    &lt;span class="n"&gt;ASM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Assembler&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;C&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;CPP&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;C ++&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
    &lt;span class="n"&gt;Java&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Java&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;enum&lt;/span&gt; &lt;span class="n"&gt;Adjacence&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;UNSET&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;LESS&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;EQUAL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;MORE&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="nf"&gt;ProgrammingLanguage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;longName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;longName&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;longName&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hardwareAdjacence&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;longName&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;longName&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;longName&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Adjacence&lt;/span&gt; &lt;span class="nf"&gt;isMoreAdjecent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt; &lt;span class="n"&gt;than&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Adjacence&lt;/span&gt; &lt;span class="n"&gt;toReturn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Adjacence&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;UNSET&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;than&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;toReturn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Adjacence&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LESS&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;than&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;toReturn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Adjacence&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;EQUAL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;than&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;toReturn&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Adjacence&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MORE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;toReturn&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="nd"&gt;&amp;#64;Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;StringBuilder&lt;/span&gt; &lt;span class="n"&gt;sb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringBuilder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Name: &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;name&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
          &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\nLong name: &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;longName&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\nOrdinal: &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ordinal&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
          &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\nHardware adjacency: &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hardwareAdjacence&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
          &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\n\n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;sb&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Next we probably want to have a sample program calling this wonderful enum &amp;#8230; so why not develop&amp;nbsp;one?&lt;/p&gt;
&lt;pre class="code java literal-block"&gt;
&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;org.coffeecrew.examples.enumeration&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Main&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt; &lt;span class="n"&gt;pl&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;values&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;printProgrammingLanguage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;printMoreAdjacent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;C&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pl&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;printProgrammingLanguage&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt; &lt;span class="n"&gt;pl&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pl&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;printMoreAdjacent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt; &lt;span class="n"&gt;moreAdjacent&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                         &lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt; &lt;span class="n"&gt;than&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;ProgrammingLanguage&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Adjacence&lt;/span&gt; &lt;span class="n"&gt;adj&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;moreAdjacent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isMoreAdjecent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;than&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;StringBuilder&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringBuilder&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;moreAdjacent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;moreAdjacent&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;longName&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; is &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adj&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;LESS&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adj&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;EQUAL&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adj&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;MORE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adj&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;adj&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; hardware adjacent than &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;than&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot; (&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;than&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;longName&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;out&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Btw. with this concept you can also do the somehow often wanted switch on strings concept (just switch on the enum and get the String&amp;nbsp;name).&lt;/p&gt;
&lt;/div&gt;
</content><category term="Programming"></category><category term="Java"></category><category term="Enum"></category></entry><entry><title>Programming with the APR - Using APR HashTables</title><link href="https://datapile.coffeecrew.org/programming-with-the-apr-using-apr-hashtables" rel="alternate"></link><published>2010-11-02T12:00:34+01:00</published><updated>2010-11-02T12:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-02:/programming-with-the-apr-using-apr-hashtables</id><summary type="html">&lt;p class="first last"&gt;This article will show you how to use the OpenID delegation feature which allows you to use your own domain as an identifier for&amp;nbsp;OpenID.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;This short article will show how to use the Apache Portable Runtime
(&lt;span class="caps"&gt;APR&lt;/span&gt;) with it&amp;#8217;s built in&amp;nbsp;hashtable.&lt;/p&gt;
&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;If you are in need to place data in a memory structure to access it
quickly, you are probably best with a hash table data type. The Apache
Portable Runtime (&lt;span class="caps"&gt;APR&lt;/span&gt;) luckily, along some others like
e.g. &lt;code&gt;apr_table_t&lt;/code&gt; or &lt;code&gt;apr_array_header_t&lt;/code&gt; (both defined
in &lt;code&gt;apr_tables.h&lt;/code&gt;), provides such a data type to&amp;nbsp;you.&lt;/p&gt;
&lt;p&gt;Hashtables do have the big advantage that you can supply them any data type you like. The next big thing with hashtables is that they are usually very efficient if the number of elements that they are holding&amp;nbsp;grows.&lt;/p&gt;
&lt;p&gt;You can download the file &lt;a class="reference external" href="https://raw.githubusercontent.com/authsec/examples/master/c/aprHashtable.c"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="let-s-hash"&gt;
&lt;h2&gt;Let&amp;#8217;s&amp;nbsp;hash&lt;/h2&gt;
&lt;p&gt;In order to demonstrate hashtables we are using a very simple data structure which holds a date, a username and a password. We then set some values onto this data structure and save the created structure into the&amp;nbsp;hashtable.&lt;/p&gt;
&lt;p&gt;After storing that object into the hashtable we are reading the objects back from the hashtable and output it&amp;#8217;s&amp;nbsp;contents.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="the-c0de"&gt;
&lt;h2&gt;The&amp;nbsp;c0de&lt;/h2&gt;
&lt;p&gt;Now that you do have some overview of what we are actually doing here, it&amp;#8217;s time to show you some code. I think it pretty much speaks for&amp;nbsp;itself.&lt;/p&gt;
&lt;p&gt;You should however, if you are using strings as keys, use the special &lt;code&gt;APR_HASH_KEY_STRING&lt;/code&gt; value to indicate a string valued key to &lt;span class="caps"&gt;APR&lt;/span&gt;. This will use &lt;code&gt;strlen(key)&lt;/code&gt; to compute the length (&lt;code&gt;NUL&lt;/code&gt; terminator is not included&amp;nbsp;there).&lt;/p&gt;
&lt;pre class="code c literal-block"&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_hash.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_time.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#define APR_WANT_STDIO
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_want.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;
&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_time_t&lt;/span&gt; &lt;span class="n"&gt;creationDate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;timeReadable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;timeReadable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_palloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;APR_RFC822_DATE_LEN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;apr_rfc822_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timeReadable&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;creationDate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Username:&lt;/span&gt;&lt;span class="se"&gt;\t\t&lt;/span&gt;&lt;span class="s"&gt; %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Password:&lt;/span&gt;&lt;span class="se"&gt;\t\t&lt;/span&gt;&lt;span class="s"&gt; %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;CreationDate:&lt;/span&gt;&lt;span class="se"&gt;\t\t&lt;/span&gt;&lt;span class="s"&gt; %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;timeReadable&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;apr_pool_destroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Compile with
 * $&amp;gt; export APR_LIBS=&amp;quot;`apr-1-config --cflags --cppflags --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; export APU_LIBS=&amp;quot;`apu-1-config --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; gcc $APR_LIBS $APU_LIBS aprHashtable.c -o aprHashtable
 */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;cUser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;readUser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;countName&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="n"&gt;apr_hash_index_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;hidx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;


  &lt;span class="n"&gt;apr_app_initialize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;atexit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_terminate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;apr_pool_create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;apr_hash_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_hash_make&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;apr_cpystrn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;countName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Jens Frey  &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;26&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;countName&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;65&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;cUser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_palloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;apr_cpystrn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cUser&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;countName&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;countName&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;apr_cpystrn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cUser&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;secret&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;secret&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;cUser&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;creationDate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_time_now&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="n"&gt;apr_hash_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cUser&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;APR_HASH_KEY_STRING&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cUser&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cUser&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hidx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_hash_first&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;hidx&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;hidx&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_hash_next&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hidx&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;apr_hash_this&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;hidx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;readUser&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;readUser&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="n"&gt;readUser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_hash_get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Jens Frey G&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;APR_HASH_KEY_STRING&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;readUser&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hashtable size: %d bytes&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
     &lt;span class="n"&gt;apr_hash_count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
     &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;apr_hash_count&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ht&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;readUser&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;apr_terminate&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;
</content><category term="Programming"></category><category term="APR"></category><category term="Apache"></category><category term="C"></category></entry><entry><title>Programming with the APR - Using MD5</title><link href="https://datapile.coffeecrew.org/programming-with-the-apr-using-md5" rel="alternate"></link><published>2010-11-02T11:00:34+01:00</published><updated>2010-11-02T11:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-02:/programming-with-the-apr-using-md5</id><summary type="html">&lt;p class="first last"&gt;This article will show you how to use the OpenID delegation feature which allows you to use your own domain as an identifier for&amp;nbsp;OpenID.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;This article intends to show how to basically use the &lt;span class="caps"&gt;MD5&lt;/span&gt; hashing
algorithm that ships with the Apache Portable Runtime (&lt;span class="caps"&gt;APR&lt;/span&gt;)&amp;nbsp;library.&lt;/p&gt;
&lt;div class="section" id="introduction"&gt;
&lt;h2&gt;Introduction&lt;/h2&gt;
&lt;p&gt;Sometimes you are really in need for some &lt;span class="caps"&gt;MD5&lt;/span&gt; hashed strings. Most of
the time you are in such a need if you want to create a custom
password store where you don&amp;#8217;t want an attacker to easily get
the password if he compromises your system. So &lt;span class="caps"&gt;MD5&lt;/span&gt; hashed password are
great for such a purpose. Luckily the Apache Portable Runtime (&lt;span class="caps"&gt;APR&lt;/span&gt;)
provides such a &lt;span class="caps"&gt;MD5&lt;/span&gt; hashing mechanism to you, so you can easily use
that and do not have to struggle with the complex details of how to
actually create a &lt;span class="caps"&gt;MD5&lt;/span&gt;&amp;nbsp;hash.&lt;/p&gt;
&lt;div class="section" id="hashing"&gt;
&lt;h3&gt;Hashing&lt;/h3&gt;
&lt;p&gt;Hashing basically describes a way of taking an arbitrary length input
and calculating that down into a secure, tamperproof cryptographic
value that can only be recalculated if the same input was given
again. The basic idea is that the calculation that is necessary to
produce the hashed output is very easy to perform, but if you just
have the hashed version of the password you cannot easily reverse that
operation (the reverse operation is very&amp;nbsp;complex).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="salting"&gt;
&lt;h3&gt;Salting&lt;/h3&gt;
&lt;p&gt;If you are creating a password store on your own, you probably don&amp;#8217;t
want a simple &lt;span class="caps"&gt;MD5&lt;/span&gt; hashing mechanism, which the &lt;span class="caps"&gt;APR&lt;/span&gt; provides to
you. You probably want to add some salt to your password management
mechanism, since salting the password makes brute force attacks with
rainbow tables onto the hashed password repository so much more
inconvenient for the&amp;nbsp;attacker.&lt;/p&gt;
&lt;p&gt;Salting, for those who don&amp;#8217;t know, simply sort of &amp;#8220;enriches&amp;#8221; your
password with some random bytes, that will be thrown into the mix when
hashing the actual password. Since a hash algorithm is only a good one
if it flips about 50 percent of the bits in the output if you change a
single input bit, you can imagine that a few added bits should
absolutely be sufficient to change the result of the hash&amp;nbsp;operation.&lt;/p&gt;
&lt;p&gt;In order for the algorithm to be able to reconstruct the same hash
again, he of course needs to know the salt that was initially used to
create the corresponding hash. Therefore this salt value will be
written in front of the final hashed password&amp;nbsp;string.&lt;/p&gt;
&lt;p&gt;A typical &lt;span class="caps"&gt;MD5&lt;/span&gt; hash, or sometimes called an &lt;span class="caps"&gt;MD5&lt;/span&gt; digest will look&amp;nbsp;like:&lt;/p&gt;
&lt;pre class="literal-block"&gt;
$apr1$XGOEPMa5$eUAF1NzTmHoqGZJSD5P4q1
&lt;/pre&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="the-c0de"&gt;
&lt;h2&gt;The&amp;nbsp;c0de&lt;/h2&gt;
&lt;p&gt;The code itself is pretty straight forward. You might notice that I&amp;#8217;m not using any &lt;span class="caps"&gt;APR&lt;/span&gt; data pool within the program itself. This is simply due to the fact that I&amp;#8217;m not needing any&amp;nbsp;;).&lt;/p&gt;
&lt;p&gt;The program first initializes internal &lt;span class="caps"&gt;APR&lt;/span&gt; data structures and registers a termination function. Then a randomized salt value is generated (you could also use a fixed salt, but that is not recommended). Finally the &lt;span class="caps"&gt;MD5&lt;/span&gt; encoding is performed. The most problematic part here is to figure out what the actual length of the result will be. From what I observed the result is no longer than 37 characters, but that might change if the &lt;span class="caps"&gt;APR&lt;/span&gt; people e.g. decide to change their &lt;code&gt;$apr1$&lt;/code&gt; prefix which indicates the custom salting algorithm to the&amp;nbsp;library.&lt;/p&gt;
&lt;pre class="code c literal-block"&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_base64.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_general.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_md5.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#define APR_WANT_STDIO
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_want.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;
&lt;span class="cm"&gt;/* This is neccessary since there seems to be
 * no real information to gather how long the actual
 * result string will be when the encoder finishes it's
 * work.
 *
 * Using another contellation, this should not be a problem,
 * since we would of course allocate the final result memory
 * from an APR pool. Where memory is managed, and the final length
 * of the result is known.
 *
 * During several trial and error phases i observed the result string
 * to be no longer than 37 characters. But that might change if the
 * e.g. change the apr id, where the &amp;quot;custom algorithm&amp;quot; is detected.
 */&lt;/span&gt;
&lt;span class="cp"&gt;#define MAX_STRING_LEN 256
#define SALT_LEN 9
&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;randomizeSalt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;resultSalt&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;salt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;SALT_LEN&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;b64Salt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;apr_base64_encode_len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SALT_LEN&lt;/span&gt;&lt;span class="p"&gt;)];&lt;/span&gt;

  &lt;span class="n"&gt;apr_base64_encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b64Salt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SALT_LEN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Salt array before randomization:&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt;%s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b64Salt&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_generate_random_bytes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SALT_LEN&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;salt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;SALT_LEN&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sc"&gt;'\0'&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;apr_base64_encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b64Salt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;salt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SALT_LEN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Salt array  after randomization:&lt;/span&gt;&lt;span class="se"&gt;\t&lt;/span&gt;&lt;span class="s"&gt;%s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b64Salt&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="cm"&gt;/* As we do just need 8 random characters, we just
   * copy them (remember the 9th char is set to '\0' earlier
   */&lt;/span&gt;
  &lt;span class="n"&gt;apr_cpystrn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;resultSalt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b64Salt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SALT_LEN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Compile with
 * $&amp;gt; export APR_LIBS=&amp;quot;`apr-1-config --cflags --cppflags --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; export APU_LIBS=&amp;quot;`apu-1-config --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; gcc $APR_LIBS $APU_LIBS aprMd5.c -o aprMd5
 */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;md5Digest&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;APR_MD5_DIGESTSIZE&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;passwordToHash&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;This is my very secure extrme 1337 pa55w0r)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* This gives us the salt, so the same password
   * will not produce the same hash, given the assumption,
   * that the salt of course changes.
   * Using this static string is, of course not any safer
   * then just using the standard MD5 hashing.
   *
   * This MD5 version uses an APR specific salting.
   */&lt;/span&gt;
  &lt;span class="c1"&gt;//char salt[] = &amp;quot;12345678&amp;quot;;
&lt;/span&gt;  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;salt&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* Actually use the app_initialize funciton if you are
   * not writing a library.
   *
   * This function is defined in apr_general.h
   */&lt;/span&gt;
  &lt;span class="n"&gt;apr_app_initialize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;atexit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_terminate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;randomizeSalt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;salt&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;md5DigestSalted&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;MAX_STRING_LEN&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;

  &lt;span class="cm"&gt;/* This actually hashes the password into a final
   * already in ASCII printable characters encoded
   * string
   */&lt;/span&gt;
  &lt;span class="n"&gt;apr_md5_encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passwordToHash&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                 &lt;span class="n"&gt;salt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                 &lt;span class="n"&gt;md5DigestSalted&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                 &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;md5DigestSalted&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;The MD5 digest salted of:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;%s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;looks like:&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;%s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
         &lt;span class="s"&gt;&amp;quot;and is %d characters long&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;passwordToHash&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;md5DigestSalted&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
         &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;md5DigestSalted&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="cm"&gt;/* Now see if we can validate our &amp;quot;normal&amp;quot; password against the
   * hashed version.
   */&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_password_validate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;passwordToHash&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;md5DigestSalted&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Testing password: %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;passwordToHash&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;APR_SUCCESS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;[SUCCESS] The supplied password validated correctly against the hash&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;[FAILURE] The supplied password did not validate&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="cm"&gt;/* Offset the original password by one character, so this should not
   * be valid anymore.
   */&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_password_validate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;passwordToHash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;md5DigestSalted&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Testing password: %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;passwordToHash&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;APR_SUCCESS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;[SUCCESS] The supplied password validated correctly against the hash&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;[FAILURE] The supplied password did not validate&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="n"&gt;apr_terminate&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;/div&gt;
</content><category term="Programming"></category><category term="APR"></category><category term="Apache"></category><category term="C"></category></entry><entry><title>Programming with the APR - Using apr_getopt</title><link href="https://datapile.coffeecrew.org/programming-with-the-apr-using-apr_getopt" rel="alternate"></link><published>2010-11-02T10:00:34+01:00</published><updated>2010-11-02T10:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-02:/programming-with-the-apr-using-apr_getopt</id><summary type="html">&lt;p class="first last"&gt;This article will show you how to use the built in command line parser that comes with the &lt;span class="caps"&gt;APR&lt;/span&gt;.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;This article will show you how to use the built in command line parser that comes with the &lt;span class="caps"&gt;APR&lt;/span&gt;. There will be two source files, one showing you how to use &lt;code&gt;apr_getopt&lt;/code&gt; just to parse simple, single options and the other peace of source will show you how to use it with so called long&amp;nbsp;options.&lt;/p&gt;
&lt;p&gt;You can download the &lt;a class="reference external" href="https://raw.githubusercontent.com/authsec/examples/master/c/aprGetopt.c"&gt;single option parser here&lt;/a&gt; and the &lt;a class="reference external" href="https://raw.githubusercontent.com/authsec/examples/master/c/aprGetoptLong.c"&gt;long options parser here&lt;/a&gt;.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;The program supplied should actually use &lt;code&gt;apr_app_initialize(&amp;amp;argc, &amp;amp;argv, NULL);&lt;/code&gt; since &lt;code&gt;apr_initialize()&lt;/code&gt; is intended for library use&amp;nbsp;only.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="prerequisites"&gt;
&lt;h2&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;As always, you need to have &lt;span class="caps"&gt;APR&lt;/span&gt; libraries installed in order to be able to use them. You&amp;#8217;ll additionally need the header files too, so if you&amp;#8217;re installing from some distribution specific mechanism, be sure to have the &amp;#8220;-dev&amp;#8221; packages installed as&amp;nbsp;well.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="explanation"&gt;
&lt;h2&gt;Explanation&lt;/h2&gt;
&lt;p&gt;There is really not that much to explain this time. We first initialize &lt;span class="caps"&gt;APR&lt;/span&gt;, create a pool, then initialize the &lt;code&gt;getopt&lt;/code&gt; parser and then we&amp;#8217;re walking through the options specified on the command&amp;nbsp;line.&lt;/p&gt;
&lt;p&gt;The most notable part here is the line: &lt;code&gt;cmdLineArgs-&amp;gt;interleave= 1;&lt;/code&gt;. Setting the interleave to one allows us to have options and final arguments specified &amp;#8220;wildly&amp;#8221; on the command line. That means that the order of arguments is not relevant. You can either supply the options like &lt;code&gt;./aprGetoptLong --choose what -h lalalal&lt;/code&gt; or you can type: &lt;code&gt;./aprGetoptLong --choose what lalala -h&lt;/code&gt; which, in this case would lead to the same&amp;nbsp;result.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="simple-options-code"&gt;
&lt;h2&gt;Simple options&amp;nbsp;code&lt;/h2&gt;
&lt;pre class="code c literal-block"&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_file_io.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_getopt.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;
&lt;span class="cm"&gt;/* Compile with
 * $&amp;gt; export APR_LIBS=&amp;quot;`apr-1-config --cflags --cppflags --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; export APU_LIBS=&amp;quot;`apu-1-config --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; gcc $APR_LIBS $APU_LIBS aprGetopt.c -o aprGetopt
 */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_getopt_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;cmdLineArgs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;optChar&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;optArg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* Will hold the position for the non optional
   * args in the APR parsed argv
   */&lt;/span&gt;
  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;processedOptions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* cleanly handle fileIO this time */&lt;/span&gt;
  &lt;span class="n"&gt;apr_file_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_file_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* init APR, create memory pool */&lt;/span&gt;
  &lt;span class="n"&gt;apr_initialize&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;atexit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_terminate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Open stdin, stderr */&lt;/span&gt;
  &lt;span class="n"&gt;apr_file_open_stdout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;apr_file_open_stderr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* init APRs getopt */&lt;/span&gt;
  &lt;span class="n"&gt;apr_getopt_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* If not using the getopt_long version, this
   * this is ignored
   */&lt;/span&gt;
  &lt;span class="c1"&gt;//cmdLineArgs-&amp;gt;interleave = 1;
&lt;/span&gt;
  &lt;span class="cm"&gt;/* Now step through the options given */&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_getopt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;hc:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;optChar&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;optArg&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;APR_SUCCESS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;optChar&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="sc"&gt;'h'&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Read option h ...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="sc"&gt;'c'&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Read option c with argument %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;optArg&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Default reached ...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;APR_STATUS_IS_BADCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Read bad option ...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="n"&gt;processedOptions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ind&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="cm"&gt;/* Now spit out non options */&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processedOptions&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Non opt arg: %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;processedOptions&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;


  &lt;span class="n"&gt;apr_pool_destroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Now that you have seen how it works with simple options, long options is no more magic. You just have to additionally initialize an array basically, but see for&amp;nbsp;yourself.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="long-options-code"&gt;
&lt;h2&gt;Long options&amp;nbsp;code&lt;/h2&gt;
&lt;pre class="code c literal-block"&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_file_io.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_getopt.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;

&lt;span class="cm"&gt;/* Compile with
 * $&amp;gt; export APR_LIBS=&amp;quot;`apr-1-config --cflags --cppflags --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; export APU_LIBS=&amp;quot;`apu-1-config --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; gcc $APR_LIBS $APU_LIBS aprGetoptLong.c -o aprGetoptLong
 */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_getopt_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;cmdLineArgs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;optChar&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;optArg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* Will hold the position for the non optional
   * args in the APR parsed argv
   */&lt;/span&gt;
  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;processedOptions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* cleanly handle fileIO this time */&lt;/span&gt;
  &lt;span class="n"&gt;apr_file_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_file_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* Let's handle long opts too */&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;apr_getopt_option_t&lt;/span&gt; &lt;span class="n"&gt;longOpts&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;'h'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Show help&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;choose&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;'c'&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Choose something&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;}};&lt;/span&gt;

  &lt;span class="cm"&gt;/* init APR, create memory pool */&lt;/span&gt;
  &lt;span class="n"&gt;apr_initialize&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;atexit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_terminate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Open stdin, stderr */&lt;/span&gt;
  &lt;span class="n"&gt;apr_file_open_stdout&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;apr_file_open_stderr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* init APRs getopt */&lt;/span&gt;
  &lt;span class="n"&gt;apr_getopt_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Allow options to be added after arguments */&lt;/span&gt;
  &lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;interleave&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* Now step through the options given */&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_getopt_long&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;longOpts&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;optChar&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;optArg&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;APR_SUCCESS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;optChar&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="sc"&gt;'h'&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Read option h ...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="sc"&gt;'c'&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Read option c with argument %s &lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;optArg&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Default reached ...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;APR_STATUS_IS_BADCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;err&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Read bad option ...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="n"&gt;processedOptions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ind&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="cm"&gt;/* Now spit out non options */&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;processedOptions&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;apr_file_printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Non opt arg: %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cmdLineArgs&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;processedOptions&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;


  &lt;span class="n"&gt;apr_pool_destroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Hope you enjoyed&amp;nbsp;it.&lt;/p&gt;
&lt;dl class="docutils"&gt;
&lt;dt&gt;Downloads&lt;/dt&gt;
&lt;dd&gt;&lt;ul class="first last simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://raw.githubusercontent.com/authsec/examples/master/c/aprGetopt.c"&gt;aprGetopt.c&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="https://raw.githubusercontent.com/authsec/examples/master/c/aprGetoptLong.c"&gt;aprGetoptLong.c&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/dd&gt;
&lt;/dl&gt;
&lt;/div&gt;
</content><category term="Programming"></category><category term="APR"></category><category term="Apache"></category><category term="C"></category></entry><entry><title>Programming with the APR - Persisting information</title><link href="https://datapile.coffeecrew.org/programming-with-the-apr-persisting-information" rel="alternate"></link><published>2010-11-01T11:00:34+01:00</published><updated>2010-11-01T11:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-01:/programming-with-the-apr-persisting-information</id><summary type="html">&lt;p class="first last"&gt;This article will show you how to store information in the database that comes with the Apache Portable Runtime (&lt;span class="caps"&gt;APR&lt;/span&gt;).&lt;/p&gt;
</summary><content type="html">&lt;p&gt;This article will show you how to store information in the database that comes with the Apache Portable Runtime (&lt;span class="caps"&gt;APR&lt;/span&gt;). Basically a simple struct data type is persisted into that database. You can download the code &lt;a class="reference external" href="https://raw.githubusercontent.com/authsec/examples/master/c/aprWithSdbm.c"&gt;here&lt;/a&gt;&amp;nbsp;.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;The program supplied should actually use &lt;code&gt;apr_app_initialize(&amp;amp;argc, &amp;amp;argv, NULL);&lt;/code&gt; since &lt;code&gt;apr_initialize()&lt;/code&gt; is intended for library use&amp;nbsp;only.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="function-description"&gt;
&lt;h2&gt;Function&amp;nbsp;description&lt;/h2&gt;
&lt;p&gt;In order to store the information in that database you probably might want to create some functions to better break down work into smaller parts. Since the database mechanism requires you to have information available as an &lt;code&gt;apr_datum_t&lt;/code&gt; type, you probably want to introduce some helper functions which exactly deal with that issue. Converting your normal data types into a &lt;code&gt;apr_datum_t&lt;/code&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="helper-functions"&gt;
&lt;h2&gt;Helper&amp;nbsp;functions&lt;/h2&gt;
&lt;p&gt;My helper functions which convert a normal &lt;code&gt;char*&lt;/code&gt; or an &lt;code&gt;apr_time_t&lt;/code&gt; into the required &lt;code&gt;apr_datum_t&lt;/code&gt; are&amp;nbsp;called:&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;code&gt;string2datum(apr_pool_t *p, char *toDatum)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;time2datum(apr_pool_t *p, apr_time_t *toDump)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;checkError(apr_status_t rv)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You eventually might ask what the pool is for. Since the &lt;code&gt;apr_datum_t&lt;/code&gt; type holds a &lt;code&gt;char *&lt;/code&gt; and the according size of that pointer, we have to allocate space somewhere. That space is allocated on the pool you give that function. So make sure your pools lifetime is big enough so you can retrieve the value the function built for you. The &lt;code&gt;checkError&lt;/code&gt; function is used for checking the return value that the various database access functions might return. This is basically to avoid lots of&amp;nbsp;typing.&lt;/p&gt;
&lt;div class="section" id="worker-functions"&gt;
&lt;h3&gt;Worker&amp;nbsp;functions&lt;/h3&gt;
&lt;p&gt;Now you need a few functions that do the actual work for you. APRs abstraction is not bad, but cannot handle automatic key generation in this case. &lt;span class="caps"&gt;APR&lt;/span&gt; uses a key for every saved &lt;code&gt;apr_datum_t&lt;/code&gt;. We want to store a more complex datatype to disc, so we need to have a key for every field of our structure when we do want to save&amp;nbsp;it.&lt;/p&gt;
&lt;p&gt;The basic idea is to flatten the structure when storing it. So we are writing every field of the structure linearly to disc. When we read the data from disc we do that in the same order as we have written it. This mechanism should restore the original data structure we were working with. The following functions persist a single datum, a whole struct and the read function reads back the whole struct from the&amp;nbsp;disc.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;code&gt;apr_status_t persistUserRecord(unsigned int *key, apr_dbm_t *database, struct userRecord *user)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;apr_status_t persistDatum(unsigned int *key, apr_dbm_t *database, apr_datum_t *toDump)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;struct userRecord *readUserRecord(apr_pool_t *resultPool, apr_dbm_t *db, apr_datum_t *lastReadKey)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;These functions are not implemented, but might give you an idea of how the &lt;span class="caps"&gt;API&lt;/span&gt; can look like if you want to serialize a whole bunch of&amp;nbsp;data.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;code&gt;void persistUserRecords(apr_table_t *userRecords)&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;apr_table_t *readUserRecords(apr_pool_t *resultPool)&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You surely are interested in how the actual code looks by now. Now i will no longer deprive you from&amp;nbsp;that.&lt;/p&gt;
&lt;pre class="code c literal-block"&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apu.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_dbm.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_time.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_strings.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
#define APR_WANT_STDIO
#define APR_WANT_MEMFUNC
#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;apr_want.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;
&lt;/span&gt;

&lt;span class="cp"&gt;#define DBM_TYPE &amp;quot;SDBM&amp;quot;
#define DEBUG
#ifdef DEBUG
#define PDEBUG(message, arguments) printf(&amp;quot;[DEBUG] &amp;quot; message &amp;quot;\n&amp;quot;, arguments)
#define PDEBUG_NA(message) printf(&amp;quot;[DEBUG] &amp;quot; message &amp;quot;\n&amp;quot;)
#else
#define PDEBUG(message, arguments) &lt;/span&gt;&lt;span class="cm"&gt;/* empty */&lt;/span&gt;&lt;span class="cp"&gt;
#define PDEBUG_NA(message) &lt;/span&gt;&lt;span class="cm"&gt;/* empty */&lt;/span&gt;&lt;span class="cp"&gt;
#endif
&lt;/span&gt;
&lt;span class="cm"&gt;/* Compile with
 * $&amp;gt; export APR_LIBS=&amp;quot;`apr-1-config --cflags --cppflags --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; export APU_LIBS=&amp;quot;`apu-1-config --includes --ldflags --link-ld --libs`&amp;quot;
 * $&amp;gt; gcc $APR_LIBS $APU_LIBS aprWithSdbm.c -o aprWithSdbm
 */&lt;/span&gt;

&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_time_t&lt;/span&gt; &lt;span class="n"&gt;creationDate&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="cm"&gt;/* since apr_datum_t* results in a nested structure
 * this allocates the memory on the nested
 * char* onto the given pool.
 */&lt;/span&gt;
&lt;span class="n"&gt;apr_datum_t&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nf"&gt;string2datum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                          &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;toDatum&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;apr_datum_t&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nf"&gt;time2datum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                        &lt;span class="n"&gt;apr_time_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;toDatum&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="nf"&gt;persistDatum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                          &lt;span class="n"&gt;apr_dbm_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                          &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;toDump&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="nf"&gt;persistUserRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                               &lt;span class="n"&gt;apr_dbm_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                               &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;persistUserRecords&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_table_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;userRecords&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nf"&gt;readUserRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;resultPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                  &lt;span class="n"&gt;apr_dbm_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                                  &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;lastReadKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;apr_table_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nf"&gt;readUserRecords&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;resultPool&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;


&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;user2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;userReadBack&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;userReadBack2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_dbm_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;counter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="n"&gt;readKey&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;


  &lt;span class="cm"&gt;/* Always init at program start */&lt;/span&gt;
  &lt;span class="n"&gt;apr_initialize&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="cm"&gt;/* Register cleanup */&lt;/span&gt;
  &lt;span class="n"&gt;atexit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_terminate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* create our main memory pool,
   * which will be valid during the programs lifetime
   */&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Allocate memory for a user on the main pool */&lt;/span&gt;
  &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_palloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_pstrdup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Jens Frey&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_pstrdup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;secret&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;creationDate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_time_now&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="n"&gt;user2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_palloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;user2&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_pstrdup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Master Frey&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;user2&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_pstrdup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;more secret password&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;user2&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;creationDate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_time_now&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;user2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;apr_dbm_open_ex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DBM_TYPE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;/tmp/testDatabase&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;APR_DBM_RWTRUNC&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
               &lt;span class="n"&gt;APR_FPROT_OS_DEFAULT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;PDEBUG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Counter value: %u&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;persistUserRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;persistUserRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;PDEBUG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Counter value: %u&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;//Query the first Key, the rest are subsequently queried alone
&lt;/span&gt;  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;  &lt;span class="n"&gt;apr_dbm_firstkey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;readKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;userReadBack&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;readUserRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;readKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;userReadBack2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;readUserRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;readKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;userReadBack&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;userReadBack2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;apr_dbm_close&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_destroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mainPool&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;APR_SUCCESS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;An error happened while operating with the database (code %d)&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="nf"&gt;readUserRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;lastReadKey&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_palloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;PDEBUG_NA&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;enter readUserRecord()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Read username */&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_fetch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;lastReadKey&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_pstrndup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dptr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dsize&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Advance to next key and read password */&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_nextkey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lastReadKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_fetch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;lastReadKey&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_pstrndup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dptr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dsize&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Timestamp */&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_nextkey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lastReadKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_fetch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;lastReadKey&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="cm"&gt;/* Memcpy that, that part of the structure is already alloced */&lt;/span&gt;
  &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;creationDate&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dptr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_time_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;


  &lt;span class="cm"&gt;/* Set the key to the next element, so a subsequent call will
     be correct again
  */&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_nextkey&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;db&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lastReadKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;checkError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;PDEBUG_NA&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;leave readUserRecord()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Converts an apr_time_t into a
 * persistable apr_datum_t
 */&lt;/span&gt;
&lt;span class="n"&gt;apr_datum_t&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nf"&gt;time2datum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;apr_time_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;toDatum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_size_t&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_palloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_datum_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_time_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dptr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_pmemdup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;toDatum&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dsize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/*
 * Converts the given char* into a apr_datum_t with lengths set correctly
 * depending on the database type. The memory required for the string
 * to be held is saved in the given memory pool.
 *
 */&lt;/span&gt;
&lt;span class="n"&gt;apr_datum_t&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nf"&gt;string2datum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;toDatum&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_palloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;apr_datum_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dptr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_pstrdup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;toDatum&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#ifndef NETSCAPE_DBM_COMPAT
&lt;/span&gt;  &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dsize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dptr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="cp"&gt;#else
&lt;/span&gt;  &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dsize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dptr&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="cp"&gt;#endif
&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;dt&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="cm"&gt;/* This function persists the whole struct userRecord
 * into the SDBM database. You have to check if this implementation
 * is still correct if you change your struct.
 *
 * There should however be no problem if you are just adding transient
 * parameters that should not be persisted at all.
 */&lt;/span&gt;
&lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="nf"&gt;persistUserRecord&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;dumpKey&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PDEBUG_NA&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;enter persistUserRecord()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;apr_pool_create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Now fill in every field of the record */&lt;/span&gt;
  &lt;span class="n"&gt;dumpKey&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;string2datum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;persistDatum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dumpKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;dumpKey&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;string2datum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;persistDatum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dumpKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;dumpKey&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;time2datum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;creationDate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;persistDatum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dumpKey&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;apr_pool_destroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;PDEBUG_NA&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;leave persistUserRecord()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;


&lt;span class="cm"&gt;/*
  Assumes an open database.
 */&lt;/span&gt;
&lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="nf"&gt;persistDatum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;toDump&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_status_t&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_datum_t&lt;/span&gt; &lt;span class="n"&gt;datumKey&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;datumKey&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dptr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;datumKey&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dsize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;



  &lt;span class="n"&gt;PDEBUG_NA&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;enter persistDatum()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_dbm_store&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;database&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;datumKey&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;toDump&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rv&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;APR_SUCCESS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Error saving datum in database (returned %d)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="c1"&gt;//Increment count for every written datum
&lt;/span&gt;  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PDEBUG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Key is %u&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;PDEBUG_NA&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;leave persistDatum()&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;rv&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;userRecord&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;timeReadable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;apr_pool_create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;timeReadable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;apr_palloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;APR_RFC822_DATE_LEN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;apr_rfc822_date&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timeReadable&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;creationDate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;PDEBUG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Username: %s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;PDEBUG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Password: %s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;password&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;PDEBUG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;CreationDate (long): %&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;APR_TIME_T_FMT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;creationDate&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;PDEBUG&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;CreationDate (read): %s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;timeReadable&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;apr_pool_destroy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;
&lt;p&gt;Hope you enjoyed&amp;nbsp;it.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="Programming"></category><category term="APR"></category><category term="Apache"></category><category term="C"></category></entry><entry><title>Programming with the APR</title><link href="https://datapile.coffeecrew.org/programming-with-the-apr" rel="alternate"></link><published>2010-11-01T10:00:34+01:00</published><updated>2010-11-01T10:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-01:/programming-with-the-apr</id><summary type="html">&lt;p class="first last"&gt;This article will give you an introduction of how to program with the Apache Portable Runtime (&lt;span class="caps"&gt;APR&lt;/span&gt;).&lt;/p&gt;
</summary><content type="html">&lt;p&gt;This article will give you an introduction of how to program with the
Apache Portable Runtime (&lt;span class="caps"&gt;APR&lt;/span&gt;). It illustrates a simple command line&amp;nbsp;program.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;The program supplied should actually use &lt;code&gt;apr_app_initialize(&amp;amp;argc, &amp;amp;argv, NULL);&lt;/code&gt; since &lt;code&gt;apr_initialize()&lt;/code&gt; is intended for library use&amp;nbsp;only.&lt;/p&gt;
&lt;/div&gt;
&lt;p&gt;I was playing around with the Apache Portable Runtime (&lt;span class="caps"&gt;APR&lt;/span&gt;) recently and found out, probably the most difficult part was to find out how to compile the program you have just written. The probably most famous projects using &lt;span class="caps"&gt;APR&lt;/span&gt; are the Apache HTTPd and&amp;nbsp;Subversion.&lt;/p&gt;
&lt;div class="section" id="overview"&gt;
&lt;h2&gt;Overview&lt;/h2&gt;
&lt;p&gt;&lt;span class="caps"&gt;APR&lt;/span&gt;&amp;#8217;s goal is to provide a platform independent &lt;span class="caps"&gt;API&lt;/span&gt; that provides a consistent interface to the platform specific implementation. The &lt;span class="caps"&gt;APR&lt;/span&gt; code itself is pretty good documented. But i wouldn&amp;#8217;t say you&amp;#8217;d find plenty of resources on the web. Especially a simple example on how to program with the &lt;span class="caps"&gt;APR&lt;/span&gt; was missing for&amp;nbsp;me.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="example-program"&gt;
&lt;h2&gt;Example&amp;nbsp;program&lt;/h2&gt;
&lt;p&gt;I put together an example program which shows how to use the &lt;span class="caps"&gt;APR&lt;/span&gt;. This includes instructions on how to get the program compiled after you have written it. This seems to be so self-evident to people, that no one seems to write that up. The heart of this process lies in the usage of the &lt;code&gt;apr-config&lt;/code&gt;, or sometimes called &lt;code&gt;apr-1-config&lt;/code&gt; utility.&lt;/p&gt;
&lt;div class="section" id="preconditions"&gt;
&lt;h3&gt;Preconditions&lt;/h3&gt;
&lt;p&gt;Make sure you have the &lt;span class="caps"&gt;APR&lt;/span&gt; development files installed. Since i am mostly working with Debian based distributions, like Debian itself or Ubuntu, i install the libraries with my package management system. Of course make sure you install the &amp;#8220;-dev&amp;#8221; versions of &lt;span class="caps"&gt;APR&lt;/span&gt;. For me that have been the&amp;nbsp;packages&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;libapr1&lt;/li&gt;
&lt;li&gt;libapr1-dbg&lt;/li&gt;
&lt;li&gt;libapr1-dev&lt;/li&gt;
&lt;li&gt;libaprutil1&lt;/li&gt;
&lt;li&gt;libaprutil1-dbg&lt;/li&gt;
&lt;li&gt;libaprutil1-dev&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can get those packages by issuing the following command on the command line (this may of course vary if you are not using a Debian based distribution or if you install from&amp;nbsp;source):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ sudo apt-get install libapr1 libapr1-dbg libapr1-dev libaprutil1 libaprutil1-dbg libaprutil1-dev
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="program-code"&gt;
&lt;h3&gt;Program&amp;nbsp;code&lt;/h3&gt;
&lt;p&gt;The program itself is obviously a pretty easy one, it basically allocates resources from a memory pool managed through &lt;span class="caps"&gt;APR&lt;/span&gt; onto a struct and later simply prints the allocated values. The programs code is as&amp;nbsp;follows.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="compile-the-program"&gt;
&lt;h3&gt;Compile the&amp;nbsp;program&lt;/h3&gt;
&lt;p&gt;Now there comes the next crucial step in getting your program to fly. To do so you probably best export a variable as suggested by the &lt;code&gt;apr-1-config&lt;/code&gt; tool. Then you can go on an compile your program the &amp;#8220;normal&amp;#8221; way you&amp;#8217;d do that. If you do not want debug symbols compiled into your code, you of course would remove the &lt;code&gt;-g&lt;/code&gt; option in front of the &lt;code&gt;APR_LIBS&lt;/code&gt; variable:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$&amp;gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;APR_LIBS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`apr-1-config --cflags --cppflags --includes --ldflags --link-ld --libs`&amp;quot;&lt;/span&gt;
$&amp;gt; gcc -g simple_apr.c -o simple_apr &lt;span class="nv"&gt;$APR_LIBS&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;By executing the program your output should now look something like&amp;nbsp;that:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ ./simple_apr
Username: Jens Frey
Password: secret
Time: &lt;span class="m"&gt;1231102877630911&lt;/span&gt;
Time readable: Sun, &lt;span class="m"&gt;04&lt;/span&gt; Jan &lt;span class="m"&gt;2009&lt;/span&gt; &lt;span class="m"&gt;21&lt;/span&gt;:01:17 GMT
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;I hope you achieved similar&amp;nbsp;results.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="references"&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://apr.apache.org/"&gt;The &lt;span class="caps"&gt;APR&lt;/span&gt;&amp;nbsp;homepage&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://apr.apache.org/docs/apr/trunk/"&gt;The &lt;span class="caps"&gt;APR&lt;/span&gt; &lt;span class="caps"&gt;API&lt;/span&gt;&amp;nbsp;documentation&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://svn.apache.org/viewvc/apr/apr/trunk/docs/pool-design.html?view=co"&gt;Using &lt;span class="caps"&gt;APR&lt;/span&gt;&amp;nbsp;Pools&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a class="reference external" href="http://people.apache.org/~rooneg/talks/portable-c-with-apr/apr.html"&gt;Writing Portable C Code with &lt;span class="caps"&gt;APR&lt;/span&gt;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="Programming"></category><category term="APR"></category><category term="Apache"></category><category term="C"></category></entry><entry><title>Backing up roller weblogger</title><link href="https://datapile.coffeecrew.org/backing-up-roller-weblogger" rel="alternate"></link><published>2010-11-01T09:00:34+01:00</published><updated>2010-11-01T09:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-11-01:/backing-up-roller-weblogger</id><summary type="html">&lt;p class="first last"&gt;This guide will walk you through installing the PostgreSQL database for use in Apache&amp;nbsp;Roller.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;If you followed the &lt;a class="reference external" href="https://datapile.coffeecrew.org/setup-roller-weblogger-41-on-glassfish-v2"&gt;Setup Roller Weblogger 4.1 On Glassfish V2&lt;/a&gt; tutorial, or you do have a roller installation already in place, you probably want to back that up&amp;nbsp;somehow.&lt;/p&gt;
&lt;div class="section" id="backup-the-file-system"&gt;
&lt;h2&gt;Backup the file&amp;nbsp;system&lt;/h2&gt;
&lt;p&gt;Since I do not know where you possibly will have installed roller to, I am using the locations from the previous how to. The backup procedure should not be that complex after&amp;nbsp;all.&lt;/p&gt;
&lt;p&gt;The data residing on your filesystem (I know, the database resides on the file system too), is the data you uploaded into you blog. You do have a &lt;code&gt;/opt/roller/uploads&lt;/code&gt; directory for example. Depending on how many blogs you have created, there are numerous folders inside. Each sub-folder represents data for another blog. So if your blog is called &amp;#8220;datapile&amp;#8221;, then there will be a &amp;#8220;datapile&amp;#8221;&amp;nbsp;sub-folder.&lt;/p&gt;
&lt;p&gt;For the sake of simplicity you can of course just backup the whole &lt;code&gt;/opt/roller&lt;/code&gt; folder which should also save the custom themes you created eventually. If you installed it the way as described in the tutorial at the beginning, you do also backup search indexes and the glassfish installation with&amp;nbsp;this.&lt;/p&gt;
&lt;div class="admonition warning"&gt;
&lt;p class="first admonition-title"&gt;Warning&lt;/p&gt;
&lt;p class="last"&gt;You might not have deleted the &lt;code&gt;/opt/roller/tmp&lt;/code&gt; directory yet. You might backup this temporary files too in this case. If you backup the full &lt;code&gt;/opt/roller&lt;/code&gt; directory, you might remove the &lt;code&gt;/opt/roller/tmp&lt;/code&gt; folder manually, or at least move it to another location, so your compressed archive will not pack that (unnecessary) information too. A simple command line might look like as&amp;nbsp;follows:&lt;/p&gt;
&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;$ &lt;span class="nb"&gt;cd&lt;/span&gt; /opt/ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; tar cjvf /tmp/roller.tar.bz2 roller/
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="restore-the-file-system"&gt;
&lt;h2&gt;Restore the file&amp;nbsp;system&lt;/h2&gt;
&lt;p&gt;In order to restore the file system you have to recreate your installation and then copy the files back to the location where the installation can find them, or simply &lt;code&gt;untar&lt;/code&gt; your backed up &lt;code&gt;/opt/roller&lt;/code&gt; folder.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="backup-the-database"&gt;
&lt;h2&gt;Backup the&amp;nbsp;database&lt;/h2&gt;
&lt;p&gt;The database can be backed up pretty easily. The part to remember is that you &lt;em&gt;switch to the postgres user&lt;/em&gt; when you execute the &lt;code&gt;pg_dumpall &amp;gt; /tmp/rollerDb.dump&lt;/code&gt; command.&lt;/p&gt;
&lt;p&gt;The backup command order in this case&amp;nbsp;is:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$
        &lt;span class="c1"&gt;# su - postgres&lt;/span&gt;
        $ pg_dumpall &amp;gt; /tmp/rollerDb.dump
        $ pg_dumpall &lt;span class="p"&gt;|&lt;/span&gt; bzip2 &amp;gt; /tmp/rollerDb.dump.bz2 &lt;span class="c1"&gt;#bzipped version&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="restore-the-database"&gt;
&lt;h2&gt;Restore the&amp;nbsp;database&lt;/h2&gt;
&lt;p&gt;Restoring the full database is a pretty easy task. On a test installation I did, this worked like a charm. I really hope there&amp;#8217;s nothing more to add to&amp;nbsp;it.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$
        &lt;span class="c1"&gt;# su - postgres&lt;/span&gt;
        $ createdb rollerdb
        $ cat /tmp/rollerDb.dump.bz2 &lt;span class="p"&gt;|&lt;/span&gt; bunzip2 &lt;span class="p"&gt;|&lt;/span&gt; psql postgres
        $ psql -f /tmp/rollerDb.dump postgres &lt;span class="c1"&gt;#restore from non-compressed file&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After having played back the information into the database, you might need to adopt the postgres passwords back to the values you have set them during your installation on the servlet container (in this case glassfish). You might otherwise end up with some ugly exceptions. To do that start the &lt;code&gt;psql&lt;/code&gt; tool as postgres user and enter the following statements (of course adopt to your password ;)&amp;nbsp;).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;@&lt;/span&gt;&lt;span class="n"&gt;sigusr1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="err"&gt;$&lt;/span&gt; &lt;span class="n"&gt;psql&lt;/span&gt;
&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;alter&lt;/span&gt; &lt;span class="k"&gt;user&lt;/span&gt; &lt;span class="n"&gt;roller&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;roller&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt; &lt;span class="k"&gt;alter&lt;/span&gt; &lt;span class="k"&gt;user&lt;/span&gt; &lt;span class="n"&gt;postgres&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;postgres&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="references"&gt;
&lt;h2&gt;References&lt;/h2&gt;
&lt;p&gt;Especially when it comes to handling the database stuff, the PostgreSQL documentation was very&amp;nbsp;helpful.&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="http://www.postgresql.org/docs/8.1/static/backup.html"&gt;http://www.postgresql.org/docs/8.1/static/backup.html&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Glassfish"></category><category term="Roller"></category><category term="Backup"></category></entry><entry><title>Switching roller from Derby to PostgreSQL</title><link href="https://datapile.coffeecrew.org/switching-roller-from-derby-to-postgresql" rel="alternate"></link><published>2010-10-31T14:00:34+01:00</published><updated>2010-10-31T14:00:34+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-10-31:/switching-roller-from-derby-to-postgresql</id><summary type="html">&lt;p class="first last"&gt;This guide will walk you through installing the PostgreSQL database for use in Apache&amp;nbsp;Roller.&lt;/p&gt;
</summary><content type="html">&lt;p&gt;Since Roller seems to have problems with the Glassfish built-in Derby database, especially when it comes to &amp;#8220;Full preview&amp;#8221; (you might end up with an &lt;span class="caps"&gt;HTTP&lt;/span&gt; 404 error code if you try to preview your post), you might want to switch your Roller installation to &lt;a class="reference external" href="https://www.postgresql.org/"&gt;PostgreSQL&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This article will explain, how you can switch the installed Roller instance from Glassfishs built-in derby database to the PostgreSQL&amp;nbsp;database.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;This was implemented/tested with Roller Weblogger 4.1 and Glassfish&amp;nbsp;v2UR2&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="quick-install"&gt;
&lt;h2&gt;Quick&amp;nbsp;install&lt;/h2&gt;
&lt;p&gt;For the people who don&amp;#8217;t care if anything goes wrong or just don&amp;#8217;t like to type at all, &lt;a class="reference external" href="https://gist.github.com/authsec/a048fb1d1ade8004dd55f4ede17c077b"&gt;here is a little script&lt;/a&gt;, which might help you save a few keystrokes. Just be aware of the fact that you might have to change a few variables inside the&amp;nbsp;script.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="manual-installation"&gt;
&lt;h2&gt;Manual&amp;nbsp;installation&lt;/h2&gt;
&lt;p&gt;This describes basically what the script in the quick installation tries to achieve by being&amp;nbsp;run.&lt;/p&gt;
&lt;div class="section" id="prerequisites"&gt;
&lt;h3&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;As with the roller install itself, you need of course a few things before you can start. In this case you need of course the &lt;a class="reference external" href="https://www.postgresql.org/"&gt;PostgreSQL&lt;/a&gt; database itself and a &lt;span class="caps"&gt;JDBC&lt;/span&gt; driver to attach roller to the&amp;nbsp;database.&lt;/p&gt;
&lt;p&gt;The installation of the database depends on the type of operating system you are using. I describe the setup using a &lt;a class="reference external" href="http://www.debian.org/"&gt;Debian&lt;/a&gt; based system, since this is so nice and easy&amp;nbsp;:).&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="get-the-database-driver"&gt;
&lt;h3&gt;Get the database&amp;nbsp;driver&lt;/h3&gt;
&lt;p&gt;To enable Glassfish to talk to your postgres installation, you have to supply it some code. Glassfish likes Java the best and you can get some &lt;span class="caps"&gt;JDBC&lt;/span&gt; drivers from &lt;a class="reference external" href="http://jdbc.postgresql.org/download.html"&gt;here&lt;/a&gt; , but specifically the &lt;a class="reference external" href="http://jdbc.postgresql.org/download/postgresql-8.3-604.jdbc3.jar"&gt;postgresql-8.3-604.jdbc3.jar&lt;/a&gt; is of interest to&amp;nbsp;us.&lt;/p&gt;
&lt;p&gt;So go get the &lt;span class="caps"&gt;JDBC&lt;/span&gt; driver and save it in &lt;code&gt;/opt/roller/glassfish/domains/roller/lib&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="install-database"&gt;
&lt;h3&gt;Install&amp;nbsp;database&lt;/h3&gt;
&lt;p&gt;For a debian based system just enter the following command as user root (or prefix it with sudo on ubuntu). You might of course have a newer version of postgresql available with you current&amp;nbsp;installation.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ aptitude install postgresql-8.1
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After the installation finishes, you might want to create the database roller will be accessing later and also create a user for use with roller. This can be achieved by entering the following sequence of commands into a terminal of your&amp;nbsp;choice.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;Be aware of the fact that you have to &lt;em&gt;execute&lt;/em&gt; the commands as user &lt;em&gt;postgres&lt;/em&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$
        &lt;span class="c1"&gt;# Get root&lt;/span&gt;
        su -

        &lt;span class="c1"&gt;# Get postgres user&lt;/span&gt;
        su - postgres

        &lt;span class="c1"&gt;# create database&lt;/span&gt;
        createdb rollerdb

        &lt;span class="c1"&gt;# create roller user&lt;/span&gt;
        createuser roller
        &lt;span class="c1"&gt;# Answers&lt;/span&gt;
        &lt;span class="c1"&gt;# Shall the new role be a superuser? (y/n) n&lt;/span&gt;
        &lt;span class="c1"&gt;# Shall the new role be allowed to create databases? (y/n) n&lt;/span&gt;
        &lt;span class="c1"&gt;# Shall the new role be allowed to create more new roles? (y/n) n&lt;/span&gt;

        &lt;span class="c1"&gt;# Enter postgres prompt&lt;/span&gt;
        psql
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When you are in the prompt which will look something like&amp;nbsp;this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Welcome&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;psql&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="n"&gt;PostgreSQL&lt;/span&gt; &lt;span class="n"&gt;interactive&lt;/span&gt; &lt;span class="n"&gt;terminal&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;

&lt;span class="k"&gt;Type&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;copyright&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;distribution&lt;/span&gt; &lt;span class="n"&gt;terms&lt;/span&gt;
                &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="k"&gt;SQL&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;
                &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;help&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;psql&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;
                &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="k"&gt;g&lt;/span&gt; &lt;span class="k"&gt;or&lt;/span&gt; &lt;span class="k"&gt;terminate&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;semicolon&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="k"&gt;execute&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;
                &lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;q&lt;/span&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;quit&lt;/span&gt;

&lt;span class="n"&gt;postgres&lt;/span&gt;&lt;span class="o"&gt;=#&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Enter the following &lt;span class="caps"&gt;SQL&lt;/span&gt; statements which change the passwords for the roller
and postgres user&amp;nbsp;accordingly:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;alter&lt;/span&gt; &lt;span class="k"&gt;user&lt;/span&gt; &lt;span class="n"&gt;roller&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;roller&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;alter&lt;/span&gt; &lt;span class="k"&gt;user&lt;/span&gt; &lt;span class="n"&gt;postgres&lt;/span&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;password&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;postgres&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;You are now finished using the postgres user. You may want to continue as user roller with the following&amp;nbsp;commands.&lt;/p&gt;
&lt;p&gt;If you followed the &lt;a class="reference external" href="https://datapile.coffeecrew.org/setup-roller-weblogger-41-on-glassfish-v2"&gt;Setup Roller Weblogger 4.1 On Glassfish V2&lt;/a&gt;  tutorial, you do have to do an additional step to get rid of the previously assigned &lt;span class="caps"&gt;JDBC&lt;/span&gt; connection; that is deleting the &lt;span class="caps"&gt;JDBC&lt;/span&gt; connection pool. Aside from that we simply create a &lt;span class="caps"&gt;JDBC&lt;/span&gt; connection pool and the according resource. Once that is done you might want to start configuring your roller&amp;nbsp;installation.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$
        &lt;span class="c1"&gt;#if you followed glassfish ... (cleans jdbc resource too)&lt;/span&gt;
        ./bin/asadmin delete-jdbc-connection-pool --cascade rollerpool

        ./bin/asadmin create-jdbc-connection-pool
        --datasourceclassname org.postgresql.ds.PGSimpleDataSource &lt;span class="se"&gt;\&lt;/span&gt;
        --restype javax.sql.DataSource &lt;span class="se"&gt;\&lt;/span&gt;
        --property &lt;span class="nv"&gt;portNumber&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;5432&lt;/span&gt;:password&lt;span class="o"&gt;=&lt;/span&gt;roller:user&lt;span class="o"&gt;=&lt;/span&gt;roller:serverName&lt;span class="o"&gt;=&lt;/span&gt;localhost:databaseName&lt;span class="o"&gt;=&lt;/span&gt;rollerdb &lt;span class="se"&gt;\&lt;/span&gt;
        rollerpool

        ./bin/asadmin ping-connection-pool rollerpool
        ./bin/asadmin create-jdbc-resource --connectionpoolid&lt;span class="o"&gt;=&lt;/span&gt;rollerpool jdbc/rollerdb
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Once that is finished, you should restart Glassfish in order to make changes effective. This is done through the following&amp;nbsp;command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ su - roller -c &lt;span class="s2"&gt;&amp;quot;cd glassfish; ./bin/asadmin stop-domain roller&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
                                   su - roller -c &lt;span class="s2"&gt;&amp;quot;cd glassfish; ./bin/asadmin start-domain roller&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;When you have finished all that, you now should be able to point you browser to &lt;a class="reference external" href="http://localhost:8080/blogs"&gt;http://localhost:8080/blogs&lt;/a&gt; and start configuring your Roller installation. Have&amp;nbsp;fun.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Glassfish"></category><category term="Roller"></category><category term="Database"></category><category term="PostgreSQL"></category></entry><entry><title>Free iPhone Ringtone #1</title><link href="https://datapile.coffeecrew.org/free-iphone-ringtone-1" rel="alternate"></link><published>2010-10-31T11:11:11+01:00</published><updated>2010-10-31T11:11:11+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-10-31:/free-iphone-ringtone-1</id><summary type="html">&lt;p class="first last"&gt;Just listen&amp;nbsp;&amp;#8230;&lt;/p&gt;
</summary><content type="html">&lt;p&gt;I created a free drum and bassy iPhone ringtone, install it if you like&amp;nbsp;:)&lt;/p&gt;
&lt;audio controls="controls"&gt;
      &lt;source src="https://datapile.coffeecrew.org/downloads/nimmemol-ab.m4r" type="audio/mp4"&gt;
      Your browser does not support the &lt;code&gt;audio&lt;/code&gt; element.
&lt;/audio&gt;&lt;p&gt;&lt;a class="reference external" href="https://datapile.coffeecrew.org/downloads/nimmemol-ab.m4r"&gt;Download iPhone Ringtone (&lt;span class="caps"&gt;M4R&lt;/span&gt;)&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Hope you have fun with it&amp;nbsp;&amp;#8230;&lt;/p&gt;
</content><category term="Music"></category><category term="Original"></category><category term="Ringtone"></category></entry><entry><title>Setup roller weblogger 4.1 on Glassfish v2</title><link href="https://datapile.coffeecrew.org/setup-roller-weblogger-41-on-glassfish-v2" rel="alternate"></link><published>2010-10-31T11:11:11+01:00</published><updated>2010-10-31T11:11:11+01:00</updated><author><name>Jens Frey</name></author><id>tag:datapile.coffeecrew.org,2010-10-31:/setup-roller-weblogger-41-on-glassfish-v2</id><summary type="html">&lt;p class="first last"&gt;This guide will walk you through installing the Apache Roller Blog Software, version&amp;nbsp;4.1(-dev).&lt;/p&gt;
</summary><content type="html">&lt;p&gt;This guide will walk you through installing the Apache Roller Blog Software, version 4.1(-dev). The installation I did, resides on a Debian based distribution (Ubuntu works too, just prefix the commands with&amp;nbsp;sudo).&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;This was implemented/tested with Roller Weblogger 4.1 and Glassfish&amp;nbsp;v2UR2&lt;/p&gt;
&lt;/div&gt;
&lt;div class="section" id="quick-install"&gt;
&lt;h2&gt;Quick&amp;nbsp;install&lt;/h2&gt;
&lt;p&gt;This is for the impatient, you need to have &lt;code&gt;jar&lt;/code&gt; and &lt;code&gt;wget&lt;/code&gt; in your $&lt;span class="caps"&gt;PATH&lt;/span&gt;&lt;/p&gt;
&lt;p&gt;If you just want to have roller to be set up for you to do e.g. some work on roller templates, or just to basically play with it a bit, here is the real quick deal for you (This will install everything into&amp;nbsp;/opt/roller).&lt;/p&gt;
&lt;p&gt;Download the &lt;a class="reference external" href="https://raw.githubusercontent.com/authsec/examples/master/sh/rollerGlassfish.sh"&gt;automated installer script&lt;/a&gt;, save it to e.g. your home directory. Then call the script like &lt;code&gt;./rollerGlassfish.sh realLongKey1 realLongKey2 run-as-username run-as-groupname&lt;/code&gt;.&lt;/p&gt;
&lt;div class="admonition note"&gt;
&lt;p class="first admonition-title"&gt;Note&lt;/p&gt;
&lt;p class="last"&gt;You can get those long keys easily from &lt;a class="reference external" href="https://www.grc.com/passwords.htm"&gt;&lt;span class="caps"&gt;GRC&lt;/span&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="manual-installation"&gt;
&lt;h2&gt;Manual&amp;nbsp;installation&lt;/h2&gt;
&lt;p&gt;The following text basically describes what the script is automatically doing for you. This way you can change the according parameters which will affect your installation. Most probably you will just have to change the following variables inside the install&amp;nbsp;script.&lt;/p&gt;
&lt;div class="section" id="prerequisites"&gt;
&lt;h3&gt;Prerequisites&lt;/h3&gt;
&lt;p&gt;You have to install a few things before you can actually start installing roller on your system. At first you need to be sure that the &lt;code&gt;jar&lt;/code&gt; command is installed on your system, since this is required for the build you will be doing on your system. On a Debian based system you can do that with the following&amp;nbsp;command:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gp"&gt;root@sigusr1:$&lt;/span&gt; aptitude install sun-java5-jdk
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After the &lt;span class="caps"&gt;JDK&lt;/span&gt; installation you basically have everything ready to go, but wait if you want to use my &lt;a class="reference external" href="https://raw.githubusercontent.com/authsec/examples/master/sh/rollerGlassfish.sh"&gt;automated installer script&lt;/a&gt; you need to have the &lt;code&gt;wget&lt;/code&gt; command installed too, since the script tries to download the Glassfish application server and the given Apache Roller version by itself in order to be able to install it for&amp;nbsp;you.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ &lt;span class="c1"&gt;#&lt;/span&gt;
        &lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/opt/roller
        &lt;span class="nv"&gt;TARGET_TMP&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;TARGET&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;/tmp
        &lt;span class="nv"&gt;UPLOADS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$TARGET&lt;/span&gt;/uploads
        &lt;span class="nv"&gt;THEMES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$TARGET&lt;/span&gt;/themes
        &lt;span class="nv"&gt;PLANET_CACHE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$TARGET&lt;/span&gt;/planetcache
        &lt;span class="nv"&gt;SEARCH_INDEX&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nv"&gt;$TARGET&lt;/span&gt;/searchindex
        &lt;span class="c1"&gt;#ROLLER_FILENAME=&amp;quot;apache-roller-4.0.1-snapshot-20080211.tar.gz&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;ROLLER_FILENAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;apache-roller-4.1-snapshot-m1.tar.gz&amp;quot;&lt;/span&gt;
        &lt;span class="nv"&gt;CTX_ROOT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;blogs&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Gist: &lt;a class="reference external" href="https://gist.github.com/authsec/455940a3f6bd5673c1c9dd16ea4ec0af"&gt;https://gist.github.com/authsec/455940a3f6bd5673c1c9dd16ea4ec0af&lt;/a&gt;&lt;/p&gt;
&lt;ul class="simple"&gt;
&lt;li&gt;&lt;a class="reference external" href="https://glassfish.dev.java.net/downloads/v2ur2-b04.html"&gt;Download&amp;nbsp;Glassfish&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="section" id="choose-install-location"&gt;
&lt;h4&gt;Choose install&amp;nbsp;location&lt;/h4&gt;
&lt;p&gt;As a last prerequisite step you need to choose an install location. I chose &lt;code&gt;/opt/roller&lt;/code&gt; to be the install location of my&amp;nbsp;choice.&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="setup-user-and-group"&gt;
&lt;h3&gt;Setup user and&amp;nbsp;group&lt;/h3&gt;
&lt;p&gt;As you probably won&amp;#8217;t be running roller as root, you&amp;#8217;ll have to setup a user and a group for your roller installation. This, again on Debian based systems, is done using the following&amp;nbsp;commands:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$
        mkdir /opt/roller
        addgroup --system roller
        adduser --home /opt/roller &lt;span class="se"&gt;\&lt;/span&gt;
        --shell /bin/bash &lt;span class="se"&gt;\&lt;/span&gt;
        --no-create-home &lt;span class="se"&gt;\&lt;/span&gt;
        --ingroup roller &lt;span class="se"&gt;\&lt;/span&gt;
        --disabled-password &lt;span class="se"&gt;\&lt;/span&gt;
        --system roller
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="setup-glassfish"&gt;
&lt;h3&gt;Setup&amp;nbsp;Glassfish&lt;/h3&gt;
&lt;p&gt;I assume you downloaded roller and glassfish into &lt;code&gt;/opt/roller/tmp&lt;/code&gt;. In order to get the Glassfish installation working, you need to have &lt;code&gt;JAVA_HOME&lt;/code&gt; exported into your environment. Then you can start running the Glassfish installer. On a bourne shell do (inside the directory where you saved the Glassfish&amp;nbsp;installer):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$
        &lt;span class="nb"&gt;cd&lt;/span&gt; /opt/roller/tmp
        &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;JAVA_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;/usr/lib/jvm/java-1.5.0-sun
        java -Xmx256m -jar glassfish-installer-v2ur2-b04-linux.jar
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;The installer will ask you if you are willing to accept the license agreement. If you are running this on a remote machine, it will ask you on the command line, whether or not you are willing to accept; on your local machine it will show a nice graphical dialog for you to accept. After that setup is completed, do (machine name is included, so you&amp;#8217;re able to see in which directory I&amp;#8217;m&amp;nbsp;operating)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;j@sigusr1:/opt/roller/tmp$ mv glassfish ..
j@sigusr1:/opt/roller/tmp$ &lt;span class="nb"&gt;cd&lt;/span&gt; ../glassfish/
j@sigusr1:/opt/roller/glassfish$ chmod -R +x lib/ant/bin
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;As a next step you have to setup a domain for roller within Glassfish, this is a rather easy task to&amp;nbsp;do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;j@sigusr1:/opt/roller/glassfish$ lib/ant/bin/ant -f setup.xml -Ddomain.name&lt;span class="o"&gt;=&lt;/span&gt;roller
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now start Glassfish, so we can do s.th. with it&amp;nbsp;&amp;#8230;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;j@sigusr1:/opt/roller/glassfish$ ./bin/asadmin start-domain roller
&lt;/pre&gt;&lt;/div&gt;
&lt;div class="section" id="setup-built-in-database"&gt;
&lt;h4&gt;Setup built in&amp;nbsp;database&lt;/h4&gt;
&lt;p&gt;The following series of command all takes place inside the &lt;code&gt;/opt/roller/glassfish&lt;/code&gt; directory.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ ./bin/asadmin create-jdbc-connection-pool &lt;span class="se"&gt;\&lt;/span&gt;
        --datasourceclassname org.apache.derby.jdbc.EmbeddedDataSource &lt;span class="se"&gt;\&lt;/span&gt;
        --property &lt;span class="nv"&gt;databaseName&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="se"&gt;\$\{&lt;/span&gt;com.sun.aas.instanceRoot&lt;span class="se"&gt;\}&lt;/span&gt;/databases/rollerdb:&lt;span class="se"&gt;\&lt;/span&gt;
        &lt;span class="nv"&gt;connectionAttributes&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="se"&gt;\;&lt;/span&gt;create&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; rollerpool
        ./bin/asadmin ping-connection-pool rollerpool
        ./bin/asadmin create-jdbc-resource --connectionpoolid&lt;span class="o"&gt;=&lt;/span&gt;rollerpool jdbc/rollerdb
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="setup-jndi-mail-resource"&gt;
&lt;h4&gt;Setup &lt;span class="caps"&gt;JNDI&lt;/span&gt; mail&amp;nbsp;resource&lt;/h4&gt;
&lt;p&gt;If that would work in roller 4.1(-dev) with Glassfish, you would&amp;nbsp;do:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ ./bin/asadmin create-javamail-resource --mailhost localhost --mailuser rollermail --fromaddress roller&lt;span class="se"&gt;\@&lt;/span&gt;blogs&lt;span class="se"&gt;\.&lt;/span&gt;coffeecrew&lt;span class="se"&gt;\.&lt;/span&gt;org mail/Session
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="securing-glassfish"&gt;
&lt;h4&gt;Securing&amp;nbsp;Glassfish&lt;/h4&gt;
&lt;p&gt;Some of you might be thinking about running Glassfish behind an Apache reverse proxy. This is exactly what I am thinking about. So if you plan to do that, it might come in handy that Glassfish would only accept connections from the local machine and therefore not let anyone easily bypass your secured apache instance. First we delete both &lt;span class="caps"&gt;HTTP&lt;/span&gt; listener instances that are listening on ports 8080 and 8443 and then recreate the 8080 one. As we are proxying with apache, we do not need the &lt;span class="caps"&gt;SSL&lt;/span&gt; listener (port 8443)&amp;nbsp;anyway.&lt;/p&gt;
&lt;p&gt;And while we&amp;#8217;re just doing it, let&amp;#8217;s rebind those &lt;span class="caps"&gt;IIOP&lt;/span&gt; services&amp;nbsp;to.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$
        ./bin/asadmin delete-http-listener http-listener-1
        ./bin/asadmin delete-http-listener http-listener-2
        ./bin/asadmin create-http-listener --listeneraddress &lt;span class="m"&gt;127&lt;/span&gt;.0.0.1 --listenerport &lt;span class="m"&gt;8080&lt;/span&gt; --acceptorthreads &lt;span class="m"&gt;32&lt;/span&gt; --enabled&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt; --defaultvs server --securityenabled&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt; roller-listener

        &lt;span class="c1"&gt;# Configure admin page to listen locally too&lt;/span&gt;
        ./bin/asadmin &lt;span class="nb"&gt;set&lt;/span&gt; server.http-service.http-listener.admin-listener.address&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1

        &lt;span class="c1"&gt;# Disable IIOP stuff to listen globally, we do not need that right now.&lt;/span&gt;
        ./bin/asadmin &lt;span class="nb"&gt;set&lt;/span&gt; server.iiop-service.iiop-listener.SSL.address&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1
        ./bin/asadmin &lt;span class="nb"&gt;set&lt;/span&gt; server.iiop-service.iiop-listener.SSL_MUTUALAUTH.address&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1
        ./bin/asadmin &lt;span class="nb"&gt;set&lt;/span&gt; server.iiop-service.iiop-listener.orb-listener-1.address&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;127&lt;/span&gt;.0.0.1

        &lt;span class="c1"&gt;# Disable JMX connector for remote access&lt;/span&gt;
        ./bin/asadmin &lt;span class="nb"&gt;set&lt;/span&gt; server.admin-service.jmx-connector.system.enabled&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;

        &lt;span class="c1"&gt;# JMS&lt;/span&gt;
        ./bin/asadmin &lt;span class="nb"&gt;set&lt;/span&gt; server.jms-service.jms-host.default_JMS_host.host&lt;span class="o"&gt;=&lt;/span&gt;localhost

        &lt;span class="c1"&gt;# Require client authentication, just to be sure ...&lt;/span&gt;
        ./bin/asadmin &lt;span class="nb"&gt;set&lt;/span&gt; server.iiop-service.client-authentication-required&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now, to make changes effective we have to restart Glassfish. But before that we want to make sure everything has correct permissions for our newly created user, won&amp;#8217;t&amp;nbsp;we?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ &lt;span class="c1"&gt;# Fix permissions&lt;/span&gt;
        chown -R roller:roller /opt/roller

        &lt;span class="c1"&gt;# Restart gf to make changes effective&lt;/span&gt;
        ./bin/asadmin stop-domain roller

        &lt;span class="c1"&gt;# Start as roller user&lt;/span&gt;
        su -c &lt;span class="s2"&gt;&amp;quot;./bin/asadmin start-domain roller&amp;quot;&lt;/span&gt; roller
&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;/div&gt;
&lt;div class="section" id="setup-and-configure-roller"&gt;
&lt;h3&gt;Setup and configure&amp;nbsp;Roller&lt;/h3&gt;
&lt;p&gt;Setting up Roller 4.1(-dev) is pretty easy. We start by extracting the tarball we downloaded earlier. Since we have set our theme directory to be &lt;code&gt;/opt/roller/themes&lt;/code&gt; we do have to copy the themes we want to use there. As a next step we &lt;em&gt;really want to have security keys **changed**&lt;/em&gt;. This is done by either editing the &lt;code&gt;security.xml&lt;/code&gt; file manually or using a &lt;code&gt;sed&lt;/code&gt; expression. After we have changed the keys, we can pack us a nice &lt;code&gt;roller.war&lt;/code&gt; file. The few commands below execute the described&amp;nbsp;actions.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ &lt;span class="c1"&gt;#Roller setup&lt;/span&gt;
        &lt;span class="nb"&gt;cd&lt;/span&gt; /opt/roller/tmp
        tar zxvf apache-roller-4.1-snapshot-m1.tar.gz

        &lt;span class="c1"&gt;#Copy themes&lt;/span&gt;
        &lt;span class="nb"&gt;cd&lt;/span&gt; apache-roller*/webapp/roller/themes
        cp -vR * /opt/roller/themes

        &lt;span class="nb"&gt;cd&lt;/span&gt; ../WEB-INF
        cp security.xml /tmp

        &lt;span class="c1"&gt;# actually change keys&lt;/span&gt;
        cat /tmp/security.xml &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
        sed &lt;span class="s2"&gt;&amp;quot;s/name=\&amp;quot;key\&amp;quot; value=\&amp;quot;anonymous\&amp;quot;/name=\&amp;quot;key\&amp;quot; value=\&amp;quot;myOwnLongKey\&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
        sed &lt;span class="s2"&gt;&amp;quot;s/name=\&amp;quot;key\&amp;quot; value=\&amp;quot;rollerlovesacegi\&amp;quot;/name=\&amp;quot;key\&amp;quot; value=\&amp;quot;myOwnLongKey2\&amp;quot;/&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
        &amp;gt; security.xml

        &lt;span class="c1"&gt;#Pack war file&lt;/span&gt;
        &lt;span class="nb"&gt;cd&lt;/span&gt; ..
        jar cvf ../../../roller.war *
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now we&amp;#8217;re nearly finished &amp;#8230; just a few seconds away from experimenting with your own roller instance now :). As a next necessary step we need to create a custom configuration file for Roller. That configuration file has to be saved in &lt;code&gt;/opt/roller/glassfish/domains/roller/lib/classes/roller-custom.properties&lt;/code&gt; to take effect. The configuration file can be built as&amp;nbsp;follows:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ &lt;span class="c1"&gt;#Build roller-custom.properties&lt;/span&gt;
cat &lt;span class="s"&gt;&amp;lt;&amp;lt;EOF &amp;gt; $TARGET/glassfish/domains/roller/lib/classes/roller-custom.properties&lt;/span&gt;

&lt;span class="s"&gt;installation.type=auto&lt;/span&gt;

&lt;span class="s"&gt;#Should work with JNDI but maybe not with glassfish&lt;/span&gt;
&lt;span class="s"&gt;mail.configurationType=properties&lt;/span&gt;
&lt;span class="s"&gt;mail.hostname=localhost&lt;/span&gt;

&lt;span class="s"&gt;planet.aggregator.enabled=true&lt;/span&gt;
&lt;span class="s"&gt;uploads.dir=$UPLOADS&lt;/span&gt;
&lt;span class="s"&gt;themes.dir=$THEMES&lt;/span&gt;
&lt;span class="s"&gt;search.index.dir=$SEARCH_INDEX&lt;/span&gt;
&lt;span class="s"&gt;planet.aggregator.cache.dir=$PLANET_CACHE&lt;/span&gt;
&lt;span class="s"&gt;EOF&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Now that the configuration is in place, we are finally ready to deploy the Roller application. With the deployment we are able to specify a context root, which is the (&lt;span class="caps"&gt;URL&lt;/span&gt;) location where your application can be reached later on. So if you specify &lt;code&gt;blogs&lt;/code&gt; then your application can later be accessed at &lt;code&gt;http://your.example.com:8080/blogs&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ &lt;span class="c1"&gt;#Deploy application&lt;/span&gt;
        &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="nv"&gt;$TARGET&lt;/span&gt;/glassfish
        ./bin/asadmin deploy --contextroot blogs ../tmp/roller.war
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;Just to be sure everything you&amp;#8217;ve installed so far has correct permission, you might want to run the following commands again. It fixes your permissions and runs Glassfish as roller&amp;nbsp;user.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;root@sigusr1:$ &lt;span class="c1"&gt;# Fix permissions&lt;/span&gt;
        chown -R roller:roller /opt/roller

        &lt;span class="c1"&gt;#Restart gf to make changes effective&lt;/span&gt;
        ./bin/asadmin stop-domain roller

        &lt;span class="c1"&gt;# Start as roller user&lt;/span&gt;
        su -c &lt;span class="s2"&gt;&amp;quot;./bin/asadmin start-domain roller&amp;quot;&lt;/span&gt; roller
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;After you&amp;#8217;ve done all that you now should have a ready to go roller installation. Now go visit &lt;code&gt;http://localhost:8080/blogs&lt;/code&gt; and configure your shiny new roller installation. It is pretty much self explanatory, but if you need further assistance, you might want to have a look into the installation guide, which you can get &lt;a class="reference external" href="http://roller.apache.org/download.cgi"&gt;here&lt;/a&gt; (see chapter&amp;nbsp;8ff).&lt;/p&gt;
&lt;p&gt;Now after you&amp;#8217;ve set up everything exactly as you like, you should change &lt;code&gt;/opt/roller/glassfish/domains/roller/lib/classes/roller-custom.properties&lt;/code&gt; to read &lt;code&gt;installation.type=manual&lt;/code&gt;&lt;/p&gt;
&lt;/div&gt;
&lt;/div&gt;
</content><category term="Infrastructure"></category><category term="Glassfish"></category><category term="Roller"></category></entry></feed>