<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Backing up roller weblogger - The Datapile</title>




<meta name="description" content="If you followed the Setup roller weblogger 4.1 on Glassfish v2 tutorial, or you do have a roller installation already in place, you probably want to back that up somehow.">




<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="The Datapile">
<meta property="og:title" content="Backing up roller weblogger">


  <link rel="canonical" href="https://datapile.coffeecrew.org/backing-up-roller-weblogger/">
  <meta property="og:url" content="https://datapile.coffeecrew.org/backing-up-roller-weblogger/">



  <meta property="og:description" content="If you followed the Setup roller weblogger 4.1 on Glassfish v2 tutorial, or you do have a roller installation already in place, you probably want to back that up somehow.">



  <meta name="twitter:site" content="@authsec">
  <meta name="twitter:title" content="Backing up roller weblogger">
  <meta name="twitter:description" content="If you followed the Setup roller weblogger 4.1 on Glassfish v2 tutorial, or you do have a roller installation already in place, you probably want to back that up somehow.">
  <meta name="twitter:url" content="https://datapile.coffeecrew.org/backing-up-roller-weblogger/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2010-11-01T09:00:34+01:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Jens Frey",
      "url" : "https://datapile.coffeecrew.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://datapile.coffeecrew.org/feed.xml" type="application/atom+xml" rel="alternate" title="The Datapile Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://datapile.coffeecrew.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://datapile.coffeecrew.org/">The Datapile</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/year-archive/">Archive</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://mmistakes.github.io/minimal-mistakes/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/categories/">Categories archive</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/tags/">Tags</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://datapile.coffeecrew.org/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">Backing up roller weblogger</li>
      
    
  </ol>
</nav>
  


<div id="main" role="main">
  


  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="https://datapile.coffeecrew.org/images/me.png" class="author__avatar" alt="" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name"></h3>
    
      <p class="author__bio" itemprop="description">
        Developer. Musician.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">Lörrach</span>
        </li>
      

      

      

      

      
        <li>
          <a href="https://twitter.com/authsec" itemprop="sameAs">
            <i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      
        <li>
          <a href="https://plus.google.com/+JensFrey" itemprop="sameAs">
            <i class="fa fa-fw fa-google-plus-square" aria-hidden="true"></i> Google+
          </a>
        </li>
      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/authsec" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      
        <li>
          <a href="https://www.youtube.com/user/../c/JensFrey" itemprop="sameAs">
            <i class="fa fa-fw fa-youtube-square" aria-hidden="true"></i> YouTube
          </a>
        </li>
      

      
        <li>
          <a href="https://soundcloud.com/john-c-flow" itemprop="sameAs">
            <i class="fa fa-fw fa-soundcloud" aria-hidden="true"></i> Soundcloud
          </a>
        </li>
      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  
  <img src="/images/software.png" alt="Software" style="padding-bottom: 1em;">
    
    <div><a href="" class="badge1" data-badge="4.1">Roller Weblogger</a></div>
    
    <div><a href="" class="badge1" data-badge="v2UR2">Glassfish</a></div>
    
    
  
  </div>



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Backing up roller weblogger">
    <meta itemprop="description" content="If you followed the Setup roller weblogger 4.1 on Glassfish v2 tutorial, or you do have a roller installation already in place, you probably want to back that up somehow.">
    <meta itemprop="datePublished" content="November 01, 2010">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Backing up roller weblogger
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  2 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>If you followed the <a href="/setup-roller-weblogger-4-1-on-glassfish-v2/">Setup roller weblogger 4.1 on Glassfish v2</a> tutorial, or you do have a roller installation already in place, you probably want to back that up somehow.</p>

<h2 id="backup-the-file-system">Backup the file system</h2>

<p>Since I do not know where you possibly will have installed roller to, I am using the locations from the previous howto. The backup procedure should not be that complex after all.</p>

<p>The data residing on your filesystem (I know, the database resides on the file system too), is the data you uploaded into you blog. You do have a <code class="highlighter-rouge">/opt/roller/uploads</code> directory for example. Depending on how many blogs you have created, there are numerous folders inside. Each sub-folder represents data for another blog. So if your blog is called <q>datapile</q>, then there will be a <q>datapile</q> sub-folder.</p>

<p>For the sake of simplicity you can of course just backup the whole <code class="highlighter-rouge">/opt/roller</code> folder which should also save the custom themes you created eventually. If you installed it the way as described in the tutorial at the beginning, you do also backup search indexes and the glassfish installation with this.</p>

<p class="notice--warning"><strong>Caution:</strong> You might not have deleted the <code class="highlighter-rouge">/opt/roller/tmp</code> directory yet. You might backup this temporary files too in this case. If you backup the full <code class="highlighter-rouge">/opt/roller</code> directory, you might remove the <code class="highlighter-rouge">/opt/roller/tmp</code> folder manually, or at least move it to another location, so your compressed archive will not pack that (unnecessary) information too. A simple command line might look like as follows:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span><span class="nb">cd</span> /opt/ <span class="o">&amp;&amp;</span> tar cjvf /tmp/roller.tar.bz2 roller/
</code></pre>
</div>

<h2 id="restore-the-file-system">Restore the file system</h2>

<p>In order to restore the file system you have to recreate your installation and then copy the files back to the location where the installation can find them, or simply untar your backed up <code class="highlighter-rouge">/opt/roller</code> folder.</p>

<h2 id="backup-the-database">Backup the database</h2>

<p>The database can be backed up pretty easily. The part to remember is that you <em>switch to the postgres user</em> when you execute the <code class="highlighter-rouge">pg_dumpall &gt; /tmp/rollerDb.dump</code> command.</p>

<p>The backup command order in this case is:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>root@sigusr1:<span class="err">$</span>
	       <span class="c"># su - postgres</span>
	       <span class="nv">$ </span>pg_dumpall &gt; /tmp/rollerDb.dump
	       <span class="nv">$ </span>pg_dumpall | bzip2 &gt; /tmp/rollerDb.dump.bz2 <span class="c">#bzipped version</span>
</code></pre>
</div>

<h2 id="restore-the-database">Restore the database</h2>

<p>Restoring the full database is a pretty easy task. On a test installation I did, this worked like a charm. I really hope there’s nothing more to add to it.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>root@sigusr1:<span class="err">$</span>
	       <span class="c"># su - postgres</span>
	       <span class="nv">$ </span>createdb rollerdb
	       <span class="nv">$ </span>cat /tmp/rollerDb.dump.bz2 | bunzip2 | psql postgres
	       <span class="nv">$ </span>psql -f /tmp/rollerDb.dump postgres <span class="c">#restore from non-compressed file</span>
</code></pre>
</div>

<p>After having played back the information into the database, you might need to adopt the postgres passwords back to the values you have set them during your installation on the servlet container (in this case glassfish). You might otherwise end up with some ugly exceptions. To do that start the <code class="highlighter-rouge">psql</code> tool as postgres user and enter the following statements (of course adopt to your password ;) ).</p>

<div class="language-sql highlighter-rouge"><pre class="highlight"><code><span class="n">postgres</span><span class="o">@</span><span class="n">sigusr1</span><span class="p">:</span><span class="o">~</span><span class="err">$</span> <span class="n">psql</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">alter</span> <span class="k">user</span> <span class="n">roller</span> <span class="k">with</span> <span class="n">password</span> <span class="s1">'roller'</span><span class="p">;</span>
<span class="n">postgres</span><span class="o">=#</span> <span class="k">alter</span> <span class="k">user</span> <span class="n">postgres</span> <span class="k">with</span> <span class="n">password</span> <span class="s1">'postgres'</span><span class="p">;</span>
</code></pre>
</div>

<h3 id="references">References</h3>

<p>Especially when it comes to handling the database stuff, the PostgreSQL documentation was very helpful.</p>

<ul>
  <li><a href="http://www.postgresql.org/docs/8.1/static/backup.html">Backup PostgreSQL</a></li>
</ul>


        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2010-11-01T09:00:34+01:00">November 01, 2010</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=authsec&text=Backing up roller weblogger https://datapile.coffeecrew.org/backing-up-roller-weblogger/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://datapile.coffeecrew.org/backing-up-roller-weblogger/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://datapile.coffeecrew.org/backing-up-roller-weblogger/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://datapile.coffeecrew.org/backing-up-roller-weblogger/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://datapile.coffeecrew.org/switching-roller-from-derby-to-postgresql/" class="pagination--pager" title="Switching roller from Derby to PostgreSQL
">Previous</a>
    
    
      <a href="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr/" class="pagination--pager" title="Programming with the APR
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/authsec"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/authsec"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://datapile.coffeecrew.org/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Jens Frey. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://datapile.coffeecrew.org/assets/js/main.min.js"></script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-19717065-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






  </body>
</html>
