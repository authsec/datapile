<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Programming with the APR - Using MD5 - The Datapile</title>




<meta name="description" content="This article intends to show how to basically use the MD5 hashingalgorithm that ships with the Apache Portable Runtime (APR) library.">




<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="The Datapile">
<meta property="og:title" content="Programming with the APR - Using MD5">


  <link rel="canonical" href="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-md5/">
  <meta property="og:url" content="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-md5/">



  <meta property="og:description" content="This article intends to show how to basically use the MD5 hashingalgorithm that ships with the Apache Portable Runtime (APR) library.">



  <meta name="twitter:site" content="@authsec">
  <meta name="twitter:title" content="Programming with the APR - Using MD5">
  <meta name="twitter:description" content="This article intends to show how to basically use the MD5 hashingalgorithm that ships with the Apache Portable Runtime (APR) library.">
  <meta name="twitter:url" content="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-md5/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2010-11-02T11:00:34+01:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Jens Frey",
      "url" : "https://datapile.coffeecrew.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://datapile.coffeecrew.org/feed.xml" type="application/atom+xml" rel="alternate" title="The Datapile Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://datapile.coffeecrew.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://datapile.coffeecrew.org/">The Datapile</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/year-archive/">Archive</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://mmistakes.github.io/minimal-mistakes/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/categories/">Categories archive</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/tags/">Tags</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://datapile.coffeecrew.org/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://datapile.coffeecrew.org/c0ding" itemprop="item"><span itemprop="name">C0ding</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://datapile.coffeecrew.org/c" itemprop="item"><span itemprop="name">C</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Programming with the APR - Using MD5</li>
      
    
  </ol>
</nav>
  


<div id="main" role="main">
  


  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="https://datapile.coffeecrew.org/images/me.png" class="author__avatar" alt="" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name"></h3>
    
      <p class="author__bio" itemprop="description">
        Developer. Musician.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">Lörrach</span>
        </li>
      

      

      

      

      
        <li>
          <a href="https://twitter.com/authsec" itemprop="sameAs">
            <i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      
        <li>
          <a href="https://plus.google.com/+JensFrey" itemprop="sameAs">
            <i class="fa fa-fw fa-google-plus-square" aria-hidden="true"></i> Google+
          </a>
        </li>
      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/authsec" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      
        <li>
          <a href="https://www.youtube.com/user/../c/JensFrey" itemprop="sameAs">
            <i class="fa fa-fw fa-youtube-square" aria-hidden="true"></i> YouTube
          </a>
        </li>
      

      
        <li>
          <a href="https://soundcloud.com/john-c-flow" itemprop="sameAs">
            <i class="fa fa-fw fa-soundcloud" aria-hidden="true"></i> Soundcloud
          </a>
        </li>
      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  
  </div>



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Programming with the APR - Using MD5">
    <meta itemprop="description" content="This article intends to show how to basically use the MD5 hashingalgorithm that ships with the Apache Portable Runtime (APR) library.">
    <meta itemprop="datePublished" content="November 02, 2010">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Programming with the APR - Using MD5
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  2 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>This article intends to show how to basically use the MD5 hashing
algorithm that ships with the Apache Portable Runtime (APR) library.</p>

<h2 id="introduction">Introduction</h2>

<p>Sometimes you are really in need for some MD5 hashed strings. Most of
the time you are in such a need if you want to create a custom
password store where you don’t want an attacker to easily get
the password if he compromises your system. So MD5 hashed password are
great for such a purpose. Luckily the Apache Portable Runtime (APR)
provides such a MD5 hashing mechanism to you, so you can easily use
that and do not have to struggle with the complex details of how to
actually create a MD5 hash.</p>

<h3 id="hashing">Hashing</h3>

<p>Hashing basically describes a way of taking an arbitrary length input
and calculating that down into a secure, tamperproof cryptographic
value that can only be recalculated if the same input was given
again. The basic idea is that the calculation that is necessary to
produce the hashed output is very easy to perform, but if you just
have the hashed version of the password you cannot easily reverse that
operation (the reverse operation is very complex).</p>

<h3 id="salting">Salting</h3>

<p>If you are creating a password store on your own, you probably don’t
want a simple MD5 hashing mechanism, which the APR provides to
you. You probably want to add some salt to your password management
mechanism, since salting the password makes brute force attacks with
rainbow tables onto the hashed password repository so much more
inconvenient for the attacker.</p>

<p>Salting, for those who don’t know, simply sort of “enriches” your
password with some random bytes, that will be thrown into the mix when
hashing the actual password. Since a hash algorithm is only a good one
if it flips about 50 percent of the bits in the output if you change a
single input bit, you can imagine that a few added bits should
absolutely be sufficient to change the result of the hash operation.</p>

<p>In order for the algorithm to be able to reconstruct the same hash
again, he of course needs to know the salt that was initially used to
create the corresponding hash. Therefore this salt value will be
written in front of the final hashed password string.</p>

<p>A typical MD5 hash, or sometimes called an MD5 digest will look like:</p>

<div class="language-text highlighter-rouge"><pre class="highlight"><code>$apr1$XGOEPMa5$eUAF1NzTmHoqGZJSD5P4q1
</code></pre>
</div>

<h2 id="the-c0de">The c0de</h2>

<p>The code itself is pretty straight forward. You might notice that I’m
not using any APR data pool within the program itself. This is simply
due to the fact that I’m not needing any ;).</p>

<p>The program first initializes internal APR data structures and
registers a termination function. Then a randomized salt value is
generated (you could also use a fixed salt, but that is not
recommended). Finally the MD5 encoding is performed. The most
problematic part here is to figure out what the actual length of the
result will be. From what I observed the result is no longer than 37
characters, but that might change if the APR people e.g. decide to
change their “$apr1$” prefix which indicates the custom salting
algorithm to the library.</p>

        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2010-11-02T11:00:34+01:00">November 02, 2010</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=authsec&text=Programming with the APR - Using MD5 https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-md5/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-md5/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-md5/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-md5/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr_getopt/" class="pagination--pager" title="Programming with the APR - Using apr_getopt
">Previous</a>
    
    
      <a href="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr-hashtables/" class="pagination--pager" title="Programming with the APR - Using APR HashTables
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/authsec"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/authsec"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://datapile.coffeecrew.org/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Jens Frey. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://datapile.coffeecrew.org/assets/js/main.min.js"></script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-19717065-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






  </body>
</html>
