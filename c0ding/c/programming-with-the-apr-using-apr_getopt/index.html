<!doctype html>
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin SEO -->









<title>Programming with the APR - Using apr_getopt - The Datapile</title>




<meta name="description" content="This article will show you how to use the built in command line parserthat comes with the APR. There will be two source files, one showingyou how to use apr_getopt just to parse simple, single options and theother peace of source will show you how to use it with so called longoptions. You can download the single option parser here and thelong options parser here.XNOTE: The program supplied should actually use  apr_app_initialize(&amp;argc, &amp;argv, NULL); since  apr_initialize() is intended for library use only.">




<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="The Datapile">
<meta property="og:title" content="Programming with the APR - Using apr_getopt">


  <link rel="canonical" href="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr_getopt/">
  <meta property="og:url" content="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr_getopt/">



  <meta property="og:description" content="This article will show you how to use the built in command line parserthat comes with the APR. There will be two source files, one showingyou how to use apr_getopt just to parse simple, single options and theother peace of source will show you how to use it with so called longoptions. You can download the single option parser here and thelong options parser here.XNOTE: The program supplied should actually use  apr_app_initialize(&amp;argc, &amp;argv, NULL); since  apr_initialize() is intended for library use only.">



  <meta name="twitter:site" content="@authsec">
  <meta name="twitter:title" content="Programming with the APR - Using apr_getopt">
  <meta name="twitter:description" content="This article will show you how to use the built in command line parserthat comes with the APR. There will be two source files, one showingyou how to use apr_getopt just to parse simple, single options and theother peace of source will show you how to use it with so called longoptions. You can download the single option parser here and thelong options parser here.XNOTE: The program supplied should actually use  apr_app_initialize(&amp;argc, &amp;argv, NULL); since  apr_initialize() is intended for library use only.">
  <meta name="twitter:url" content="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr_getopt/">

  
    <meta name="twitter:card" content="summary">
    
  

  



  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2010-11-02T10:00:34+01:00">








  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Jens Frey",
      "url" : "https://datapile.coffeecrew.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->


<link href="https://datapile.coffeecrew.org/feed.xml" type="application/atom+xml" rel="alternate" title="The Datapile Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="https://datapile.coffeecrew.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">
    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body class="layout--single">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    <div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        <button><div class="navicon"></div></button>
        <ul class="visible-links">
          <li class="masthead__menu-item masthead__menu-item--lg"><a href="https://datapile.coffeecrew.org/">The Datapile</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/year-archive/">Archive</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://mmistakes.github.io/minimal-mistakes/">About</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/categories/">Categories archive</a></li>
          
            
            <li class="masthead__menu-item"><a href="https://datapile.coffeecrew.org/tags/">Tags</a></li>
          
        </ul>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>

    


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="http://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://datapile.coffeecrew.org/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://datapile.coffeecrew.org/c0ding" itemprop="item"><span itemprop="name">C0ding</span></a>
          <meta itemprop="position" content="2" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        
        <li itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
          <a href="https://datapile.coffeecrew.org/c" itemprop="item"><span itemprop="name">C</span></a>
          <meta itemprop="position" content="3" />
        </li>
        <span class="sep">/</span>
      
    
      
      
        <li class="current">Programming with the APR - Using apr_getopt</li>
      
    
  </ol>
</nav>
  


<div id="main" role="main">
  


  <div class="sidebar sticky">
  

<div itemscope itemtype="http://schema.org/Person">

  
    <div class="author__avatar">
      
        <img src="https://datapile.coffeecrew.org/images/me.png" class="author__avatar" alt="" itemprop="image">
      
    </div>
  

  <div class="author__content">
    <h3 class="author__name" itemprop="name"></h3>
    
      <p class="author__bio" itemprop="description">
        Developer. Musician.
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="http://schema.org/Place">
          <i class="fa fa-fw fa-map-marker" aria-hidden="true"></i> <span itemprop="name">Lörrach</span>
        </li>
      

      

      

      

      
        <li>
          <a href="https://twitter.com/authsec" itemprop="sameAs">
            <i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      
        <li>
          <a href="https://plus.google.com/+JensFrey" itemprop="sameAs">
            <i class="fa fa-fw fa-google-plus-square" aria-hidden="true"></i> Google+
          </a>
        </li>
      

      

      

      

      

      

      
        <li>
          <a href="https://github.com/authsec" itemprop="sameAs">
            <i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      
        <li>
          <a href="https://www.youtube.com/user/../c/JensFrey" itemprop="sameAs">
            <i class="fa fa-fw fa-youtube-square" aria-hidden="true"></i> YouTube
          </a>
        </li>
      

      
        <li>
          <a href="https://soundcloud.com/john-c-flow" itemprop="sameAs">
            <i class="fa fa-fw fa-soundcloud" aria-hidden="true"></i> Soundcloud
          </a>
        </li>
      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs">
      <i class="fa fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  
  </div>



  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    <meta itemprop="headline" content="Programming with the APR - Using apr_getopt">
    <meta itemprop="description" content="This article will show you how to use the built in command line parserthat comes with the APR. There will be two source files, one showingyou how to use apr_getopt just to parse simple, single options and theother peace of source will show you how to use it with so called longoptions. You can download the single option parser here and thelong options parser here.XNOTE: The program supplied should actually use  apr_app_initialize(&amp;argc, &amp;argv, NULL); since  apr_initialize() is intended for library use only.">
    <meta itemprop="datePublished" content="November 02, 2010">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 class="page__title" itemprop="headline">Programming with the APR - Using apr_getopt
</h1>
          
            <p class="page__meta"><i class="fa fa-clock-o" aria-hidden="true"></i> 




  1 minute read
</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        <p>This article will show you how to use the built in command line parser
that comes with the APR. There will be two source files, one showing
you how to use apr_getopt just to parse simple, single options and the
other peace of source will show you how to use it with so called long
options. You can download the <a href="//2010/10/aprGetopt.c">single option parser here</a> and the
<a href="//2010/10/aprGetoptLong.c">long options parser here</a>.<br />
X
<strong>NOTE:</strong> The program supplied should actually use
  <code class="highlighter-rouge">apr_app_initialize(&amp;argc, &amp;argv, NULL);</code> since
  <code class="highlighter-rouge">apr_initialize()</code> is intended for library use only.</p>

<h2 id="prerequisites">Prerequisites</h2>

<p>Like everytime, you need to have APR libraries installed in order to
be able to use them. You’ll additionally need the header files
too, so if you’re installing from some distribution specific
mechanism, be sure to have the “-dev” packages installed as well.</p>

<h2 id="explanation">Explanation</h2>

<p>There is really not that much to explain this time. We first
initialize APR, create a pool, then initialize the getopt parser and
then we’re walking through the options specified on the command
line. The most notable part here is the line: <code class="highlighter-rouge">cmdLineArgs-&gt;interleave
= 1;</code>. Setting the interleave to one allows us to have options and
final arguments specified “wildly” on the command line. That means
that the order of argument is not relevant. You can specify
<code class="highlighter-rouge">./aprGetoptLong --choose what -h lalalal</code> or you can type:
<code class="highlighter-rouge">./aprGetoptLong --choose what lalala -h</code> which, in this case would
lead to the same result.</p>

<h2 id="simple-options-code">Simple options code</h2>

<p>Now that you have seen how it works with simple options, long options
is no more magic. You just have to additionally initialize an array
basically, but see for yourself.</p>

<h2 id="long-options-code">Long options code</h2>

<p>Hope you enjoyed it.</p>


        
      </section>

      <footer class="page__meta">
        
        


        
          <p class="page__date"><strong><i class="fa fa-fw fa-calendar" aria-hidden="true"></i> Updated:</strong> <time datetime="2010-11-02T10:00:34+01:00">November 02, 2010</time></p>
        
      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?via=authsec&text=Programming with the APR - Using apr_getopt https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr_getopt/" class="btn btn--twitter" title="Share on Twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr_getopt/" class="btn btn--facebook" title="Share on Facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://plus.google.com/share?url=https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr_getopt/" class="btn btn--google-plus" title="Share on Google Plus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i><span> Google+</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-apr_getopt/" class="btn btn--linkedin" title="Share on LinkedIn"><i class="fa fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-persisting-information/" class="pagination--pager" title="Programming with the APR - Persisting information
">Previous</a>
    
    
      <a href="https://datapile.coffeecrew.org/c0ding/c/programming-with-the-apr-using-md5/" class="pagination--pager" title="Programming with the APR - Using MD5
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
</div>

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    
    
      <li><a href="https://twitter.com/authsec"><i class="fa fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter</a></li>
    
    
    
      <li><a href="http://github.com/authsec"><i class="fa fa-fw fa-github" aria-hidden="true"></i> GitHub</a></li>
    
    
    <li><a href="https://datapile.coffeecrew.org/feed.xml"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2018 Jens Frey. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>
      </footer>
    </div>

    <script src="https://datapile.coffeecrew.org/assets/js/main.min.js"></script>




  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-19717065-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>






  </body>
</html>
